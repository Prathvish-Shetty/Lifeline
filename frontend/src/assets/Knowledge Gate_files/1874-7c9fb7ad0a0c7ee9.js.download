(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1874],{98348:function(e,t,s){"use strict";s.d(t,{Ex:function(){return a},PS:function(){return r.courseAnalyticsActions},Uq:function(){return o},Y9:function(){return i},_q:function(){return l},ir:function(){return n},vE:function(){return r.vE}});var r=s(78445);let o={IDLE:0,REPORTING_ANALYTICS:1},n={ANALYTICS_REPORTING:"@analytics/reportingAnalytics",ANALYTICS_REPORTING_SUCCESS:"@analytics/reportingAnalyticsSuccess",ANALYTICS_REPORTING_FAILED:"@analytics/reportingAnalyticsFailed",RESTORE_DATA_FROM_CACHE:"@analytics/restoreDataFromCache",INIT_WITH_RESTORED_DATA:"@analytics/initWithRestoredData"},i={ANALYTICS_URL:"https://analytics-prod.learnyst.com/events"},a=1e4,l={AV_WATCH_EVENT:30001,PDF_WATCH_EVENT:30002,SLIDE_WATCH_EVENT:30003,STH_WATCH_EVENT:30004,YV_WATCH_EVENT:30005,LST_LIVE_WATCH_EVENT:30006,LESSON_DOWNLOAD_EVENT:30050}},26255:function(e,t,s){"use strict";s.d(t,{Z:function(){return T}});var r=s(97405),o=s(78445),n=s(73704),i=s(46988);let setAlertsData=e=>{let{upcoming_events:t}=e,s=[];return t.length>0&&t.forEach(e=>{let t={id:e.id,startTime:e.start_time,endTime:e.end_time,srcType:e.src_type,alertData:JSON.parse(e.alert_data)};s.push(t)}),s},getAlertNavParams=e=>{try{let{courses:t,lesson:s}=e,r=t[0],n={courseSeo:null==r?void 0:r.seo_title,courseId:r.id,bundleSeo:null,bundleId:0,lessonId:s.id,sectionId:s.section_id};if(r.activation_type===o.ri.PURCHASED&&!(0,i.Sh)(r.enrolment_expiry))return{...n};let a=t.filter(e=>[o.ri.PURCHASED,o.ri.FREE_PURCHASE].includes(e.activation_type)&&[o.courseType.BUNDLE,o.courseType.BATCH].includes(e.course_type)&&!(0,i.Sh)(e.enrolment_expiry));if(a.length>0)return n.bundleSeo=a[0].seo_title,n.bundleId=a[0].id,{...n};if(r.activation_type===o.ri.ENROLLED&&!(0,i.Sh)(r.enrolment_expiry)&&r.sell_individual)return{...n};let l=t.filter(e=>[o.ri.ENROLLED,o.ri.FREE_PURCHASE].includes(e.activation_type)&&[o.courseType.BUNDLE,o.courseType.BATCH].includes(e.course_type)&&!(0,i.Sh)(e.enrolment_expiry));if(l.length>0)return n.bundleSeo=l[0].seo_title,n.bundleId=l[0].id,{...n};if(r.sell_individual)return{...n};return t[1]&&(n.bundleSeo=t[1].seo_title,n.bundleId=t[1].id),{...n}}catch(e){console.log("error getAlertNavParams",e)}};var a=s(49497),l=s(81851),c=s(37648);let{ALERT_API_REQUEST:u,ALERT_API_FAILURE:d,ALERT_API_SUCCESS:S,FETCH_ACTUAL_ALERTS_IDS:_,FETCH_ACTUAL_ALERTS_IDS_SUCCESS:E,FETCH_ACTUAL_ALERTS_IDS_FAILED:D}=o.alertApiActions,{ALERT_URL:p}=o.API_URLS;var T={name:"alertsBundle",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.uu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{...e,alertState:o.fp.GETTING_ALERT_LIST,fetchStatus:o.UK.IN_PROGRESS,shouldFetchAlertWidget:!1,shouldFetchDataForWidget:!1};case S:return{...e,fetchStatus:o.UK.SUCCESS,upcomingEvents:setAlertsData(t.response)};case d:return{...e,fetchStatus:o.UK.FAILED,error:t.error};case _:return{...e,alertState:o.fp.GETTING_ACTUAL_IDS,fetchStatus:o.UK.IN_PROGRESS,currentAlertId:t.alertId};case E:return{...e,fetchStatus:o.UK.SUCCESS,currentAlertNavParams:new a.DD(getAlertNavParams(t.response))};case D:return{...e,fetchStatus:o.UK.FAILED,error:t.error};case n.P3.ALERT_LOADED:return{...e,shouldFetchDataForWidget:!0,widgetParams:t.payload.widgetParams};case c.notifications.CLEAR_CACHE:return new a.uu;case c.notifications.NAVIGATION_CHANGED:if(t.currentScreen===n.i_.VIEW_ALL_ALERTS)return{shouldFetchDataForWidget:!0,...new a.uu};return{...e};default:return e}},selectAlertsFetchStatus:e=>e.alertsBundle.fetchStatus,selectAlertsData:e=>e.alertsBundle.upcomingEvents,selectAlertsError:e=>e.alertsBundle.error,selectCurrentLiveAlertId:e=>e.alertsBundle.currentAlertId,selectCurrentAlertState:e=>e.alertsBundle.alertState,selectCurrentAlertNavParams:e=>e.alertsBundle.currentAlertNavParams,selectShouldFetchAlertWidget:e=>e.alertsBundle.shouldFetchDataForWidget,selectAlertWidgetDataParams:e=>e.alertsBundle.widgetParams,selectAlertWidgetCacheRestoreState:e=>{var t;return null===(t=e.categoryBundle)||void 0===t?void 0:t.cacheRestoreState},doFetchAlertsData:(e,t,r,n,i)=>r=>{let{dispatch:n,httpApi:a,persist:c}=r;n({type:u});let _="".concat(p),E={school_id:l.customerConfig.SCHOOL_ID};t||(E.no_of_upcoming_events=e||o.JJ),i&&(E.course_id=i),a.get(_,E).then(e=>{let{response:t}=e;try{n({type:S,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;n({type:d,error:t}),console.log(t)})},doFetchActualAlertId:e=>t=>{let{dispatch:s,httpApi:r}=t;s({type:_,alertId:e});let n="".concat(p,"/").concat(e),i={school_id:l.customerConfig.SCHOOL_ID,no_of_upcoming_events:o.JJ};r.get(n,i).then(e=>{let{response:t}=e;s({type:E,response:t})}).catch(e=>{let{error:t}=e;s({type:D,error:t})})},reactShouldFetchAlertsBundleData:(0,r.P1)("selectAlertsData","selectAlertsFetchStatus","selectNavigationCurrentScreen","selectShouldFetchAlertWidget","selectAlertWidgetDataParams","selectCanInternetFetchApiData","selectNavigationData",(e,t,s,r,i,a,l)=>{let u=!1,d=null==i?void 0:i.alertCount,S=!1,_=null;return(s===n.i_.VIEW_ALL_ALERTS&&r&&(S=!0),(s===n.i_.HOME||s===n.i_.STORE||s===n.i_.VIEW_ALL_ALERTS)&&r&&((null==l?void 0:l.bundleId)&&(_=null==l?void 0:l.bundleId),t===o.UK.IDLE&&(u=!0),u))?{actionCreator:"doFetchAlertsData",args:[d,S,(null==i?void 0:i.categoryWidgetCacheRestoreState)||c.Zg.NOT_RESTORED,(null==i?void 0:i.canInternetFetchApiData)||a,_]}:null}),reactShouldFetchAlertCourses:(0,r.P1)("selectCurrentLiveAlertId","selectAlertsFetchStatus","selectCurrentAlertState","selectNavigationCurrentScreen",(e,t,s,r)=>{let i=!1;return r!==n.i_.LIVE_ALERT?null:(s===o.fp.GETTING_ACTUAL_IDS&&t===o.UK.IDLE&&(i=!0),i)?{actionCreator:"doFetchActualAlertId",args:[e]}:null})}},49497:function(e,t,s){"use strict";s.d(t,{DD:function(){return AlertNavParams},uu:function(){return AllAlertsData}});var r=s(78445),o=s(37648);function AllAlertsData(){this.fetchStatus=r.UK.IDLE,this.alertState=r.fp.IDLE,this.upcomingEvents=[],this.currentAlertId=0,this.currentAlertNavParams=null,this.shouldFetchAlertWidget=!1,this.widgetParams={},this.cacherestoreState=o.Zg.NOT_RESTORED,this.error=null,this.error={errorCode:0,errorMessage:""}}function AlertNavParams(e){this.courseSeo=e.courseSeo,this.courseId=e.courseId,this.bundleSeo=e.bundleSeo,this.bundleId=e.bundleId,this.lessonId=e.lessonId,this.sectionId=e.sectionId}},71605:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var r=s(78445);function AttachmentInitialState(){this.contentSignedUrl="",this.fetchStatus=r.UK.IDLE,this.error={errorCode:0,errorMessage:""}}var o=s(73704),n=s(81851);let{ATTACHMENT_API_REQUEST:i,ATTACHMENT_API_FAILURE:a,ATTACHMENT_API_SUCCESS:l,ATTACHMENT_API_RESET:c}=r.attachmentApiActions,{ATTACHMENT_URL:u}=r.API_URLS;var d={name:"attachmentBundle",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new AttachmentInitialState,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return{...e,fetchStatus:r.UK.IN_PROGRESS};case l:return{...e,fetchStatus:r.UK.SUCCESS,contentSignedUrl:t.response.content_signed_url};case a:return{...e,fetchStatus:r.UK.FAILED,error:t.error};case c:return new AttachmentInitialState;default:return e}},selectAttachmentData:e=>e.attachmentBundle,doResetAttachmentBundle:()=>e=>{let{dispatch:t}=e;t({type:c})},doFetchAttachmentForLesson:e=>t=>{let{dispatch:r,httpApi:c}=t,d=e.course_id,S=e.lesson_id;r({type:i,courseId:d});let _="".concat(u),E={action:o.UX.ATTACHMENT_CONTENT,course_id:d,lesson_id:S,token:e.token,content_version:n.customerConfig.content_version};c.post(_,E).then(e=>{let{response:t}=e;try{r({type:l,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:a,error:t})})}}},63720:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_authorBundle}});var r=s(97405),o=s(78445),n=s(73704);function AuthorsData(){this.authorDetails={}}function AuthorsDetails(e){this.authorName=e.authorName,this.authorImage=e.authorImage,this.authorId=e.authorId,this.bio=e.bio,this.fb=e.fb,this.linkedIn=e.linkedIn,this.twitter=e.twitter,this.mobile=e.mobile,this.youtube=e.youtube,this.whatsapp=e.whatsapp,this.telegram=e.telegram}let setAuthorsData=(e,t,s)=>{let r={...s},n=[];return e.forEach(e=>{var t;let s="",r="",o="";try{let{telegram_link:t,whatsapp_link:n,youtube_link:i}=JSON.parse(e.social_links);s=t,r=i,o=n}catch(e){console.log("author's social media links parsing failed")}let i={authorName:e.name,authorImage:e.profile_photo_file_name,authorId:e.id,bio:null!==(t=e.bio)&&void 0!==t?t:"",email:e.email,fb:e.fb_link,linkedIn:e.linkedin_link,twitter:e.twitter_link,mobile:e.mobile,youtube:r,whatsapp:o,telegram:s};n.push(new AuthorsDetails(i))}),r[t]={authorsData:n,lastFetchTime:Date.now(),fetchStatus:o.UK.SUCCESS,error:{errorCode:0,errorMessage:null}},r},setAuthorErrorData=(e,t,s)=>{let r={...s};return r[e]={...r[e],fetchStatus:o.UK.FAILED,error:t},r},setAuthorinit=(e,t)=>{let s={...t};return s[e]={fetchStatus:o.UK.IN_PROGRESS},s},restoreAuthorFromCache=(e,t,s)=>{let r={};return r[s]={...t},{...e,...r}},{AUTHOR_API_REQUEST:i,AUTHOR_API_FAILURE:a,AUTHOR_API_SUCCESS:l,AUTHOR_RESTORE_FROM_CACHE:c}=o.authourApiAtions,{USER_SIGNEDIN:u,USER_SIGNEDOUT:d,CLEAR_CACHE:S}=n.notifications,{AUTHOR_URL:_}=o.API_URLS;var bundles_authorBundle=e=>({name:"authorsBundle",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new AuthorsData,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case i:return{...t,authorDetails:setAuthorinit(s.courseId,t.authorDetails)};case l:return{...t,authorDetails:setAuthorsData(s.response,s.courseId,t.authorDetails)};case a:return{...t,authorDetails:setAuthorErrorData(s.courseId,s.error,t.authorDetails)};case c:return{...t,authorDetails:restoreAuthorFromCache(t.authorDetails,s.author,s.courseId)};case u:case d:case S:return new AuthorsData;default:return t}},selectAuthorsData:e=>e.authorsBundle.authorDetails,selectCurrentAuthorData:(0,r.P1)("selectCurrentCourseId","selectCurrentBundleId","selectAuthorsData",(e,t,s)=>{let r=null;return e?r=s[e]:t&&(r=s[t]),r}),doFetchAuthors:(e,t,r)=>t=>{let{dispatch:r,httpApi:o,persist:n}=t;!function(t){let n="".concat(_);r({type:i,courseId:e}),o.get(n,{course_id:e}).then(t=>{let{response:o}=t;try{r({type:l,response:o,courseId:e})}catch(e){s.g.bugsnag.notify(e)}}).catch(s=>{let{error:o}=s;t?r({type:c,author:t,courseId:e}):r({type:a,courseId:e,error:o})})}()},reactShouldFetchAuthorBundleDetails:(0,r.P1)("selectCurrentBundleDetails","selectCurrentCourseDetails","selectCurrentBundleId","selectCurrentCourseId","selectAppTime","selectNavigationCurrentScreen","selectCurrentAuthorData","selectCanInternetFetchApiData",(e,t,s,r,i,a,l,c)=>{let u=!1;if(!(a===n.i_.LESSON_PLAYER||a===n.i_.COURSE_DETAILS||a===n.i_.COURSE_DETAILS_SECTIONS||a===n.i_.COURSE_DETAILS_LESSONS))return null;let d=0,S=!1;if(!r&&s&&e?(d=s,S=e.isShowAuthorsEnabled):r&&t&&(d=r,S=t.isShowAuthorsEnabled),!S)return null;if(l&&l.fetchStatus===o.UK.IDLE&&(u=!0),l&&l.fetchStatus===o.UK.SUCCESS){let e=i-l.lastFetchTime;e>n.xU&&c&&(u=!0)}return(l||(u=!0),u)?{actionCreator:"doFetchAuthors",args:[d,i,c]}:null})})},45516:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var r=s(97405),o=s(78445),n=s(73704);function CertificateInitialState(){this.certificateCourses={}}function CourseCertificateDetails(){this.certificateUrl="",this.certificateV2Data=null,this.certificateTests=[],this.isCompleted=!1,this.isElegible=!1,this.totalQuiz=0,this.completedQuiz=0,this.courseCompletionCriteria=0,this.lastFetchTime=0,this.quizDetails={quizName:"",resultType:0,mockTestId:0},this.fetchStatus=o.UK.IDLE,this.error={errorCode:0,errorMessage:""},this.isDirtyData=!1,this.cacheRestoreState=o.Zg.NOT_RESTORED,this.uploadUrlToDatabase={error:{errorCode:0,errorMessage:""},fetchStatus:o.UK.IDLE,url:""}}let setCompletedQuiz=e=>{let t=0;return e.forEach(e=>{Number(e.my_marks)>=e.pass_marks&&(t+=1)}),t},setCertificateData=(e,t,s)=>{let r={},n={id:s.id,courseId:s.course_id,certificateUrl:s.download_url,certificateV2Data:s.certificate_data,certificateTests:s.certificate_tests,isCompleted:s.is_completed,isElegible:s.is_eligible,lastFetchTime:Date.now(),totalQuiz:s.certificate_tests.length>=1?s.certificate_tests.length:0,completedQuiz:s.certificate_tests.length?setCompletedQuiz(s.certificate_tests):0,courseCompletionCriteria:null==s?void 0:s.course_completion_criteria};return r[t]={isDirtyData:!1,fetchStatus:o.UK.SUCCESS,error:{errorCode:0,errorMessage:null},uploadUrlToDatabase:{error:{errorCode:0,errorMessage:null},fetchStatus:o.UK.IDLE,url:""},...n},{...e,...r}},setCertificateUploadUrlData=(e,t,s,r)=>{let n={};return n[t]={uploadUrlToDatabase:{url:s,fetchStatus:o.UK.SUCCESS,error:{errorCode:0,errorMessage:null}}},{...e,...n}},setError=(e,t)=>{let{courseId:s,error:r}=t;return e[s]={...e[s],fetchStatus:o.UK.FAILED,error:{errorCode:r.errorCode,errorMessage:r.errorMessage}},{...e,...e}},setCertificateUploadUrlError=(e,t)=>{var s,r;let{courseId:n,error:i}=t;return e[n]={...e[n],uploadUrlToDatabase:{error:{errorCode:null==i?void 0:null===(s=i.error)||void 0===s?void 0:s.errorCode,errorMessage:null==i?void 0:null===(r=i.error)||void 0===r?void 0:r.errorMessage},fetchStatus:o.UK.FAILED,url:""}},{...e,...e}},setFetchProgress=(e,t)=>(e[t]?e[t]={...e[t],fetchStatus:o.UK.IN_PROGRESS}:e[t]={fetchStatus:o.UK.IN_PROGRESS,error:{errorCode:0,errorMessage:null},cacheRestoreState:o.Zg.NOT_RESTORED},{...e,...e}),setCertificateUploadUrlFetchProgress=(e,t)=>(e[t]={...e[t],uploadUrlToDatabase:{error:{errorCode:0,errorMessage:null},fetchStatus:o.UK.IN_PROGRESS,url:""}},{...e,...e}),restoreFromCache=(e,t,s)=>{let r={};return r[s]={...e[s],...t,cacheRestoreState:o.Zg.RESTORED,fetchStatus:o.UK.SUCCESS},{...e,...r}},setDirtyFlag=(e,t)=>{let s={...e};return t.forEach(e=>{s[e]&&(s[e]={...s[e],isDirtyData:!0})}),{...e,...s}},clearCache=e=>{let t={},s=new CourseCertificateDetails;return Object.keys(e).forEach(e=>{t[e]={...s,fetchStatus:o.UK.IDLE}}),{...e,...t}};var i=s(81851);let{CERTIFICATE_API_REQUEST:a,CERTIFICATE_API_FAILURE:l,CERTIFICATE_API_SUCCESS:c,RESTORE_CERTIFICATE_DETAILS_FROM_CACHE:u,CERTIFICATE_UPLOAD_URL_API_REQUEST:d,CERTIFICATE_UPLOAD_URL_API_FAILURE:S,CERTIFICATE_UPLOAD_URL_API_SUCCESS:_}=o.certificateApiActions,{USER_SIGNEDIN:E,USER_SIGNEDOUT:D,CLEAR_CACHE:p,DATA_EXPIRED:T,NAVIGATION_CHANGED:C}=n.notifications,{CERTIFICATE_URL:h,CERTIFICATE_URL_UPLOAD:I}=o.API_URLS;var m={name:"certificateBundle",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new CertificateInitialState,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return{...e,certificateCourses:setFetchProgress(e.certificateCourses,t.courseId)};case l:return{...e,certificateCourses:setError(e.certificateCourses,t.payload)};case c:return{...e,certificateCourses:setCertificateData(e.certificateCourses,t.courseId,t.response)};case u:return{...e,certificateCourses:restoreFromCache(e.certificateCourses,t.certificateCourses,t.courseId)};case d:return{...e,certificateCourses:setCertificateUploadUrlFetchProgress(e.certificateCourses,t.courseId)};case S:return{...e,certificateCourses:setCertificateUploadUrlError(e.certificateCourses,t.payload)};case _:return{...e,certificateCourses:setCertificateUploadUrlData(e.certificateCourses,t.courseId,t.certUrl,t.response)};case T:return{...e,certificateCourses:setDirtyFlag(e.certificateCourses,t.courseIds)};case E:case D:case p:return{...e,certificateCourses:clearCache(e.certificateCourses)};case C:return{...e,certificateCourses:{},quizDetails:{quizName:t.params.quizName,resultType:t.params.resultType,mockTestId:t.params.mockTestId||t.params.id}};default:return e}},doFetchCertificateForCourse:e=>t=>{let{dispatch:r,httpApi:o}=t;r({type:a,courseId:e});let n="".concat(h),u={course_id:e,school_id:parseInt(i.customerConfig.SCHOOL_ID)};o.get(n,u).then(t=>{let{response:o}=t;try{r({type:c,courseId:e,response:o})}catch(e){s.g.bugsnag.notify(e)}}).catch(t=>{let{error:s}=t;r({type:l,payload:{courseId:e,error:s}})})},doSendCertificateUrlToBackend:(e,t,r)=>o=>{let{dispatch:n,httpApi:i}=o;n({type:d,courseId:e,certUrl:t});let a="".concat(I);i.post(a,{certificate:{certificate_id:r,download_url:t}}).then(r=>{let{response:o}=r;try{n({type:_,courseId:e,certUrl:t,response:o})}catch(t){s.g.bugsnag.notify(t),n({type:S,payload:{courseId:e,errorData:{error:{errorCode:0,errorMessage:"Dispatching error"}}}})}}).catch(t=>{n({type:S,payload:{courseId:e,error:t}})})},selectAllCourseCertificateRaw:e=>e.certificateBundle,selectAllCourseCertificate:e=>e.certificateBundle.certificateCourses,selectCurrentCertificateCacheRestoreState:(0,r.P1)("selectAllCourseCertificate","selectCurrentCourseId","selectCurrentTestCourseId",(e,t,s)=>0!==t&&0!==s&&e[t||s]?e[t||s].cacheRestoreState:n.Zg.NOT_RESTORED),selectCurrentCertificateFetchStatus:(0,r.P1)("selectAllCourseCertificate","selectCurrentCourseId","selectCurrentTestCourseId",(e,t,s)=>e[t||s]&&e[t||s]?e[t||s].fetchStatus:o.UK.IDLE),selectCurrentCourseCertificate:(0,r.P1)("selectAllCourseCertificate","selectCurrentCourseId","selectCurrentTestCourseId",(e,t,s)=>(t||s)&&e&&e[t||s]?e[t||s]:null),selectCertificateError:(0,r.P1)("selectAllCourseCertificate","selectCurrentCourseId","selectCurrentTestCourseId",(e,t,s)=>e[t||s]&&e[t||s]?e[t||s].error:{error:{errorCode:0,errorMessage:""}}),selectCertificateQuizDetails:e=>e.certificateBundle.quizDetails,reactShouldFetchCertificates:(0,r.P1)("selectCurrentCourseId","selectNavigationCurrentScreen","selectCurrentCertificateFetchStatus","selectCurrentCourseCertificate","selectAppTime","selectCanInternetFetchApiData","selectCurrentCertificateCacheRestoreState","selectCurrentCourseDetails","selectIsCourseCertificateEnabled","selectCurrentTestCourseId",(e,t,s,r,i,a,l,c,u,d)=>{let S=!1;if(!e&&!d||!c&&!d||c&&!c.isCertificateEnabled&&!d||t!==n.i_.TEST_RESULT&&t!==n.i_.CERTIFICATES&&t!==n.i_.LESSON_PLAYER&&t!==n.i_.COURSE_ANALYTICS||!u&&t===n.i_.TEST_RESULT)return null;if(s===o.UK.IDLE&&(S=!0),s===o.UK.SUCCESS&&r&&r.lastFetchTime){let e=i-r.lastFetchTime;e>n.xU&&a&&(S=!0)}return(r&&r.isDirtyData&&s===o.UK.SUCCESS&&(S=!0),S)?{actionCreator:"doFetchCertificateForCourse",args:[e||d,l,i]}:null})}},6374:function(e,t,s){"use strict";s.d(t,{Z:function(){return T}});var r=s(97405),o=s(78445);let n={fetchStatus:o.UK.IDLE,markAsCompleteError:null,courseCompletionData:null,completedLessonData:null,markAsIncompleteError:null,getCourseStatsError:null};var i=s(73704);let{GET_COURSE_COMPLETION_STATS:a,GET_COURSE_COMPLETION_STATS_SUCCESS:l,GET_COURSE_COMPLETION_STATS_FAILED:c,MARK_LESSON_AS_COMPLETE:u,MARK_LESSON_AS_COMPLETE_SUCCESS:d,MARK_LESSON_AS_INCOMPLETE:S,MARK_LESSON_AS_INCOMPLETE_SUCCESS:_,MARK_LESSON_AS_COMPLETE_FAILED:E,MARK_LESSON_AS_INCOMPLETE_FAILED:D,RESTORE_STATS_FROM_PERSIST:p}=o.courseCompletionActions,setCourseCompletionData=e=>{let t={},s={};return e.forEach(e=>{t[e.course_id]||(t[e.course_id]=[]),t[e.course_id].push(e.lesson_id),s[e.lesson_id]={lessonId:e.lesson_id,sectionId:e.section_id}}),{courseCompletionData:t,completedLessonData:s}},addCompletedLesson=(e,t,s)=>{let r=e;if(r||(r={}),r[s]||(r[s]=[]),0>r[s].indexOf(t))r[s].unshift(t);else{let e=r[s].indexOf(t);r[s].splice(e,1),r[s].unshift(t)}return r[s]=[...r[s]],{...e,...r}},addLessonData=(e,t,s)=>{let r=e;return r||(r={}),r[t]||(r[t]={lessonId:t,sectionId:s}),{...e,...r}},deleteLessondata=(e,t)=>{let s=e;return s||(s={}),s[t]&&delete s[t],{...e,...s}},deleteUnmarkedLesson=(e,t,s)=>{if(!e[s])return e;let r=e[s].indexOf(t);return e[s].splice(r,1),e[s]=[...e[s]],{...e,...e}};var T={name:"courseCompletionStats",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return{...e,fetchStatus:o.UK.IN_PROGRESS,getCourseStatsError:null};case l:return{...e,fetchStatus:o.UK.SUCCESS,...setCourseCompletionData(t.response.stats)};case c:return{...e,fetchStatus:o.UK.FAILED,getCourseStatsError:t.error};case p:return{...e,fetchStatus:o.UK.SUCCESS,courseCompletionData:t.courseCompletionData};case d:return{...e,courseCompletionData:addCompletedLesson(e.courseCompletionData,t.lessonId,t.courseId),completedLessonData:addLessonData(e.courseCompletionData,t.lessonId,t.sectionId)};case _:return{...e,courseCompletionData:deleteUnmarkedLesson(e.courseCompletionData,t.lessonId,t.courseId),completedLessonData:deleteLessondata(e.courseCompletionData,t.lessonId)};case E:return{...e,markAsCompleteError:t.error};case D:return{...e,markAsIncompleteError:t.error};case i.notifications.CLEAR_COURSE_STATS_DATA:case i.notifications.CLEAR_CACHE:case i.notifications.USER_SIGNEDOUT:case i.notifications.DATA_EXPIRED:case i.notifications.AUTH_TOKEN_EXPIRED:return n;default:return e}},doMarkLessonAsComplete:(e,t,r)=>n=>{let{dispatch:a,httpApi:l}=n;a({type:u,payload:{courseId:t,lessonId:e}});let c={lesson_id:e,device_type:i.OS};l.post(o.API_URLS.STATS_URL,c).then(o=>{try{a({type:d,response:o,courseId:t,lessonId:e,sectionId:o.section_id,isCompletionType:r})}catch(e){s.g.bugsnag.notify(e)}}).catch(s=>{let{error:r}=s;a({type:E,error:r,courseId:t,lessonId:e})})},doFetchCourseCompletionStats:()=>e=>{let{dispatch:t,httpApi:r,persist:n}=e;function restoreFromPersist(e){n.getValue("courseCompletionStats",o.Hj.COURSE_COMPLETION_STATS_VERSION,0).then(s=>{s?t({type:p,courseCompletionData:s}):t({type:c,error:e})})}t({type:a}),r.get(o.API_URLS.STATS_URL).then(e=>{let{response:r}=e;try{t({type:l,response:r})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;restoreFromPersist(t)})},doMarkLessonAsIncomplete:(e,t)=>r=>{let{dispatch:n,httpApi:i}=r;n({type:S,payload:{courseId:t,lessonId:e}}),i.delete("".concat(o.API_URLS.STATS_URL,"/").concat(e)).then(r=>{let{response:o}=r;try{n({type:_,response:o,courseId:t,lessonId:e})}catch(e){s.g.bugsnag.notify(e)}}).catch(s=>{let{error:r}=s;n({type:D,error:r,courseId:t,lessonId:e})})},selectAuth:e=>e.auth,selectCourseCompletionStatsRaw:e=>e.courseCompletionStats,selectCourseCompletionData:(0,r.P1)("selectCourseCompletionStatsRaw",e=>e.courseCompletionData?e.courseCompletionData:null),selectCurrentCourseCompletionStats:(0,r.P1)("selectCurrentCourseId","selectCourseCompletionData",(e,t)=>t&&0!==e?t[e]:null),selectCompletedLessonData:(0,r.P1)("selectCourseCompletionStatsRaw",e=>e.completedLessonData?e.completedLessonData:{}),reactShouldFetchCourseCompletionStats:(0,r.P1)("selectCourseCompletionStatsRaw","selectSharedIsUserLoggedIn",(e,t)=>{if(e.fetchStatus===o.UK.IN_PROGRESS||!t||e.getCourseStatsError)return null;let s=!1;return(e.courseCompletionData||(s=!0),!0===s)?{actionCreator:"doFetchCourseCompletionStats"}:null}),persistActions:[l,d,_,i.notifications.USER_SIGNEDOUT,i.notifications.USER_SIGNEDIN,i.notifications.DATA_EXPIRED],persistVersion:o.Hj.COURSE_COMPLETION_STATS_VERSION,persistFunc:(e,t,s)=>{let r="".concat(e),o=[];return s.type===i.notifications.USER_SIGNEDOUT||s.type===i.notifications.USER_SIGNEDIN||s.type===i.notifications.DATA_EXPIRED?o.push({key:r,value:null}):o.push({key:r,value:t.courseCompletionData}),o}}},27208:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_coursesBundle}});var r=s(97405),o=s(42040),n=s(91542),i=s(78445),a=s(73704),l=s(81851),c=s(59876);let cipher=e=>{let textToChars=e=>e.split("").map(e=>e.charCodeAt(0)),byteHex=e=>"0".concat(Number(e).toString(16)).substr(-2),applySaltToChar=t=>textToChars(e).reduce((e,t)=>e^t,t);return e=>e.split("").map(textToChars).map(applySaltToChar).map(byteHex).join("")},decipher=e=>{let textToChars=e=>e.split("").map(e=>e.charCodeAt(0)),applySaltToChar=t=>textToChars(e).reduce((e,t)=>e^t,t);return e=>e.match(/.{1,2}/g).map(e=>parseInt(e,16)).map(applySaltToChar).map(e=>String.fromCharCode(e)).join("")},encryptData=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;let r=e;if(s)try{r=JSON.stringify(e)}catch(e){console.log("encrypt data json stringify error")}return cipher(t)(r)},decryptData=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;let r=decipher(t)(e);if(s)try{r=JSON.parse(r)}catch(e){console.log("decrypt data json parse error")}return r};var u=s(48098),d=s(37648),S=s(12672),_=s(93050);let{COURSE_FETCH:E,COURSE_FETCH_FAILED:D,COURSE_FETCH_SUCCESS:p,RESTORE_COURSE_DETAILS_FROM_CACHE:T,COURSES_RESTORE_FROM_CACHE_SUCCESS:C,SET_CURRENT_ACCESSING_LESSON:h,LESSON_CHANGED:I,COURSE_ACCESS_DATA_FETCH:m,COURSE_ACCESS_DATA_FETCH_SUCCESS:f,COURSE_ACCESS_DATA_FETCH_FAILED:g,GET_ID_FOR_SEO_TITLE:y,GET_ID_FOR_SEO_TITLE_SUCCESS:A,GET_ID_FOR_SEO_TITLE_FAILED:N,UPDATE_PROMO_VIDEO_TIMESTAMP:R,SET_LIVE_LESSON_ATTENDANCE:P,NOTIFY_ON_PLAYER_ERROR_CAPTURED:L,NOTIFY_ON_PLAYER_PLAY_INITIATED:v,UPDATE_CURRENT_LESSON_STATE:O,GET_LIVE_LESSON_DETAILS:U,GET_LIVE_LESSON_DETAILS_SUCCESS:F,GET_LIVE_LESSON_DETAILS_FAILED:w,CONTENT_ACCESS_FETCH:b,CONTENT_ACCESS_FETCH_SUCCESS:M,CONTENT_ACCESS_FETCH_FAILED:k,UPDATE_LEADER_BOARD:B,UPDATE_LEADER_BOARD_SUCCESS:V,UPDATE_LEADER_BOARD_FAILED:Y,UPDATE_JOIN_LINK_TIMER:H}=i.coursesActions,{COURSE_TIME_CONSUMED:G}=i.courseAnalyticsActions,{ACHIEVEMENT_TRACKED:K}=i.achievementsActions,{USER_SIGNEDIN:W,USER_SIGNEDOUT:x,CLEAR_CACHE:q,NAVIGATION_CHANGED:Q,DATA_EXPIRED:z,FORCE_LEGACY_DRM_CHANGED:j,NEW_USER_LIKE_ADDED:Z,USER_LIKE_REMOVED:J}=a.notifications,{UPDATE_PRICING_MODEL:$}=i.pricingActions,X=[a.i_.LESSON_PLAYER,a.i_.COURSE_DETAILS,a.i_.DISCUSSION,a.i_.NOTES,a.i_.COURSE_REVIEW,a.i_.TEST_ANALYTICS,a.i_.COURSE_DETAILS_SECTIONS,a.i_.COURSE_DETAILS_LESSONS,a.i_.NEWSFEED_EMBED_PLAYER,a.i_.ADD_REVIEW,a.i_.CONTENT_PREVIEW,a.i_.SUBSCRIPTION_PLANS,a.i_.DEMAND_TICKETS,a.i_.DEMAND_DETAILS,a.i_.RAISE_DEMAND,a.i_.COURSE_ANALYTICS,a.i_.BATCH_DISCUSSION_CIRCLE,a.i_.BATCH_CONTENT,a.i_.BATCH_DASHBOARD,a.i_.BATCH_SCHEDULE,a.i_.BATCH_RATING_REVIEW,a.i_.BATCH_ABOUT,a.i_.BATCH_ANNOUNCEMENT,a.i_.BATCH_MEMBERS,a.i_.BATCH_LEADERBOARD];var bundles_coursesBundle=e=>({name:"courses",getReducer:()=>{let t=e||new u.pF;return function(){var e,s;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case E:return{...r,coursesDetails:(0,c.qR)(r.coursesDetails,n.payload.courseId)};case y:return{...r,seoToIdFetchStatus:i.UK.IN_PROGRESS};case A:return{...r,...(0,c.pz)(n.response,r),seoToIdFetchStatus:i.UK.SUCCESS,currentAccesingLessons:(0,c.Jk)(n.response,r.currentAccesingLessons)};case N:return{...r,seoToIdFetchStatus:i.UK.FAILED,seoToIdFetchError:n.error};case p:return{...r,serverTimeOffset:(0,c.gQ)(n.response.current_time),seoToIdFetchStatus:i.UK.SUCCESS,currentProductType:(0,c.Ds)(r.currentProductType,n.response.course_type,r.isCurrentCourseFromBundle,n.navigationPrevScreen),coursesDetails:(0,c.lx)(r.coursesDetails,n.response,n.isBundledCourse,null==n?void 0:n.ctData,n.subscriptionAccessDetails||{purchasedIds:[],subscriptionId:0}),courseAnalyticsData:(0,c.Mw)(n.response,n.currentCourseCompletionStats,r),currentCourseAccessBundleId:n.response.access_bundle_id||0};case f:return{...r,coursesDetails:(0,c.Fz)(r.coursesDetails,n.response,n.courseId),currentBundleId:n.bundleId||r.currentBundleId,currentAccessibleBundleId:n.bundleId||r.accessibleBundleId};case m:return{...r,coursesDetails:(0,c.$G)(r.coursesDetails,n.courseId)};case g:return{...r,coursesDetails:(0,c.hP)(r.coursesDetails,n.courseId,n.error)};case G:if(!n.data.hasCourseTimeRestriction)return r;return{...r,courseDetails:(0,c.uw)(r.coursesDetails,n.data)};case Q:return{...r,...(0,c.ol)(r,n)};case z:return{...r,coursesDetails:(0,c.Eg)(r.coursesDetails,n.courseIds)};case D:return{...r,coursesDetails:(0,c.sT)(r.coursesDetails,n.courseId,n.error)};case h:return{...r,currentAccesingLessons:(0,c.Zs)(r.currentAccesingLessons,n.payload.courseId,n.payload.sectionId,n.payload.lessonId,n.payload.initialSlideIdx,n.payload.initialSlideSeekPos,n.payload.autoScrollLessonTs,n.payload.isAutoPlay||!1,n.payload.isLessonLocked||!1)};case O:return{...r,coursesDetails:(0,c.ae)(r,n.payload)};case T:return{...r,cacheRestoreState:a.Zg.RESTORING};case C:return(0,l.IH)(n.forceLegacyDrm),{...r,cacheRestoreState:a.Zg.RESTORED,forceLegacyDrm:n.forceLegacyDrm};case W:case x:case q:return{...r,coursesDetails:(0,c.LK)(r.coursesDetails)};case R:return{...r,promoVideoTimeStamp:new Date().getTime()};case P:return{...r,liveLessonAttendance:(0,c.Tv)(n.response)};case j:return(0,l.IH)(n.params.isEnabled),{...r,forceLegacyDrm:n.params.isEnabled};case Z:if(+n.contentType!=+o.Hz.LESSON)return r;return(0,c.D$)(r,n.contentId,n.likeId);case J:if(+n.contentType!=+o.Hz.LESSON)return r;return(0,c.D$)(r,n.contentId);case"@noteBook/deleteFavouriteSuccess":return{...r,coursesDetails:{...null==r?void 0:r.coursesDetails,[n.data]:{...null==r?void 0:r.coursesDetails[n.data],courseDetails:{...null==r?void 0:null===(e=r.coursesDetails[n.data])||void 0===e?void 0:e.courseDetails,favouriteId:null}}}};case b:return{...r,contentAccessFetchStatus:i.UK.IN_PROGRESS};case k:return{...r,contentAccessFetchStatus:i.UK.FAILED};case M:return{...r,contentAccessFetchStatus:i.UK.SUCCESS};case U:return{...r,liveLessonDetailsFetchStatus:i.UK.IN_PROGRESS};case F:return{...r,liveLessonDetailsFetchStatus:i.UK.SUCCESS,liveLessonDetails:n.response};case w:return{...r,liveLessonDetailsFetchStatus:i.UK.FAILED,liveLessonDetailsFetchError:n.error};case K:return{...r,persistedStreakData:null==n?void 0:n.data};case B:return{...r,updateLeaderBoardStatus:i.UK.IN_PROGRESS};case V:return{...r,updateLeaderBoardStatus:i.UK.SUCCESS,currentStreak:null==n?void 0:null===(s=n.response)||void 0===s?void 0:s.current_streak};case Y:return{...r,updateLeaderBoardStatus:i.UK.FAILED};case H:return{...r,updateTelegramJoinLinkTimer:!0};default:return r}}},doReportCourseAnalytics:e=>t=>{let{dispatch:s}=t;s({type:i.courseAnalyticsActions.COURSE_TIME_CONSUMED,data:{...e}})},doReportAchievementsAnalytics:(e,t)=>async s=>{let{dispatch:r}=s;try{let s=await (0,c.a4)(e,t);r({type:i.achievementsActions.ACHIEVEMENT_TRACKED,data:s})}catch(e){console.error("Error reporting achievement analytics:",e)}},doClearCourseData:e=>t=>{let{dispatch:s}=t;s({type:z,courseIds:[e]})},doFetchCourseDetails:(e,t,r,o,u,S,_,T,C)=>async t=>{let{dispatch:r,httpApi:h,persist:I}=t;function fetchDataFromServer(t){let E="".concat(i.API_URLS.COURSE_DETAILS_AND_ACCESS_API).concat(e),I={is_from_classroom:!0,school_id:l.customerConfig.SCHOOL_ID,device_type:a.OS,is_id:!0};parseInt(l.customerConfig.PAYMENT_TYPE,10)===a.O5.IN_APP_PAYMENT&&(I.is_in_app=!0),o&&(I.bundle_id=o),l.customerConfig.curriculum_enabled&&(I.curriculums=!0),async function(){let m;try{if(S&&l.customerConfig.pricing_model!==d._n.ONE_TIME_PAYMENT){let t={school_id:l.customerConfig.SCHOOL_ID};_&&(t.segment_id=_);try{let s=await h.get("".concat(i.API_URLS.SUBSCRIPTION_ACCESS_API,"/").concat(e),t);m=(0,c.hM)(s.response)}catch(e){console.log("subs access error ",e)}}!m||o||m.isIndividualPurchased||(m.purchasedIds&&m.purchasedIds.length?I.bundle_id=m.purchasedIds[0]:!m.subscriptionId||m.isIndividualPurchased||(I.bundle_id=m.subscriptionId));let s=await h.get(E,I),{response:f}=s,g=await (0,c.gH)(f);if(f){r({type:p,response:f,courseId:e,isBundledCourse:!!o,currentScreen:u,ctData:t||null,subscriptionAccessDetails:m,navigationPrevScreen:C,currentCourseCompletionStats:T}),r({type:$,response:f,InAppPurchaseData:g});let s=(0,c.hF)(f);r({type:n.appConfigApiActions.UPDATE_USER_ACTIVATION_TYPE,data:s})}else{let t={errorCode:a.mR.UNKNOWN_ERROR,errorMessage:l.oc.t("errorHead.error_404")};r({type:D,error:t,courseId:e})}}catch(t){console.log("error",t),s.g.bugsnag.notify(t),r({type:D,error:t,courseId:e})}}()}r({type:E,payload:{courseId:e}});let m={};await I.getValue("ct:data",i.Hj.COURSES_VERSION,0).then(t=>{t&&t[e]&&(m=decryptData(t[e],"".concat(e,"/"),!0))}),fetchDataFromServer(m)},doFetchCourseAccessData:(e,t,r,o)=>async n=>{let{dispatch:c,httpApi:u}=n,d="".concat(i.API_URLS.COURSE_DETAILS_AND_ACCESS_API,"access_data/").concat(e),S={school_id:l.customerConfig.SCHOOL_ID,device_type:a.OS,content_player:o};t&&(S.bundle_id=t),c({type:m,courseId:e}),u.get(d,S).then(t=>{let{response:o}=t;try{var n;let t=(null==r?void 0:r.length)?null===(n=r[0])||void 0===n?void 0:n.id:0;c({type:f,response:o,courseId:e,bundleId:t})}catch(e){console.log("error",e),s.g.bugsnag.notify(e)}}).catch(t=>{let{error:s}=t;c({type:g,error:s,courseId:e})})},doSetCurrentAccessingLesson:(e,t)=>async r=>{let{dispatch:o,httpApi:n,getState:a}=r;if(null==e?void 0:e.sequentialPathEnabled){let{courses:t}=a(),{contentAccessFetchStatus:r}=t;if(r===i.UK.IN_PROGRESS)return;let l="".concat(i.API_URLS.LESSON_ACCESS_API),c={course_id:e.courseId,content_type:e.sequentialPathData.pathType,sectionId:e.sectionId};e.sequentialPathData.pathType===i.f$.SECTION?(c.content_id=e.sectionId,c.prev_section_id=e.sequentialPathData.previousId||null):(c.content_id=e.lessonId,c.prev_lesson_id=e.sequentialPathData.previousId||null),o({type:b}),n.post(l,c).then(t=>{let{response:r}=t;try{o({type:h,payload:{...e,isLessonLocked:!r.unlocks_at}}),o({type:O,payload:{...e,isLessonLocked:!r.unlocks_at}}),o({type:M})}catch(e){o({type:k}),console.log("error",e),s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;o({type:k}),console.log("Error:-",t)})}else o({type:h,payload:e});o({type:I,lessonId:t,currentBookMarkIdTs:e.currentBookMarkIdTs,isAutoPlay:e.isAutoPlay})},doUpdateRecentlyAccessedCourse:e=>t=>{let{dispatch:s}=t;s({type:null===a.notifications||void 0===a.notifications?void 0:a.notifications.UPDATE_RECENTLY_ACCESSED_PRODUCT,payload:e})},doSetLiveLessonAttendance:(e,t)=>r=>{let{dispatch:o,httpApi:n}=r;n.post(i.API_URLS.LIVE_CLASS_ATTENDANCE_URL,{lesson_id:e,user_id:t}).then(e=>{let{response:t}=e;try{o({type:P,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(()=>{})},doUpdatePromoVideoTimeStamp:()=>e=>{let{dispatch:t}=e;return t({type:R})},doGetIdForSeoTitle:e=>t=>{let{dispatch:s,httpApi:r}=t,o="".concat(i.API_URLS.SEO_TITLE_TO_ID_URL),n={school_id:l.customerConfig.SCHOOL_ID,seo_title:e};s({type:y}),r.get(o,n).then(e=>{let{response:t}=e;try{s({type:A,response:t})}catch(e){}}).catch(e=>{let{error:t}=e;s({type:N,error:t})})},doRestoreCourseDataFromCache:()=>e=>{let{dispatch:t,persist:s}=e;console.log("courses bundle, Restoring data from cache"),t({type:T}),s.getValue("courseDate:forceLegacyDrm",i.Hj.COURSES_VERSION,0).then(e=>{t({type:C,forceLegacyDrm:!!e})})},doNotifyOnPlayerError:e=>t=>{let{dispatch:s}=t;s({type:L,data:e})},doNotifyOnPlayerPlayInitiated:e=>t=>{let{dispatch:s}=t;s({type:v,data:e})},doRegisterZoomLiveClass:(e,t,r)=>o=>{let{dispatch:n,httpApi:c}=o,u="".concat(i.API_URLS.REGISTER_ZOOM),d={school_id:l.customerConfig.SCHOOL_ID,device_type:a.OS,lesson_id:e};c.post(u,d).then(e=>{let{response:r}=e;try{t&&t(r)}catch(e){console.log("error",e),s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r&&r(t)})},doUpdateJoinLinkTimer:()=>e=>{let{dispatch:t}=e;t({type:H})},doFetchLiveLessonDetails:e=>t=>{let{dispatch:r,httpApi:o}=t,n={device_type:a.OS,lesson_id:e,currentLiveId:new Date().getTime()},l="".concat(i.API_URLS.LIVE_URL,"?lesson_id=").concat(n.lesson_id,"&currentLiveId=").concat(n.currentLiveId);r({type:U}),o.get(l,n).then(e=>{let{response:t}=e;try{r({type:F,response:t})}catch(e){console.log("error",e),s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:w,error:t})})},doStoreCourseEngagement:(e,t,r,o,n,a,c)=>async u=>{var d,S,E;let{dispatch:D,httpApi:p}=u,T={product_id:o,content_type:i.Dl.LESSON,content_id:r,user_id:n,device_type:i.Mg.WEB,batch_id:e,achievement_id:t,score:a};try{if(!(null==c?void 0:null===(S=c[n])||void 0===S?void 0:null===(d=S[e])||void 0===d?void 0:d.streakGained)){let t="".concat(i.API_URLS.UPDATE_LEADERBOARD),{response:s}=await p.post(t,T);c[n][e].streakGained=!0,D({type:V,data:c,response:s});let r=null==s?void 0:s.current_streak;(0,_.FN)({message:l.oc.t("common:streakGained"),variant:"detailed",toastDetails:{subTitle:r>i.uy?l.oc.t("common:daysStreakMsg",{count:r}):l.oc.t("common:dayStreakMsg",{count:r}),icon:"streak"},hasCustomCloseAction:!0})}}catch(e){(null==e?void 0:null===(E=e.error)||void 0===E?void 0:E.errorMessage)?D({type:Y,error:e.error.errorMessage}):s.g.bugsnag.notify(e.errorMessage)}},selectCourseData:e=>e.courses,selectPromoVideoTimeStamp:e=>e.courses.promoVideoTimeStamp,selectAllCoursesDetails:e=>e.courses.coursesDetails,selectSeoToIdFetchStatus:e=>e.courses.seoToIdFetchStatus,selectSeoToIdFetchError:e=>e.courses.seoToIdFetchError,selectLastAccessedLessons:e=>e.courses.currentAccesingLessons,selectServerTimeOffset:e=>e.courses.serverTimeOffset,selectForceLegacyDrm:e=>e.courses.forceLegacyDrm,selectCurrentTestSeriesAnalyticsSectionId:e=>e.courses.currentTestSeriesAnalyticsSectionId,selectCourseAnalyticsData:e=>e.courses.courseAnalyticsData,selectLiveLessonDetails:e=>e.courses.liveLessonDetails,selectLiveLessonDetailsFetchStatus:e=>e.courses.liveLessonDetailsFetchStatus,selectliveLessonDetailsFetchError:e=>e.courses.liveLessonDetailsFetchError,selectStreakPersistedData:e=>e.courses.persistedStreakData,selectStreakFetchStatus:e=>e.courses.updateLeaderBoardStatus,selectCurrentStreak:e=>e.courses.currentStreak,selectUpdateJoinLinkTimer:e=>e.courses.updateTelegramJoinLinkTimer,selectInitialSlideIndexForPayer:(0,r.P1)("selectLastAccessedLesson",e=>e&&e.initialSlideIdx?e.initialSlideIdx:0),selectInitialSlideSeekPosForPayer:(0,r.P1)("selectLastAccessedLesson",e=>e&&e.initialSlideSeekPos?e.initialSlideSeekPos:0),selectIsAutoPlayEnabledForLesson:(0,r.P1)("selectLastAccessedLesson",e=>!!e&&!!e.isAutoPlay&&e.isAutoPlay),selectTestSeriesStats:(0,r.P1)("selectAllCoursesDetails","selectCurrentCourseId",(e,t)=>{if(0===t||!e[t])return null;let s=0,r=0,o=0,n=e[t].courseDetails;return n&&n.mockTests?(n.mockTests.mockTestIds.forEach(e=>{let t=n.mockTests.mockTestDetails[e];r+=1,s+=t.totalQuestions,o+=t.mockTestDuration}),{totalQuestions:s,totalMocks:r,totalMinutes:o}):null}),selectCurrentCourseDetails:(0,r.P1)("selectAllCoursesDetails","selectCurrentCourseId",(e,t)=>0!==t&&e[t]&&e[t].courseDetails&&e[t].courseDetails.courseType!==i.courseType.BUNDLE&&e[t].courseDetails.courseType!==i.courseType.BATCH?e[t].courseDetails:null),selectStreakAchievementDetails:(0,r.P1)("selectCurrentCourseDetails",e=>{let t=(0,c.nC)(null==e?void 0:e.achievements,i.Rs.STREAKS),s=(0,c.Rf)(t);return{streakAchievementData:t,watchTime:s}}),selectCurrentCourseId:e=>e.courses.currentCourseId,selectCurrentParamsBundleId:e=>e.courses.currentBundleId,selectCurrentParamsAccessibleBundleId:e=>e.courses.currentAccessibleBundleId,selectCurrentSubscriptionAccessDetails:(0,r.P1)("selectCurrentCourseDetails",e=>e&&!e.isDirtyData&&e.subscriptionAccessData?e.subscriptionAccessData:{purchasedIds:[],subscriptionId:0}),selectCurrentProductBundleType:(0,r.P1)("selectCurrentCourseDetails",e=>e&&e.bundleType?e.bundleType:""),selectCurrentBundleId:(0,r.P1)("selectCurrentParamsBundleId","selectCurrentSubscriptionAccessDetails","selectCurrentParamsAccessibleBundleId",(e,t,s)=>e||(l.customerConfig.pricing_model!==d._n.ONE_TIME_PAYMENT&&t&&!t.isIndividualPurchased?t.purchasedIds&&t.purchasedIds.length?t.purchasedIds[0]:t.subscriptionId:s||0)),selectCurrentCourseSeo:e=>e.courses.currentCourseSeo,selectCurrentBundleSeo:e=>e.courses.currentBundleSeo,selectCurrentCourseSeoTitle:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.courseSeoTitle:null),selectCurrentCourseType:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.courseType:null),selectIsBundleScreen:(0,r.P1)("selectCurrentBundleId","selectCurrentCourseId",(e,t)=>0===t&&0!==e),selectIsFetchingCourseData:(0,r.P1)("selectSeoToIdFetchStatus","selectCurrentCourseFetchStatus","selectCurrentBundleFetchStatus",(e,t,s)=>e===i.UK.IN_PROGRESS||s===i.UK.IN_PROGRESS||t===i.UK.IN_PROGRESS),selectCurrentProductDetails:(0,r.P1)("selectCurrentProductType","selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t,s)=>e===i.courseType.BUNDLE||e===i.courseType.BATCH||e===i.courseType.SUBSCRIPTION_TIER_BUNDLE||e===i.courseType.SUBSCRIPTION_BUNDLE?s:t),selectCurrentProductType:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>t&&!e?t.courseType:t&&e||e?e.courseType:void 0),selectIsCurrentProductFromBundlde:e=>e.courses.isCurrentCourseFromBundle,selectCurrentBundleSeoTitle:(0,r.P1)("selectCurrentBundleDetails",e=>e?e.courseSeoTitle:null),selectCurrentBundleDetails:(0,r.P1)("selectAllCoursesDetails","selectCurrentBundleId",(e,t)=>0!==t&&e[t]&&e[t].courseDetails&&(e[t].courseDetails.courseType==i.courseType.BUNDLE||e[t].courseDetails.courseType==i.courseType.BATCH||e[t].courseDetails.courseType==i.courseType.SUBSCRIPTION_BUNDLE||e[t].courseDetails.courseType==i.courseType.SUBSCRIPTION_TIER_BUNDLE)?e[t].courseDetails:null),selectCurrentCourseFetchStatus:(0,r.P1)("selectAllCoursesDetails","selectCurrentCourseId",(e,t)=>0!==t&&e[t]?e[t].fetchStatus:i.UK.IDLE),selectCurrentCourseAccessDataFetchStatus:(0,r.P1)("selectAllCoursesDetails","selectCurrentCourseId",(e,t)=>0!==t&&e[t]?e[t].courseAccessFetchStatus:i.UK.IDLE),selectCurrentBundleFetchStatus:(0,r.P1)("selectAllCoursesDetails","selectCurrentBundleId",(e,t)=>0!==t&&e[t]?e[t].fetchStatus:i.UK.IDLE),selectCurrentBundleError:(0,r.P1)("selectAllCoursesDetails","selectCurrentBundleId",(e,t)=>0!==t&&e[t]?e[t].error:null),selectCurrentCourseError:(0,r.P1)("selectAllCoursesDetails","selectCurrentCourseId",(e,t)=>0!==t&&e[t]?e[t].error:null),selectHasNoLessons:(0,r.P1)("selectCurrentCourseDetails",e=>{if(!e)return!1;let t=e&&[i.courseType.COURSE,i.courseType.EBOOK,i.courseType.PODCAST,i.courseType.WEBINAR,i.courseType.DIGITAL_PRODUCT,i.courseType.TEST_SERIES,i.courseType.FREE_RESOURCE,i.courseType.TRACK].includes(e.courseType);return!!t&&!!e&&!!e.lessons&&0===e.lessons.lessonIds.length}),selectIsCourseAvailableForTrial:(0,r.P1)("selectCurrentBundleDetails","selectCurrentCourseDetails","selectUserEnrollmentState",(e,t,s)=>s!==i.ri.ENROLLED&&(!!e&&(e.numberOfFreeCourses>0||e.numberOfFreeLessons>0)||!!t&&t.numberOfFreeLessons>0)),selectUserEnrollmentState:(0,r.P1)("selectCurrentBundleDetails","selectCurrentCourseDetails","selectCurrentProductType","selectIsCurrentProductFromBundlde","selectCurrentSubscriptionAccessDetails","selectSharedIsUserLoggedIn",(e,t,s,r,o,n)=>t||e?e?e.enrollmentState===i.ri.PURCHASED||e.enrollmentState===i.ri.FREE_PURCHASE?i.ri.PURCHASED:e.enrollmentState===i.ri.ENROLLED?i.ri.ENROLLED:i.ri.NOT_ENROLLED:t&&(t.enrollmentState===i.ri.PURCHASED||t.enrollmentState===i.ri.FREE_PURCHASE)?i.ri.PURCHASED:t&&t.enrollmentState===i.ri.ENROLLED?i.ri.ENROLLED:l.customerConfig.pricing_model!==d._n.ONE_TIME_PAYMENT&&o&&o.purchasedIds&&o.purchasedIds.length?i.ri.PURCHASED:i.ri.NOT_ENROLLED:i.ri.INVALID),selectShowEnrollButton:(0,r.P1)("selectNavigationCurrentScreen","selectIsCourseFree","selectIsBundleFree","selectCurrentLessonDetails","selectUserEnrollmentState","selectCurrentProductType","selectIsCurrentProductFromBundlde",(e,t,s,r,o,n,l)=>(n===i.courseType.BUNDLE||!!l)&&!!s||!l&&!!t&&o!==i.ri.ENROLLED||!!r&&!!r.isTrialLesson&&e===a.i_.LESSON_PLAYER),selectIsCourseFree:(0,r.P1)("selectCurrentCourseDetails","selectPricing","selectCurrentCourseId",(e,t,s)=>{if(!e||e.courseType===i.courseType.TRACK)return!1;if(t&&t[s]){var r;return(null===(r=t[s])||void 0===r?void 0:r.selctedVariablePrice)?t[s].selctedVariablePrice.pricingType===i.DD.FREE:0===t[s].actualPrice}return!1}),selectCurrentCourseTitle:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.courseTitle:null),selectCurrentCourseDownloadSignedUrl:(0,r.P1)("selectCurrentCourseDetails","selectUserEnrollmentState","selectIsCourseFree",(e,t,s)=>e?t===i.ri.PURCHASED||s?e.paidDownloadSignedUrl:e.trialDownloadSignedUrl:null),selectCurrentCourseContentSignedUrl:(0,r.P1)("selectCurrentCourseDetails","selectUserEnrollmentState","selectIsCourseFree",(e,t,s)=>e?t===i.ri.PURCHASED||s?e.paidContentSignedUrl:e.trialContentSignedUrl:null),selectCurrentBundleTitle:(0,r.P1)("selectCurrentBundleDetails",e=>e?e.courseTitle:null),selectCurrentLessonTitle:(0,r.P1)("selectCurrentLessonDetails",e=>e?e.lessonTitle:null),selectCurrentLessonType:(0,r.P1)("selectCurrentLessonDetails",e=>e?e.lessonType:null),selectCurrentSectionTitle:(0,r.P1)("selectCurrentCourseSections","selectCurrentCourseSectionId",(e,t)=>t&&e&&e.sectionDetails&&e.sectionDetails[t]?e.sectionDetails[t].sectionTitle:null),selectCurrentLessonPosition:(0,r.P1)("selectCurrentLessonId","selectCurrentCourseSections",(e,t)=>{if(!e||!t)return null;if(t&&t.sectionIds.length>0){let{sectionIds:s,sectionDetails:r}=t,o=r[s[0]],n=r[s[s.length-1]],i=o.lessonIds[0],a=n.lessonIds[n.lessonIds.length-1];return e===i&&e===a?S.PD.SINGLE_LESSON:e===i?S.PD.FIRST_LESSON:e===a?S.PD.LAST_LESSON:S.PD.INTERMEDIATE_LESSON}return null}),selectIsBundleFree:(0,r.P1)("selectPricing","selectCurrentBundleDetails","selectCurrentBundleId",(e,t,s)=>!!t&&!!e&&!!e[s]&&0===e[s].actualPrice),selectHasAccessToPlay:(0,r.P1)("selectUserEnrollmentState","selectIsCourseFree","selectCurrentLessonDetails","selectIsCourseExpired",(e,t,s,r)=>!r&&(e===i.ri.PURCHASED||e===i.ri.FREE_PURCHASE||e===i.ri.ENROLLED&&(!!s&&!!s.isTrialLesson||!!t))),selectLastAccessedLesson:(0,r.P1)("selectCurrentCourseId","selectLastAccessedLessons",(e,t)=>t&&t[e]?t[e]:null),selectCurrentAccesingLessons:e=>e.courses.currentAccesingLessons,selectAllBundleCourseIds:(0,r.P1)("selectCurrentBundleDetails","selectUnEnrolledCourses",(e,t)=>{if(e)return e.bundleCourses?e.bundleCourses.allBundleCoursesIds:[];if(l.customerConfig.pricing_model!==d._n.ONE_TIME_PAYMENT){if(!t)return[];let{courseIds:e=[],mockTestIds:s=[],testSeriesIds:r=[]}=t;return[...e,...s,...r]}return[]}),selectFreeLessonIds:(0,r.P1)("selectCurrentCourseDetails",e=>{let t=[];if(!e||!e.lessons)return t;let s=e.lessons,r=s.lessonDetails||{},o=s.lessonIds||[];o.length&&o.forEach(e=>{r[e].isTrialLesson&&t.push(e)})}),selectPlayerDataOfCurrentLesson:(0,r.P1)("selectCurrentLessonDetails","selectCurrentCourseDetails","selectUserEnrollmentState","selectCurrentBundleId","selectIsCourseFree",(e,t,s,r,o)=>{if(!e||!t)return null;let n=(0,c.qJ)(e,t,s,r,o);return n}),selectCurrentLessonId:(0,r.P1)("selectCurrentCourseDetails","selectCurrentCourseId","selectLastAccessedLessons","selectNavigationData","selectResumeMediaLastLessonForCourse",(e,t,s,r,o)=>{if(!e)return 0;let n=e&&[i.courseType.COURSE,i.courseType.EBOOK,i.courseType.PODCAST,i.courseType.WEBINAR,i.courseType.DIGITAL_PRODUCT,i.courseType.TEST_SERIES,i.courseType.FREE_RESOURCE,i.courseType.TRACK].includes(e.courseType);if(!n)return 0;if(s[t]&&s[t].lessonId)return s[t].lessonId;if(o)return o;if(null==r?void 0:r.lessonId)return parseInt(null==r?void 0:r.lessonId,10);if(e&&e.sections){let t=e.sections,[s]=t.sectionIds;return t.sectionDetails[s]?t.sectionDetails[s].lessonIds[0]:0}return 0}),selectCurrentTestSeriesLessonId:(0,r.P1)("selectCurrentCourseDetails","selectCurrentCourseId","selectLastAccessedLessons",(e,t,s)=>{if(!e||e&&e.courseType!==i.courseType.TEST_SERIES)return 0;if(s[t]&&s[t].lessonId)return s[t].lessonId;if(e&&e.sections){let t=e.sections,[s]=t.sectionIds;return t.sectionDetails[s]?t.sectionDetails[s].lessonIds[0]:0}return 0}),selectCurrentCourseSectionId:(0,r.P1)("selectCurrentCourseDetails","selectCurrentCourseId","selectLastAccessedLessons","selectNavigationData",(e,t,s,r)=>s[t]?s[t].sectionId:(null==r?void 0:r.sectionId)?parseInt(null==r?void 0:r.sectionId,10):e&&e.sections&&e.sections.sectionIds?e.sections.sectionIds[0]:0),selectAutoScrollLessonTs:(0,r.P1)("selectCurrentCourseId","selectLastAccessedLessons",(e,t)=>t[e]&&t[e].autoScrollLessonTs?t[e].autoScrollLessonTs:0),selectIsCourseExpired:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>(!!t||!!e)&&(t?(0,c.xj)(t.studentCourseExpiryDate):(0,c.xj)(e.studentCourseExpiryDate,e.testEndTime))),selectCurrentCourseHasAccessToPlayOnCurrentDevice:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>(!!t||!!e)&&(t?(0,c.sy)(t.serverDeviceType):(0,c.sy)(e.serverDeviceType))),selectCourseUploadToken:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.signedUrlAuthToken:""),selectBundleUploadToken:(0,r.P1)("selectCurrentBundleDetails",e=>e?e.signedUrlAuthToken:""),selectIsCoursePrivate:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>(!!t||!!e)&&(t?t.courseAvailabilityMode===i.m$.PRIVATELY_AVAILABLE:e.courseAvailabilityMode===i.m$.PRIVATELY_AVAILABLE)),selectIsSellIndividualEnabled:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>(!!t||!!e)&&(t?t.isSellIndividualEnabled:e.isSellIndividualEnabled)),selectCurrentLessonDescriptions:(0,r.P1)("selectCurrentLessonId","selectCurrentCourseDetails",(e,t)=>t&&e&&t.lessons&&t.lessons.lessonDetails[e]?{shortDescription:t.lessons.lessonDetails[e].lessonShortDescription,longDescription:t.lessons.lessonDetails[e].lessonLongDescription}:null),selectCurrentLessonDetails:(0,r.P1)("selectNavigationCurrentScreen","selectCurrentLessonId","selectCurrentCourseDetails",(e,t,s)=>{if(!s)return null;let r=s&&[i.courseType.COURSE,i.courseType.EBOOK,i.courseType.PODCAST,i.courseType.WEBINAR,i.courseType.DIGITAL_PRODUCT,i.courseType.TEST_SERIES,i.courseType.FREE_RESOURCE,i.courseType.TRACK].includes(s.courseType);return r&&s.lessons&&s.lessons.lessonDetails[t]?s.lessons.lessonDetails[t]:null}),selectCurrentTestSeriesLessonDetails:(0,r.P1)("selectNavigationCurrentScreen","selectCurrentTestSeriesLessonId","selectCurrentCourseDetails",(e,t,s)=>!s||s&&s.courseType!==i.courseType.TEST_SERIES?null:s.lessons&&s.lessons.lessonDetails[t]?s.lessons.lessonDetails[t]:null),selectCurrentLessonSlides:(0,r.P1)("selectCurrentLessonDetails",e=>e?e.slides:null),selectCurrentCourseSections:(0,r.P1)("selectCurrentCourseDetails",e=>e&&e.sections?e.sections:{sectionDetails:{},sectionIds:[]}),selectCurrentCourseLessons:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.lessons:null),selectCurrentCourseMockTests:(0,r.P1)("selectCurrentCourseDetails",e=>e?e.mockTests:null),selectCanDownloadCourse:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>(!!t||!!e)&&(t&&t.courseAccessType?!!t.courseAccessType.inAppDownload:!!e&&!!e.courseAccessType&&!!e.courseAccessType.inAppDownload)),selectCurrentCoursePlayTimeRestrictionDetails:(0,r.P1)("selectCurrentCourseDetails",e=>e&&e&&e.coursePlayTimeRestrictionDetails?e.coursePlayTimeRestrictionDetails:null),selectShouldCurrentLessonShowPlayTime:(0,r.P1)("selectCurrentCoursePlayTimeRestrictionDetails","selectCurrentLessonDetails","selectUserEnrollmentState",(e,t,s)=>{if(!e||!t)return null;let{isPlayTimeRestrictionEnabled:r}=e,{isTrialLesson:o}=t,n=!1;return!o&&s===i.ri.PURCHASED&&r&&(n=!0),n}),selectCurrentCourseTotalAllocatedTime:(0,r.P1)("selectCurrentCoursePlayTimeRestrictionDetails","selectSharedIsUserLoggedIn",(e,t)=>{if(!e||!(null==e?void 0:e.isPlayTimeRestrictionEnabled))return 0;let s=null==e?void 0:e.totalAllocatedPlayTime,r=t&&s?s:null==e?void 0:e.courseAllocatedPlayTime;return r}),selectCanOnlineStreamCourse:(0,r.P1)("selectCurrentCourseDetails","selectCurrentBundleDetails",(e,t)=>{var s;return(!!t||!!e)&&(t?!!t.courseAccessType.online:!!(null==e?void 0:null===(s=e.courseAccessType)||void 0===s?void 0:s.online))}),selectIsCourseNotInSubscription:(0,r.P1)("selectCurrentSubscriptionAccessDetails",e=>e&&!!e.isCourseNotInSubscription),selectIsLearnerAchievementsEnabled:(0,r.P1)("selectCurrentBundleDetails",e=>null==e?void 0:e.isLearnerAchievementsEnabled),reactShouldFetchCourseAccessData:(0,r.P1)("selectNavigationCurrentScreen","selectCurrentCourseFetchStatus","selectCurrentCourseAccessDataFetchStatus","selectCurrentCourseDetails","selectCurrentCourseId","selectCurrentBundleId","selectSharedIsUserLoggedIn","selectCurrentBundleSeoTitle","selectViewerLocation",(e,t,s,r,o,n,l,c,u)=>u&&0!==o&&X.includes(e)&&s===i.UK.IDLE&&l?t!==i.UK.SUCCESS||!r||r.enrollmentState!==i.ri.UNKNOWN&&r.enrollmentState!==i.ri.NOT_ENROLLED||n&&c?null:{actionCreator:"doFetchCourseAccessData",args:[o,n,null==r?void 0:r.bundles,e===a.i_.CONTENT_PREVIEW]}:null),reactShouldFetchSeoToIdMapper:(0,r.P1)("selectCurrentCourseId","selectCurrentBundleId","selectCurrentBundleSeo","selectCurrentCourseSeo","selectSeoToIdFetchStatus","selectViewerLocation","selectCurrentBatchSeo",(e,t,s,r,o,n,a)=>n&&(s||r||a)&&o===i.UK.IDLE?s&&r&&!(e||t)?{actionCreator:"doGetIdForSeoTitle",args:[[s,r]]}:s&&!t?{actionCreator:"doGetIdForSeoTitle",args:[[s]]}:r&&!e?{actionCreator:"doGetIdForSeoTitle",args:[[r]]}:a&&!t?{actionCreator:"doGetIdForSeoTitle",args:[[a]]}:null:null),reactShouldFetchCourseDetailsData:(0,r.P1)("selectNavigationCurrentScreen","selectCurrentCourseFetchStatus","selectCurrentCourseDetails","selectCurrentCourseId","selectCurrentBundleId","selectAppTime","selectCanInternetFetchApiData","selectSharedIsUserLoggedIn","selectUserSegmentId","selectCurrentCourseCompletionStats","selectCurrentSubscriptionAccessDetails","selectViewerLocation",(e,t,s,r,o,n,l,c,u,d,S)=>{if(!S)return;if(!d&&e===a.i_.COURSE_ANALYTICS||!r||0===r||!X.includes(e))return null;let _=!1;if(t===i.UK.IDLE&&(_=!0),t===i.UK.SUCCESS&&s){if(s.lastFetchTime){let e=n-s.lastFetchTime;e>a.xU&&l&&(_=!0)}s.isDirtyData&&(_=!0)}return(t===i.UK.FAILED&&(null==s?void 0:s.isDirtyData)&&(_=!0),_)?{actionCreator:"doFetchCourseDetails",args:[r,n,l,o,e,c,u,d]}:null}),reactShouldFetchBundleDetailsData:(0,r.P1)("selectNavigationCurrentScreen","selectCurrentBundleFetchStatus","selectCurrentBundleDetails","selectCurrentBundleId","selectAppTime","selectCanInternetFetchApiData","selectCurrentProductBundleType","selectCurrentCourseCompletionStats","selectNavigationPrevScreen",(e,t,s,r,o,n,c,u,S)=>{if(l.customerConfig.pricing_model!==d._n.ONE_TIME_PAYMENT&&c&&c===i.H$.SUBSCRIPTION_BUNDLE||0===r||!X.includes(e))return null;let _=!1;if(t===i.UK.IDLE&&(_=!0),t===i.UK.SUCCESS&&s&&s.lastFetchTime){let e=o-s.lastFetchTime;e>a.xU&&n&&(_=!0)}return(t===i.UK.SUCCESS&&s&&s.isDirtyData&&(_=!0),_)?{actionCreator:"doFetchCourseDetails",args:[r,o,n,0,e,null,null,u,S]}:null}),reactorShouldRestorecourseDataFromCache:(0,r.P1)("selectCourseData","selectAppTime",(e,t)=>e.cacheRestoreState===a.Zg.NOT_RESTORED?{actionCreator:"doRestoreCourseDataFromCache"}:null),reactShouldCallStreakApi:(0,r.P1)("selectCurrentCourseDetails","selectCurrentLessonId","selectStreakPersistedData","selectCurrentBundleId","selectSharedUserId","selectStreakAchievementDetails","selectStreakFetchStatus",(e,t,s,r,o,n,a)=>{var l,c,u,d;let S=!1,_=n.streakAchievementData,E=n.watchTime,D=(null==_?void 0:_.achievement_id)||null,p=o||null,T=(null==s?void 0:null===(c=s[p])||void 0===c?void 0:null===(l=c[r])||void 0===l?void 0:l[t])||{},C=null==e?void 0:e.courseId;if(!r||!t||!C||!D||!(T&&T.timeWatched>=E)||(null==s?void 0:null===(d=s[p])||void 0===d?void 0:null===(u=d[r])||void 0===u?void 0:u.streakGained))return null;if(a===i.UK.IDLE&&(S=!0),S){let e=(null==_?void 0:_.xp_score)||0;return{actionCreator:"doStoreCourseEngagement",args:[r,D,t,C,p,e,s]}}return null}),persistActions:[G,a.notifications.CLEAR_CACHE,a.notifications.USER_SIGNEDOUT,a.notifications.USER_SIGNEDIN,a.notifications.DATA_EXPIRED,a.notifications.FORCE_LEGACY_DRM_CHANGED,K,V],persistVersion:i.Hj.COURSES_VERSION,persistFunc:(e,t,s)=>{let r=[];if(s.type===a.notifications.USER_SIGNEDOUT||s.type===a.notifications.USER_SIGNEDIN||(s.type,a.notifications.CLEAR_CACHE),s.type===a.notifications.FORCE_LEGACY_DRM_CHANGED&&r.push({key:"courseDate:forceLegacyDrm",value:!!s.params.isEnabled}),s.type===G&&s.data.hasCourseTimeRestriction){let e=Object.keys(t.courseDetails),s={};for(let r=0;r<e.length;r+=1){var o,n,l,c,u,d;let i=t.courseDetails[e[r]],a=null===(n=i.courseDetails)||void 0===n?void 0:null===(o=n.coursePlayTimeRestrictionDetails)||void 0===o?void 0:o.isPlayTimeRestrictionEnabled;if(a){let t=e[r],o=null===(c=i.courseDetails)||void 0===c?void 0:null===(l=c.coursePlayTimeRestrictionDetails)||void 0===l?void 0:l.remainingAllocatedTime,n=null===(d=i.courseDetails)||void 0===d?void 0:null===(u=d.coursePlayTimeRestrictionDetails)||void 0===u?void 0:u.totalAllocatedPlayTime;s[t]={...s[t],remainingAllocatedTime:o,totalAllocatedPlayTime:n},s[t]=encryptData(s[t],"".concat(t,"/"),!0)}}r.push({key:"ct:data",value:s})}return s.type===K&&r.push({key:i.oc,value:null==t?void 0:t.persistedStreakData}),s.type===V&&r.push({key:i.oc,value:null==s?void 0:s.data}),r}})},48098:function(e,t,s){"use strict";s.d(t,{$0:function(){return Section},MH:function(){return ProductSummary},Mi:function(){return Slide},My:function(){return Slides},NY:function(){return Lesson},Pc:function(){return BundleCourses},T0:function(){return Course},T_:function(){return CourseDetails},_P:function(){return MockTest},bx:function(){return Sections},dG:function(){return DripData},de:function(){return CurriculumLesson},fz:function(){return MockTests},g:function(){return CodeChallenges},g4:function(){return LiveLessonAttendance},i$:function(){return TopicAnalytics},pF:function(){return CoursesData},rw:function(){return PlayTimeRestrictions},uh:function(){return Lessons},wB:function(){return LiveLessonDetails}});var r=s(78445);function CoursesData(){this.currentCourseId=0,this.currentBundleId=0,this.currentCourseSeo=null,this.currentBundleSeo=null,this.seoToIdFetchStatus=r.UK.IDLE,this.seoToIdFetchError={errorCode:0,errorMessage:null},this.currentProductType=0,this.isCurrentCourseFromBundle=!1,this.coursesDetails={},this.currentAccesingLessons={},this.serverTimeOffset=0,this.courseAnalyticsData={},this.currentTestSeriesAnalyticsSectionId=0,this.liveLessonAttendance={},this.currentAccessibleBundleId=0,this.forceLegacyDrm=!1,this.cacheRestoreState=r.Zg.NOT_RESTORED,this.currentCourseAccessBundleId=0,this.liveLessonDetailsFetchStatus=r.UK.IDLE,this.liveLessonDetails={},this.liveLessonDetailsFetchError={errorCode:0,errorMessage:null},this.contentAccessFetchStatus=r.UK.IDLE,this.currentStreak=0,this.updateLeaderBoardStatus=r.UK.IDLE,this.updateTelegramJoinLinkTimer=!1}function Course(){this.fetchStatus=r.UK.IDLE,this.courseAccessFetchStatus=r.UK.IDLE,this.error={errorCode:0,errorMessage:null},this.courseDetails=null}function ProductSummary(e){this.courseId=e.courseId,this.courseType=e.courseType,this.coursePaymentMode=e.coursePaymentMode,this.courseAvailabilityMode=e.courseAvailabilityMode,this.courseAccessType=e.courseAccessType,this.courseStatus=e.courseStatus,this.courseSeoTitle=e.courseSeoTitle,this.courseTitle=e.courseTitle,this.courseTag=e.courseTag,this.rating=e.rating,this.courseShortDescription=e.courseShortDescription,this.numberOfFreeLessons=e.numberOfFreeLessons,this.courseImageUrl=e.courseImageUrl,this.lessonCount=e.lessonCount||0,this.testCount=e.testCount||0,this.coursesCount=e.coursesCount||0,this.courseStartTime=e.courseStartTime,this.courseEndTime=e.courseEndTime,this.trialLessonCount=e.trialLessonCount,this.totalLessonCount=e.totalLessonCount}function Lessons(e,t,s){this.lessonDetails=e,this.lessonIds=t,this.totalHiddenLessonsIds=s}function Slides(e,t){this.slideDetails=e,this.slideIds=t}function Sections(e,t){this.sectionDetails=e,this.sectionIds=t}function MockTests(e,t){this.mockTestDetails=e,this.mockTestIds=t}function CodeChallenges(e,t){this.codeChallengeDetails=e,this.codeChallengeIds=t}function CurriculumLesson(e,t){this.title=e,this.previewUrl=t}function CourseDetails(e){this.favouriteId=e.favouriteId,this.courseEvents=e.courseEvents,this.isFree=e.isFree||!1,this.bundleType=e.bundleType,this.subscriptionAccessData=e.subscriptionAccessData,this.masterSchoolId=e.masterSchoolId,this.resourceSchoolId=e.resourceSchoolId,this.resourceCourseId=e.resourceCourseId,this.courseId=e.courseId,this.courseType=e.courseType,this.coursePaymentMode=e.coursePaymentMode,this.courseAvailabilityMode=e.courseAvailabilityMode,this.courseAccessType=e.courseAccessType,this.enrollmentState=e.enrollmentState,this.courseStatus=e.courseStatus,this.isSellIndividualEnabled=e.isSellIndividualEnabled,this.courseTitle=e.courseTitle,this.courseSeoTitle=e.courseSeoTitle,this.seoPageTitle=e.seoPageTitle,this.seoDescription=e.seoDescription,this.testStartTime=e.testStartTime,this.testEndTime=e.testEndTime,this.courseImageUrl=e.courseImageUrl,this.coursePromoUrl=e.coursePromoUrl,this.lastFetchTime=e.lastFetchTime,this.isDirtyData=e.isDirtyData,this.courseDescription=e.courseDescription,this.courseShortDescription=e.courseShortDescription,this.numberOfFreeLessons=e.numberOfFreeLessons,this.numberOfFreeCourses=e.numberOfFreeCourses,this.trialContentSignedUrl=e.trialContentSignedUrl,this.paidContentSignedUrl=e.paidContentSignedUrl,this.trialDownloadSignedUrl=e.trialDownloadSignedUrl,this.paidDownloadSignedUrl=e.paidDownloadSignedUrl,this.liveContentSignedUrl=e.liveContentSignedUrl,this.isCourseEncrypted=e.isCourseEncrypted,this.studentCourseExpiryDate=e.studentCourseExpiryDate,this.courseStartTime=e.courseStartTime,this.courseEndTime=e.courseEndTime,this.currentServerTime=e.currentServerTime,this.courseRating=e.courseRating,this.signedUrlAuthToken=e.signedUrlAuthToken,this.isCertificateEnabled=e.isCertificateEnabled,this.isDiscussionEnabled=e.isDiscussionEnabled,this.isNotesEnabled=e.isNotesEnabled,this.isReviewsEnabled=e.isReviewsEnabled,this.isGamificationLeaderboardEnabled=e.isGamificationLeaderboardEnabled,this.isFaqEnabled=e.isFaqEnabled,this.isShowAuthorsEnabled=e.isShowAuthorsEnabled,this.hasAttachments=e.hasAttachments,this.leaderBoardStatus=e.leaderBoardStatus,this.bundleCourses=e.bundleCourses,this.sections=e.sections,this.lessons=e.lessons,this.mockTests=e.mockTests,this.serverDeviceType=e.serverDeviceType,this.coursePlayTimeRestrictionDetails=e.coursePlayTimeRestrictionDetails,this.totalLessons=e.totalLessons,this.totalQuizzes=e.totalQuizzes,this.codeChallenges=e.codeChallenges,this.inAppProductId=e.inAppProductId||"",this.bundles=e.bundles,this.isLessonLikesEnabled=e.isLessonLikesEnabled,this.curriculumData=e.curriculumData,this.nextInstalmentPaymentDate=e.nextInstalmentPaymentDate,this.selectedPricingPlanId=e.selectedPricingPlanId,this.selectedPricingPlan=e.selectedPricingPlan,this.currentCourseAccessBundleId=e.currentCourseAccessBundleId,this.renewPricingPlan=e.renewPricingPlan,this.allowRenewPlan=e.allowRenewPlan,this.joinLink=e.joinLink,this.isSequentialPathEnabled=e.isSequentialPathEnabled||!1,this.learningPathType=e.learningPathType,this.supportedBrowsersBinIntValue=e.supportedBrowsersBinIntValue,this.achievements=null==e?void 0:e.achievements,this.downloadSupportedDevicesBinIntValue=null==e?void 0:e.downloadSupportedDevicesBinIntValue,this.isBatchMemberEnabled=e.isBatchMemberEnabled||!1,this.isLearnerAchievementsEnabled=e.isLearnerAchievementsEnabled,this.userCourseId=null==e?void 0:e.userCourseId,this.userEsignStatus=null==e?void 0:e.userEsignStatus,this.esignStatus=null==e?void 0:e.esignStatus}function Section(e){this.id=e.id,this.resourceSectionId=e.resourceSectionId,this.lessonIds=e.lessonIds,this.attachmentCount=e.attachmentCount,this.sectionTitle=e.sectionTitle,this.freeLessonCount=e.freeLessonCount,this.totalTestCount=e.totalTestCount,this.hasDownloadableSlides=e.hasDownloadableSlides,this.testSeriesAnalytics=e.testSeriesAnalytics}function BundleCourses(e){this.courses=e.courses||{},this.testSeries=e.testSeries||{},this.test=e.test||{},this.ebooks=e.ebooks||{},this.podcasts=e.podcasts||{},this.webinars=e.webinars||{},this.digitalProducts=e.digitalProducts||{},this.telegrams=e.telegrams||{},this.tracks=e.tracks||{},this.allBundleCoursesIds=e.allBundleCoursesIds||[]}function Lesson(e){this.id=e.id,this.resourceLessonId=e.resourceLessonId,this.lessonTitle=e.lessonTitle,this.lessonType=e.lessonType,this.lessonShortDescription=e.lessonShortDescription,this.lessonLongDescription=e.lessonLongDescription,this.lessonTag=e.lessonTag,this.lessonDuration=e.lessonDuration,this.isTrialLesson=e.isTrialLesson,this.sectionId=e.sectionId,this.mockTestId=e.mockTestId,this.codeId=e.codeId,this.attachmentUrls=e.attachmentUrls,this.dripData=e.dripData,this.unlocksAt=e.unlocksAt,this.hasDownloadableSlides=e.hasDownloadableSlides,this.lessonVersion=e.lessonVersion,this.slides=e.slides,this.liveLessonDetails=e.liveLessonDetails,this.likeId=e.likeId,this.isLiked=e.isLiked,this.likeCount=e.likeCount,this.lessonThumbnailSrc=e.lessonThumbnailSrc,this.isHidden=e.isHidden,this.lessonChapters=e.lessonChapters,this.isLessonLocked=e.isLessonLocked}function LiveLessonDetails(e){this.provider=e.provider,this.startTime=e.startTime,this.endTime=e.endTime,this.embededText=e.embededText,this.isCancelld=e.isCancelld,this.cancelReason=e.cancelReason,this.isLink=e.isLink}function LiveLessonAttendance(e){this.id=e.id,this.lessonId=e.lessonId,this.liveLessonId=e.liveLessonId,this.userId=e.userId,this.liveAttendanceCount=e.liveAttendanceCount,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt}function DripData(e){this.lessonReleaseDateInMiliSeconds=e.lessonReleaseDateInMiliSeconds,this.releaseDate=e.releaseDate,this.isReleased=e.isReleased}function Slide(e){this.fileName=e.fileName,this.fileType=e.fileType,this.slideState=e.slideState,this.fileId=e.fileId,this.startFile=e.startFile,this.numOfFormats=e.numOfFormats,this.hasFullyTranscoded=e.hasFullyTranscoded||!0,this.contentId=e.contentId,this.contentPath=e.contentPath,this.contentPathExtn=e.contentPathExtn}function TopicAnalytics(e){this.totalTestCount=e.totalTestCount,this.totalTestCompleted=e.totalTestCompleted,this.totalTestEvaluated=e.totalTestEvaluated,this.avgPercent=e.avgPercent,this.accuracy=e.accuracy,this.speed=e.speed,this.userAvgPercent=e.userAvgPercent,this.userAvgSpeed=e.userAvgSpeed,this.userAvgAccuracy=e.userAvgAccuracy,this.totalTimeSpent=e.totalTimeSpent,this.relativeSpeed=e.relativeSpeed,this.userLatestAvgPercent=e.userLatestAvgPercent,this.userLatestAvgAccuracy=e.userLatestAvgAccuracy}function MockTest(e){if(this.mockTestId=e.mockTestId,this.resourceQuizId=e.resourceQuizId,this.mockTestTitle=e.mockTestTitle,this.mockTestDuration=e.mockTestDuration,this.scheduleStartDate=e.scheduleStartDate,this.scheduleEndDate=e.scheduleEndDate,this.resultScheduleTime=e.resultScheduleTime,this.totalMarks=e.totalMarks,this.maxRetakesAllowed=e.maxRetakesAllowed,this.firstAttemptPercent=e.firstAttemptPercent,this.firstAttemptSpeed=e.firstAttemptSpeed,this.currentRetakeCount=e.currentRetakeCount,this.firstAttemptScore=e.firstAttemptScore,this.latestAttemptScore=e.latestAttemptScore,this.totalQuestions=e.totalQuestions,this.firstSubmittedStatus=e.firstSubmittedStatus,this.latestSubmittedStatus=e.latestSubmittedStatus,this.difficultyLevel=e.difficultyLevel,this.mockTestStatus=e.mockTestStatus,this.firstAttemptIsUnderEvaluation=e.firstAttemptIsUnderEvaluation,this.secondAttemptIsUnderEvaluation=e.secondAttemptIsUnderEvaluation,this.firstAttemptAvgSpeed=e.firstAttemptAvgSpeed,this.firstAttemptRelativeSpeed=e.firstAttemptRelativeSpeed,this.firstAttemptAccuracy=e.firstAttemptAccuracy,this.mockTestType=e.mockTestType,this.unlocksAt=e.unlocksAt,this.totalTimeSpent=e.totalTimeTaken,this.latestAttemptAccuracy=e.latestAttemptAccuracy,this.latestAttemptSpeed=e.latestAttemptSpeed,this.latestAttemptPercent=e.latestAttemptPercent,this.latestAttemptRelativeSpeed=e.latestAttemptRelativeSpeed,this.firstAttemptIsUnderRevaluation=e.firstAttemptIsUnderRevaluation,this.secondAttemptIsUnderRevaluation=e.secondAttemptIsUnderRevaluation,this.quizConfig=null,e.quizConfig)try{this.quizConfig=JSON.parse(e.quizConfig)}catch(t){console.log("Parsing the JSON Failed ".concat(e.quizConfig))}}function PlayTimeRestrictions(e){this.remainingAllocatedTime=e.remainingAllocatedTime,this.totalAllocatedPlayTime=e.totalAllocatedPlayTime,this.consumedPlayTime=e.consumedPlayTime,this.isPlayTimeRestrictionEnabled=e.isPlayTimeRestrictionEnabled,this.playTimeState=e.playTimeState,this.courseAllocatedPlayTime=e.courseAllocatedPlayTime}},70862:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_discussionBundle}});var r=s(97405),o=s(42040),n=s(78445),i=s(73704),a=s(30454),l=s.n(a),c=s(53794);function AllDiscussiondata(){this.fetchStatus=n.UK.IDLE,this.loadingType=n.aw.NO_LOAD,this.discussionData=null,this.courseId=0,this.bundleId=0,this.postId=0,this.discussionBoardId=0,this.error=null,this.disscussionLastRequestStatus=n.UK.IDLE,this.disscussionLastRequestId=0,this.urlToken=null,this.discussionType=n.nc.COURSE_DISCUSSION,this.courseLessons={lessons:[]}}function Discussiondata(e,t,s,r,o){this.discussionDetails=e,this.discussionIds=t,this.currentPage=s,this.totalPages=r,this.enrollmentType=o}function DiscussionDetails(e){this.attachmentUrl=e.attachmentUrl,this.comments=e.comments,this.courseId=e.courseId,this.createdAt=e.createdAt,this.lessonLink=e.lessonLink,this.discussionId=e.discussionId,this.lessonId=e.lessonId,this.discussionText=e.discussionText,this.likeCount=e.likeCount,this.studentLike=e.studentLike,this.isLiked=e.isLiked,this.discussionTag=e.discussionTag,this.discussionTitle=e.discussionTitle,this.productTitle=e.productTitle,this.userInfo=e.userInfo,this.postId=e.postId,this.communitySlug=e.communitySlug,this.communityId=e.communityId}function CommentDetails(e,t,s,r,o,n,i,a,l){this.attachmentUrl=e,this.createdAt=t,this.discussionId=s,this.commentId=r,this.replyText=o,this.likeCount=n,this.studentLike=i,this.isLiked=a,this.userInfo=l}function UserInfo(e,t,s,r){this.userId=e,this.userName=t,this.userRole=s,this.profilePhotoUrl=r}function LikeStats(e,t,s){this.contentId=e,this.id=t,this.userId=s}s(37648);var u=s(59876);let{EDIT_QUESTION:d,EDIT_REPLY:S,POST_REPLY:_}=n.discussionActions,E=[i.i_.BATCH_DASHBOARD,i.i_.BATCH_SCHEDULE,i.i_.BATCH_CONTENT,i.i_.BATCH_RATING_REVIEW,i.i_.BATCH_ANNOUNCEMENT,i.i_.BATCH_ABOUT],resetDiscussionData=(e,t)=>{let{prevScreen:s,currentScreen:r,params:o,isForwardNavigation:a}=t,{postId:l,postSeo:c,courseId:u,bundleId:d,courseSeo:S,bundleSeo:_,discussionId:D}=o,{fetchStatus:p}=e;return{...e,postId:+(l||0),postSeo:c||null,loadingType:n.aw.NO_LOAD,discussionType:l?n.nc.POST_DISCUSSION:n.nc.COURSE_DISCUSSION,courseId:u?Number(u):0,bundleId:d?Number(d):0,courseSeo:S||null,bundleSeo:_||null,discussionBoardId:D?Number(D):0,fetchStatus:!a&&(s===i.i_.LESSON_PLAYER||s===i.i_.COURSE_DETAILS)||s===i.i_.DISCUSSION&&r!==i.i_.DISCUSSION_DETAILS||r===i.i_.DISCUSSION&&s!==i.i_.DISCUSSION_DETAILS||r===i.i_.COMMUNITY_POST_DETAILS||(s===i.i_.LESSON_PLAYER||E.includes(s))&&r===i.i_.BATCH_DISCUSSION_CIRCLE?n.UK.IDLE:p,discussionPostId:l,error:null}},addNewDiscussion=(e,t)=>{let s={},r=[],{discussionDetails:o,discussionIds:n}=e,i=0===n.length?1:e.totalPages;if(!o[t.id]){s[t.id]={};let e={attachmentUrl:(0,c.kc)(t.attachment_url),comments:setComments(t.comments),courseId:t.course_id,createdAt:t.created_at,lessonLink:t.discussion_link,discussionId:t.id,lessonId:t.lesson_id,discussionText:(0,c.kc)(t.message),discussionTag:t.tag,discussionTitle:t.title,userInfo:new UserInfo(t.user.id,t.user.name,t.user.role_id,t.user.profile_photo_file_name)};s[t.id]=new DiscussionDetails(e),r=[t.id,...n]}return{...e,discussionDetails:{...e.discussionDetails,...s},discussionIds:r,totalPages:i}},editDiscussionLike=(e,t)=>{var s;let r={...e},{isLiked:o}=e[t.contentId],n=e[t.contentId];return r[t.contentId]={...e[t.contentId],isLiked:!o,studentLike:o?{contentId:0,id:0,userId:0}:{contentId:t.contentId,id:t.likeId,userId:0},likeCount:o?n.likeCount-1:(null!==(s=n.likeCount)&&void 0!==s?s:0)+1},r},editQuestion=(e,t)=>(e[t.id]={...e[t.id],discussionText:(0,c.kc)(t.message),attachmentUrl:(0,c.kc)(t.attachment_url)},e),updateDiscussiondata=(e,t,s)=>{switch(s){case d:return{...e,discussionDetails:editQuestion(e.discussionDetails,t)};case S:return{...e,discussionDetails:updateCommentDetails(e.discussionDetails,t,S)};case _:return{...e,discussionDetails:updateCommentDetails(e.discussionDetails,t,_)};default:return{...e}}},updateLikeIdForDiscussion=(e,t,s,r,n)=>{let i={contentType:t,contentId:s,likeId:r,discussionId:n};return t===o.Hz.DISCUSSION_BOARD?{...e,discussionDetails:editDiscussionLike(e.discussionDetails,i)}:{...e,discussionDetails:updateCommentLike(e.discussionDetails,i)}},editReply=(e,t)=>(e[t.id]={...e[t.id],replyText:(0,c.kc)(t.reply_text),attachmentUrl:(0,c.kc)(t.attachment_url)},e),editReplyLike=(e,t)=>{var s;let r={...e},o=e[t.contentId],{isLiked:n}=e[t.contentId];return r[t.contentId]={...e[t.contentId],isLiked:!n,studentLike:n?{contentId:0,id:0,userId:0}:{contentId:t.contentId,id:t.likeId,userId:0},likeCount:n?o.likeCount-1:(null!==(s=o.likeCount)&&void 0!==s?s:0)+1},r},editComment=(e,t)=>({...e,commentDetails:editReply(e.commentDetails,t)}),editCommentLike=(e,t)=>({...e,commentDetails:editReplyLike(e.commentDetails,t)}),addComment=(e,t)=>{var s,r,o,n;let i=!!(null==t?void 0:null===(s=t.student_like)||void 0===s?void 0:s.id);return e.commentDetails[t.id]||(e.commentDetails[t.id]=new CommentDetails((0,c.kc)(t.attachment_url),t.created_at,t.discussion_board_id,t.id,(0,c.kc)(t.reply_text),t.like_count,new LikeStats((null==t?void 0:null===(r=t.student_like)||void 0===r?void 0:r.content_id)||0,(null==t?void 0:null===(o=t.student_like)||void 0===o?void 0:o.id)||0,(null==t?void 0:null===(n=t.student_like)||void 0===n?void 0:n.user_id)||0),i,new UserInfo(t.user.id,t.user.name,t.user.role_id,t.user.profile_photo_file_name)),e.commentIds.unshift(t.id)),e},updateCommentDetails=(e,t,s)=>{let r=t.discussion_board_id,o=e[r].comments;return s===S?e[r]={...e[r],comments:editComment(o,t)}:s===_&&(e[r]={...e[r],comments:addComment(o,t)}),e},updateCommentLike=(e,t)=>{let s={...e},{discussionId:r}=t,o=s[r].comments;return s[r]={...e[r],comments:editCommentLike(o,t)},s},deleteDiscussion=(e,t)=>{let s;return delete e.discussionDetails[t],e.discussionIds.forEach((e,r)=>{e===t&&(s=r)}),s>-1&&e.discussionIds.splice(s,1),{...e,discussionData:e}},deleteComment=(e,t)=>{let s;return delete e.discussionDetails[t.discussion_board_id].comments.commentDetails[t.id],e.discussionDetails[t.discussion_board_id].comments.commentIds.forEach((e,r)=>{e===t.id&&(s=r)}),s>-1&&e.discussionDetails[t.discussion_board_id].comments.commentIds.splice(s,1),{...e,discussionData:e}},setComments=e=>{let t={},s=[];return e.forEach(e=>{var r,o,n,i;let a=!!(null==e?void 0:null===(r=e.student_like)||void 0===r?void 0:r.id);t[e.id]||(t[e.id]=new CommentDetails((0,c.kc)(e.attachment_url),e.created_at,e.discussion_board_id,e.id,(0,c.kc)(e.reply_text),e.like_count,new LikeStats((null==e?void 0:null===(o=e.student_like)||void 0===o?void 0:o.content_id)||0,(null==e?void 0:null===(n=e.student_like)||void 0===n?void 0:n.id)||0,(null==e?void 0:null===(i=e.student_like)||void 0===i?void 0:i.user_id)||0),a,new UserInfo(e.user.id,e.user.name,e.user.role_id,e.user.profile_photo_file_name))),s.push(e.id)}),{commentDetails:t,commentIds:s}},setDiscussiondata=(e,t,s)=>{let r=[],o=0;if(!t.discussion_boards){let e=t.student_course?t.discussion:t;r.push(e)}let i=l()(t.discussion_boards||r),a={},d=[];if(i.forEach(e=>{var t,r,o,n;let i=!!(null==e?void 0:null===(t=e.student_like)||void 0===t?void 0:t.id);if(!a[e.id]){let t={attachmentUrl:(0,c.kc)(e.attachment_url),comments:setComments(e.comments),courseId:e.course_id,createdAt:e.created_at,lessonLink:e.discussion_link,discussionId:e.id,lessonId:e.lesson_id,discussionText:(0,c.kc)(e.message),likeCount:e.like_count,studentLike:new LikeStats((null==e?void 0:null===(r=e.student_like)||void 0===r?void 0:r.content_id)||0,(null==e?void 0:null===(o=e.student_like)||void 0===o?void 0:o.id)||0,(null==e?void 0:null===(n=e.student_like)||void 0===n?void 0:n.user_id)||0),isLiked:i,discussionTag:e.tag,discussionTitle:e.title,postId:e.post_id,communitySlug:null==e?void 0:e.community_slug,communityId:null==e?void 0:e.community_id,productTitle:e.product_title,userInfo:new UserInfo(e.user.id,e.user.name,e.user.role_id,e.user.profile_photo_file_name)};a[e.id]=new DiscussionDetails(t)}s||d.push(e.id)}),t.student_course){var S,_;let e=t.student_course;S=e.activation_type,_=e.exam_date,o=0===S?n.ri.NOT_ENROLLED:(0,u.xj)(_)?n.ri.UNKNOWN:S}if(!t.discussion_boards)return{...e,discussionDetails:{...a},discussionIds:[...d],currentPage:0,enrollmentType:o};if(1===t.current_page){let e=new Discussiondata(a,d,t.current_page,t.total_pages,o);return e}let E=e?e.discussionDetails:{},D=e?e.discussionIds:{},p=t.current_page||0;return{...e,discussionDetails:{...E,...a},discussionIds:[...D,...d],currentPage:p,enrollmentType:o}};var D=s(81851),p=s(93050);let{DISCUSSION_BOARD:T,DISCUSSION_COMMENTS:C,COURSE_LESSON_URL:h}=n.API_URLS,{DISCUSSION_FETCH:I,DISCUSSION_FETCH_SUCCESS:m,DISCUSSION_FETCH_FAILED:f,POST_QUESTION:g,POST_QUESTION_FAILED:y,POST_QUESTION_SUCCESS:A,POST_REPLY:N,POST_REPLY_SUCCESS:R,POST_REPLY_FAILED:P,EDIT_QUESTION:L,EDIT_QUESTION_SUCCESS:v,EDIT_QUESTION_FAILED:O,EDIT_REPLY:U,EDIT_REPLY_SUCCESS:F,EDIT_REPLY_FAILED:w,DELETE_REPLY:b,DELETE_QUESTION:M,DELETE_REPLY_SUCCESS:k,DELETE_REPLY_FAILED:B,DELETE_QUESTION_SUCCESS:V,DELETE_QUESTION_FAILED:Y,COURSE_LESSON_FETCH:H,COURSE_LESSON_FETCH_SUCCESS:G,COURSE_LESSON_FETCH_FAILED:K}=n.discussionActions,{LESSON_CHANGED:W}=n.coursesActions,{NAVIGATION_CHANGED:x}=i.notifications;var bundles_discussionBundle=e=>({name:"discussions",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new AllDiscussiondata,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case I:return{...t,fetchStatus:n.UK.IN_PROGRESS,courseId:s.payload.courseId||0,lessonId:s.payload.lessonId||0,postId:s.payload.postId||0,loadingType:s.payload.typeOfRequest,error:null,discussionType:s.payload.postId?n.nc.POST_DISCUSSION:n.nc.COURSE_DISCUSSION};case m:return{...t,fetchStatus:n.UK.SUCCESS,discussionData:setDiscussiondata(t.discussionData,s.payload.response,s.isDiscussionDetails),loadingType:n.aw.NO_LOAD,error:null,postId:s.payload.postId||0,postSeo:s.payload.postSeo,urlToken:s.payload.response.url_token};case x:return{...t,...resetDiscussionData(t,s)};case W:return{...t,lessonId:parseInt(s.lessonId)||t.lessonId,fetchStatus:s.lessonId===t.lessonId?t.fetchStatus:n.UK.IDLE};case f:return{...t,fetchStatus:n.UK.FAILED,error:{errorCode:s.error.errorCode||0,errorMessage:s.error.errorMessage||""},loadingType:n.aw.NO_LOAD};case V:return{...t,discussionData:deleteDiscussion(t.discussionData,s.discussionId),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case A:return{...t,discussionData:addNewDiscussion(t.discussionData,s.response),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case v:return{...t,discussionData:updateDiscussiondata(t.discussionData,s.response,L),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case F:return{...t,discussionData:updateDiscussiondata(t.discussionData,s.response,U),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case k:return{...t,discussionData:deleteComment(t.discussionData,s.response,U),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case R:return{...t,discussionData:updateDiscussiondata(t.discussionData,s.response,N),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case G:return{...t,courseLessons:s.response,error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case i.notifications.NEW_USER_LIKE_ADDED:case i.notifications.USER_LIKE_REMOVED:if(+s.contentType!=+o.Hz.DISCUSSION_BOARD&&+s.contentType!=+o.Hz.COMMENT)return t;return{...t,discussionData:updateLikeIdForDiscussion(t.discussionData,s.contentType,s.contentId,s.likeId,s.discussionId),error:null,disscussionLastRequestStatus:n.UK.SUCCESS};case g:case N:case L:case U:case b:case M:case H:return{...t,disscussionLastRequestId:s.lastRequestId,disscussionLastRequestStatus:n.UK.IN_PROGRESS};case y:case P:case O:case w:case B:case Y:case K:return{...t,disscussionLastRequestStatus:n.UK.FAILED,error:s.error};default:return t}},doFetchCourseLevelDiscussion:function(e,t,r,o,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.nc.COURSE_DISCUSSION,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],S=arguments.length>10?arguments[10]:void 0;return _=>{let{dispatch:E,httpApi:p}=_;E({type:I,payload:a===n.nc.POST_DISCUSSION?{postId:l,typeOfRequest:r}:{courseId:e,typeOfRequest:r}});let C=a===n.nc.COURSE_DISCUSSION?{school_id:D.customerConfig.SCHOOL_ID,course_id:parseInt(e),is_enrolment_required:!0,student_id:i,page:o}:{school_id:D.customerConfig.SCHOOL_ID,post_id:l,page:o,student_id:i};u&&(C.chrono=u),t&&(C.bundle_id=parseInt(t)),d&&(C.course_id=null),S&&(C.filter_type=S,C.course_id=null),p.get(T,C).then(t=>{let{response:r}=t;try{E({type:m,payload:a===n.nc.POST_DISCUSSION?{response:r,postId:l,postSeo:c}:{response:r,courseId:e}})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;E({type:f,error:t})})}},doFetchLessonLevelDiscussion:function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return a=>{let{dispatch:l,httpApi:c}=a;l({type:I,payload:{lessonId:e,typeOfRequest:t}});let u={school_id:D.customerConfig.SCHOOL_ID,lesson_id:e,page:r,student_id:n};o&&(u.chrono=o),i&&(u.bundle_id=parseInt(i,10)),c.get(T,u).then(t=>{let{response:r}=t;try{l({type:m,payload:{response:r,lessonId:e}})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;l({type:f,error:t})})}},doFetchDiscussionBoardData:function(e,t,r,o,i,a){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.nc.COURSE_DISCUSSION;return c=>{let{dispatch:u,httpApi:d}=c,S=l===n.nc.POST_DISCUSSION,_=S?{typeOfRequest:t,postId:i}:{typeOfRequest:t,courseId:r};u({type:I,payload:_});let E=S?{post_id:i,school_id:D.customerConfig.SCHOOL_ID,is_enrolment_required:!i}:{course_id:r,school_id:D.customerConfig.SCHOOL_ID,is_enrolment_required:!i};o&&(E.bundle_id=parseInt(o));let p="".concat(T,"/").concat(e);d.get(p,E).then(e=>{let{response:t}=e;try{u({type:m,payload:{response:t,...S?{postId:i,postSeo:a}:{}},isDiscussionDetails:!0})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;u({type:f,error:t})})}},doPostQuestion:(e,t)=>r=>{let{dispatch:o,httpApi:n}=r;o({type:g,payload:e,lastRequestId:t});let{requestPayLoadData:i}=e,a={...i,school_id:D.customerConfig.SCHOOL_ID};n.post(T,a).then(e=>{let{response:r}=e;try{o({type:A,response:r,lastRequestId:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;o({type:y,error:t})})},doPostReply:(e,t)=>r=>{let{dispatch:o,httpApi:n}=r;o({type:N,payload:e,lastRequestId:t});let{requestPayLoadData:i}=e;n.post(C,i).then(e=>{let{response:r}=e;try{o({type:R,response:r,lastRequestId:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;o({type:P,error:t}),(0,p.FN)({message:"failed to add reply"})})},doEditQuestion:(e,t)=>r=>{let{dispatch:o,httpApi:n}=r;o({type:L,payload:e,lastRequestId:t});let{data:i,discussionId:a}=e,l={...i,school_id:D.customerConfig.SCHOOL_ID};n.patch("".concat(T,"/").concat(a),l).then(e=>{let{response:r}=e;try{o({type:v,response:r,lastRequestId:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;o({type:O,error:t})})},doEditReply:(e,t)=>r=>{let{dispatch:o,httpApi:n}=r;o({type:U,payload:e,lastRequestId:t});let{data:i,commentId:a}=e;n.patch("".concat(C,"/").concat(a),i).then(e=>{let{response:r}=e;try{o({type:F,response:r,lastRequestId:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;o({type:w,error:t})})},doDeleteComment:e=>t=>{let{dispatch:r,httpApi:o}=t;r({type:b,commentId:e});let n={school_id:D.customerConfig.SCHOOL_ID};o.delete("".concat(C,"/").concat(e),n).then(e=>{let{response:t}=e;try{r({type:k,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:B,error:t})})},doDeleteQuestion:e=>t=>{let{dispatch:r,httpApi:o}=t;r({type:M,discussionId:e});let n={school_id:D.customerConfig.SCHOOL_ID};o.delete("".concat(T,"/").concat(e),n).then(t=>{let{response:o}=t;try{r({type:V,discussionId:e,response:o})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:Y,error:t})})},doFetchLessonListForCourse:e=>t=>{let{dispatch:r,httpApi:o}=t;r({type:H});let n={course_id:e,school_id:D.customerConfig.SCHOOL_ID};o.get("".concat(h),n).then(e=>{let{response:t}=e;try{r({type:G,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:K,error:t})})},selectDiscussionDataRaw:e=>e.discussions,selectDiscussionFetchStatus:e=>e.discussions.fetchStatus,selectDiscussionBoardFetchStatus:e=>e.discussions,selectDiscussionData:e=>e.discussions.discussionData,selectDiscussionFetchError:e=>e.discussions.error,selectDiscussionCourseId:e=>e.discussions.courseId,selectDiscussionBundleId:e=>e.discussions.bundleId,selectDiscussionBundleSeo:e=>e.discussions.bundleSeo,selectDiscussionCourseSeo:e=>e.discussions.courseSeo,selectDiscussionLessonId:e=>e.discussions.lessonId,selectCurrentDiscussionBoardId:e=>e.discussions.discussionBoardId,selectDiscussionLoadingType:e=>e.discussions.loadingType,selectDisscussionLastRequestStatus:e=>e.discussions.disscussionLastRequestStatus,selectDisscussionLastRequestId:e=>e.discussions.disscussionLastRequestId,selectDiscussionPostId:e=>e.discussions.postId,selectDiscussionPostTitle:e=>e.discussions.postSeo,selectPostDiscussionUrlToken:e=>e.discussions.urlToken,selectDiscussionType:e=>e.discussions.discussionType,selectDiscussionCourseLesson:e=>e.discussions.courseLessons.lessons,selectIsDiscussionCircle:(0,r.P1)("selectCurrentBundleDetails","selectNavigationCurrentScreen",(e,t)=>!!e&&(null==e?void 0:e.courseType)===n.courseType.BATCH&&t===i.i_.BATCH_DISCUSSION_CIRCLE),reactShouldFetchCourseLevelDiscussion:(0,r.P1)("selectDiscussionDataRaw","selectCurrentCourseId","selectNavigationCurrentScreen","selectCurrentBundleId","selectSharedUserId","selectDiscussionPostId","selectDiscussionPostTitle","selectDiscussionType","selectNavigationData","selectCurrentBundleDetails",(e,t,s,r,o,a,l,c,u,d)=>{let S=!1,_=e.courseId||t,E=e.bundleId||r,D=n.courseType.BATCH===(null==d?void 0:d.courseType)&&s===i.i_.BATCH_DISCUSSION_CIRCLE,p=(null==u?void 0:u.postId)?parseInt(u.postId):0;if(0===_&&0===a&&0===p&&0===E||e.fetchStatus!==n.UK.IDLE||s!==i.i_.DISCUSSION&&s!==i.i_.COMMUNITY_POST_DETAILS&&s!==i.i_.BATCH_DISCUSSION_CIRCLE||s===i.i_.BATCH_DISCUSSION_CIRCLE&&!d)return null;if((e.fetchStatus===n.UK.IDLE||e.courseId!==t&&(+e.postId!==a||+e.postId!==p))&&(S=!0),S){let e=n.aw.FIRST_LOAD;return{actionCreator:"doFetchCourseLevelDiscussion",args:[_,E,e,1,o,c,a||p,l,!1,D]}}return null}),reactShouldFetchLessonLevelDiscussion:(0,r.P1)("selectDiscussionDataRaw","selectCurrentLessonId","selectNavigationCurrentScreen","selectCurrentTestSeriesLessonId","selectCurrentCourseDetails","selectSharedUserId",(e,t,s,r,o,a)=>{let l=!1,c=t||r;if(0===c||e.fetchStatus!==n.UK.IDLE||s!==i.i_.LESSON_PLAYER||o&&!o.isDiscussionEnabled)return null;if((e.fetchStatus===n.UK.IDLE||e.lessonId!==c)&&(l=!0),l){let e=n.aw.FIRST_LOAD;return{actionCreator:"doFetchLessonLevelDiscussion",args:[c,e,1,null,a]}}return null}),reactShouldFetchDiscussionDetails:(0,r.P1)("selectDiscussionDataRaw","selectCurrentLessonId","selectNavigationCurrentScreen","selectDiscussionLessonId","selectCurrentDiscussionBoardId","selectDiscussionPostId","selectDiscussionPostTitle","selectDiscussionType",(e,t,s,r,o,a,l,c)=>{let u=!1;if(0===o||s!==i.i_.DISCUSSION_DETAILS&&s!==i.i_.BATCH_DISCUSSION_CIRCLE)return null;if(e.fetchStatus===n.UK.IDLE&&(u=!0),u){let t=n.aw.FIRST_LOAD,{courseId:s,bundleId:r}=e;return{actionCreator:"doFetchDiscussionBoardData",args:[o,t,s,r,a,l,c]}}})})},75378:function(e,t,s){"use strict";s.d(t,{MC:function(){return DownloadSectionData},Th:function(){return DownloadQueueObject},_g:function(){return DownloadLessonData},gZ:function(){return DownloadCourseData},jP:function(){return n},kK:function(){return DownloadSlideData},lf:function(){return DownloadData}});var r=s(78445),o=s(29505);function DownloadData(){this.lastIntercheckTime=0,this.hasCleanedUpHangedDownloads=!0,this.cacheRestoreState=r.Zg.NOT_RESTORED,this.reattachDownloadState=r.s2.NOT_ATTACHED,this.scanDownloadsState=r.OG.NOT_SCANNED,this.courses={},this.downloadQueue=[],this.userSelectedStorageDir=void 0,this.downloadQuality=o.V.BEST,this.downloaderError=r.bl.INVALID}function DownloadQueueObject(e,t,s,r){this.courseId=e,this.sectionId=t,this.lessonId=s,this.fileName=r}function DownloadCourseData(e){this.sections=e}function DownloadSectionData(e){this.lessons=e}function DownloadLessonData(e,t){this.version=e,this.downloadPercentage=0,this.downloadState=t,this.slides={}}function DownloadSlideData(e,t,s,r,o,n,i,a,l,c,u){this.onlineUrl=e,this.downloadPath=t,this.downloadState=s,this.downloadPercent=0,this.totalBytes=0,this.fileName=o,this.fileType=r,this.alternateOnlineUrls=n,this.contentPath=i,this.contentId=a,this.isTrial=l,this.isFreeCourse=c,this.userId=u}let n={userSelectedDir:void 0,courseVersionMap:{}}},13270:function(e,t,s){"use strict";var r=s(97405),o=s(78445),n=s(81851),i=s(73704);t.Z={name:"autoEnrollment",getReducer:()=>{let e={isEnrolling:!1,courseId:0,bundleCourseIds:[],userEnrollActionType:null,fetchStatus:o.UK.IDLE,error:{errorCode:0,errorMessage:null}};return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case o.md.ENROLLMENT_REQUEST:return{...t,isEnrolling:!0};case o.md.SET_USER_ENROLL_ACTION:return{isEnrolling:!1,courseId:s.courseId,bundleCourseIds:s.allBundleCourseIds,userEnrollActionType:s.userEnrollActionType};case o.md.ENROLLMENT_FAILED:return{...e,fetchStatus:o.UK.FAILED,error:s.error};case i.notifications.NAVIGATION_CHANGED:case i.notifications.DATA_EXPIRED:case o.md.UNSET_USER_ENROLL_ACTION:case o.md.ENROLLMENT_SUCCESS:return e;default:return t}}},selectIsEnrolling:e=>e.autoEnrollment.isEnrolling,doEnrollToCourse:(e,t,r)=>a=>{let{dispatch:l,httpApi:c}=a;l({type:o.md.ENROLLMENT_REQUEST,courseId:e});let u={is_enrolled:!0,is_from_classroom:!0,school_id:n.customerConfig.SCHOOL_ID};r&&(u.pricing_id=r),c.patch("".concat(o.API_URLS.COURSE_URL).concat(e),u).then(r=>{let{response:n}=r;try{l({type:o.md.ENROLLMENT_SUCCESS,response:n}),l({type:i.notifications.DATA_EXPIRED,courseIds:[e,...t]}),l({type:i.notifications.COURSE_PURCHASED})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;l({type:o.md.ENROLLMENT_FAILED,error:t})})},doSetUserEnrollAction:(e,t,s)=>r=>{let{dispatch:n}=r;n({type:o.md.SET_USER_ENROLL_ACTION,courseId:e,userEnrollActionType:t,allBundleCourseIds:s})},doUnsetUserEnrollAction:()=>e=>{let{dispatch:t}=e;t({type:o.md.UNSET_USER_ENROLL_ACTION})},selectAutoEnrollmentData:e=>e.autoEnrollment,reactShouldAutoEnroll:(0,r.P1)("selectAutoEnrollmentData","selectCurrentCourseFetchStatus","selectCurrentBundleFetchStatus","selectSharedIsUserLoggedIn","selectUserEnrollmentState",(e,t,s,r,n)=>0===e.courseId||e.isEnrolling||s===o.UK.IN_PROGRESS||t===o.UK.IN_PROGRESS?null:e.userEnrollActionType===o.xG.ENROLL&&r&&n===o.ri.NOT_ENROLLED?{actionCreator:"doEnrollToCourse",args:[e.courseId,e.bundleCourseIds]}:null)}},63338:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_faqBundle}});var r=s(97405),o=s(78445),n=s(73704);function FaqInitialData(){this.faqDetails={},this.cacheRestoreState=o.Zg.NOT_RESTORED}function FaqDetails(e){this.question=e.question,this.answer=e.answer}let setFaqData=(e,t,s)=>{let r={...s},n=[];return e.forEach(e=>{let t={question:e.question,answer:e.answer};n.push(new FaqDetails(t))}),r[t]={faqData:n,lastFetchTime:Date.now(),fetchStatus:o.UK.SUCCESS,error:{errorCode:0,errorMessage:null}},r},setFaqErrorData=(e,t,s)=>{let r={...s};return r[e]={...r[e],fetchStatus:o.UK.FAILED,error:t},r},setFaqinit=(e,t)=>{let s={...t};return s[e]={fetchStatus:o.UK.IN_PROGRESS},s},restoreFaqFromCache=(e,t,s)=>{let r={};return r[s]={...t},{...e,...r}};var i=s(53794);let{FAQ_API_REQUEST:a,FAQ_API_FAILURE:l,FAQ_API_SUCCESS:c,FAQ_RESTORE_FROM_CACHE:u}=o.faqApiAtions,{USER_SIGNEDIN:d,USER_SIGNEDOUT:S,CLEAR_CACHE:_}=n.notifications,{FAQ_URL:E}=o.API_URLS;var bundles_faqBundle=e=>({name:"faqBundle",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new FaqInitialData,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case a:return{...t,faqDetails:setFaqinit(s.courseId,t.faqDetails)};case c:return{...t,faqDetails:setFaqData(s.response,s.courseId,t.faqDetails)};case l:return{...t,faqDetails:setFaqErrorData(s.courseId,s.error,t.faqDetails)};case u:return{...t,faqDetails:restoreFaqFromCache(t.faqDetails,s.faq,s.courseId)};case d:case S:case _:return new FaqInitialData;default:return t}},selectFaqData:e=>e.faqBundle.faqDetails,selectCurrentFaqData:(0,r.P1)("selectCurrentCourseId","selectCurrentBundleId","selectNavigationCurrentScreen","selectFaqData","selectSubscriptionDetails",(e,t,s,r,o)=>{let i=null;return s===n.i_.SUBSCRIPTION_PLANS?i=o&&o.id?r[o.id]:{}:s===n.i_.BATCH_ABOUT?i=t?r[t]:{}:e?i=r[e]:t&&(i=r[t]),i}),doFetchFaq:(e,t,r)=>t=>{let{dispatch:r,httpApi:o,persist:n}=t;!function(t){let n="".concat(E);r({type:a,courseId:e}),o.get(n,{course_id:e}).then(t=>{let{response:o}=t;try{r({type:c,response:o,courseId:e})}catch(e){s.g.bugsnag.notify(e)}}).catch(s=>{let{error:o}=s;t?r({type:u,faq:t,courseId:e}):r({type:l,courseId:e,error:o})})}()},reactShouldFetchFaqBundleData:(0,r.P1)("selectCurrentBundleDetails","selectCurrentCourseDetails","selectCurrentBundleId","selectCurrentCourseId","selectAppTime","selectNavigationCurrentScreen","selectCurrentFaqData","selectCanInternetFetchApiData","selectSubscriptionDetails",(e,t,s,r,a,l,c,u,d)=>{let S=!1;if(!(l===n.i_.FAQ||l===n.i_.COURSE_DETAILS||l===n.i_.SUBSCRIPTION_PLANS||l===n.i_.BATCH_ABOUT)&&!i.zO)return null;let _=0,E=!1;if(l===n.i_.SUBSCRIPTION_PLANS)d&&d.id&&(_=d.id,E=d.isFaqEnabled);else{if(!r&&s&&e?(_=s,E=e.isFaqEnabled):r&&t&&(_=r,E=t.isFaqEnabled),!E)return null;c&&c.fetchStatus===o.UK.IDLE&&(S=!0)}if(c&&c.fetchStatus===o.UK.SUCCESS){let e=a-c.lastFetchTime;e>n.xU&&u&&(S=!0)}return(c||(S=!0),S)?{actionCreator:"doFetchFaq",args:[_,a,u]}:null})})},91407:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var r=s(97405),o=s(78445);function FreeResourceDetail(){this.freeResourceCurrentCourseId=0,this.freeResourceCurrentLessonId=0,this.freeResourceCurrentUserEmail="",this.freeResourceData={},this.fetchStatus=o.UK.IDLE,this.contentSignedUrl="",this.error={errorCode:0,errorMessage:""}}let resetFreeResourceBundleOnNavigationChanged=(e,t)=>{let{params:s}=t,{courseId:r,lessonId:o,email:n}=s,i=Number(r)||0,a=Number(o)||0;return{...e,freeResourceCurrentCourseId:i,freeResourceCurrentLessonId:a,freeResourceCurrentUserEmail:n||""}},setFreeResourceData=(e,t)=>{let{lesson:s,is_present:r=!1,course_status:o}=t,n={id:s.id,resourceLessonId:s.resource_lesson_id||0,lessonTitle:s.title,lessonShortDescription:s.short_description,lessonLongDescription:s.long_description,lessonDuration:s.duration,lessonType:s.lesson_type,lessonTag:s.tag,lessonVersion:s.version,isTrialLesson:s.is_trial,isHidden:s.hide_lesson,attachmentUrls:JSON.parse(s.pdf_file_name),lessonDripDate:s.release_date,mockTestId:s.quiz_id,sectionId:s.section_id,lessonThumbnailSrc:s.thumbnail_file_name};return{...e,freeResourceData:{lesson:n,isVerified:r,courseStatus:o}}};var n=s(81851),i=s(37648);let{FREE_RESOURCE_API_REQUEST:a,FREE_RESOURCE_API_FAILED:l,FREE_RESOURCE_API_SUCCESS:c}=o.freeResourceApiActions,{FREE_RESOURCE_ATTACHMENT_API_REQUEST:u,FREE_RESOURCE_ATTACHMENT_API_SUCCESS:d,FREE_RESOURCE_ATTACHMENT_API_FAILURE:S}=o.freeResourceAttachmentApiActions,{FREE_RESOURCE:_}=o.API_URLS,{CONTENT_UPLOAD_URL:E}=i.urls,{NAVIGATION_CHANGED:D}=i.notifications;var p={name:"freeResourceBundle",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new FreeResourceDetail,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{...e,...resetFreeResourceBundleOnNavigationChanged(e,t),fetchStatus:o.UK.IDLE};case a:return{...e,fetchStatus:o.UK.IN_PROGRESS};case c:return{...e,fetchStatus:o.UK.SUCCESS,freeResourceData:setFreeResourceData(e,t.response)};case l:return{...e,fetchStatus:o.UK.FAILED,error:t.error};case u:return{...e,fetchStatus:o.UK.IN_PROGRESS};case d:return{...e,fetchStatus:o.UK.SUCCESS,contentSignedUrl:t.response.content_signed_url};case S:return{...e,fetchStatus:o.UK.FAILED,error:t.error};default:return e}},selectFreeResourceFetchStatus:e=>e.freeResourceBundle.fetchStatus,selectFreeResourceCurrentCourseId:e=>e.freeResourceBundle.freeResourceCurrentCourseId,selectFreeResourceCurrentLessonId:e=>e.freeResourceBundle.freeResourceCurrentLessonId,selectFreeResourceCurrentUserEmail:e=>e.freeResourceBundle.freeResourceCurrentUserEmail,selectContentSignedUrl:e=>e.freeResourceBundle.contentSignedUrl,selectFreeResourceFetchStatus:e=>e.freeResourceBundle.fetchStatus,selectFreeResourceDetail:e=>e.freeResourceBundle.freeResourceData,doFetchFreeResourceAttachmentForLesson:e=>t=>{let{dispatch:r,httpApi:o}=t,a=e.course_id,l=e.lesson_id,c=e.file_name;r({type:u,courseId:a});let _="".concat(E),D={school_id:n.customerConfig.SCHOOL_ID,action:i.UX.ATTACHMENT_CONTENT,course_id:a,lesson_id:l,content_version:n.customerConfig.content_version,file_name:c};o.post(_,D).then(e=>{let{response:t}=e;try{r({type:d,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:S,error:t})})},doFetchFreeResourceData:(e,t,r)=>o=>{let{dispatch:i,httpApi:u}=o,d="".concat(_),S={school_id:n.customerConfig.SCHOOL_ID,course_id:e,lesson_id:t,email:r};i({type:a}),u.get(d,S).then(e=>{let{response:t}=e;try{i({type:c,response:t})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;i({type:l,error:t})})},reactShouldFetchFreeResourceDetails:(0,r.P1)("selectFreeResourceCurrentCourseId","selectFreeResourceCurrentLessonId","selectFreeResourceCurrentUserEmail","selectNavigationCurrentScreen","selectFreeResourceFetchStatus",(e,t,s,r,n)=>{let a=!1;return e&&t&&r===i.navigatorScreens.FREE_RESOURCE?(n===o.UK.IDLE&&(a=!0),a)?{actionCreator:"doFetchFreeResourceData",args:[e,t,s||""]}:void 0:null})}},59339:function(e,t,s){"use strict";var r=s(97405),o=s(81851),n=s(37648),i=s(78445),a=s(73704),l=s(83830),c=s(99955),u=s(61334);let{CLEAR_CACHE:d}=a.notifications,{SET_PRICING_MODEL:S,UPDATE_PRICING_MODEL:_,RESTORE_PRICING_MODEL_FROM_CACHE:E}=i.pricingActions,{VALIDITY_UPDATE_SUCCESS:D}=u.paymentActions,{SET_VARIABLE_PRICING:p}=i.variablePricingActions;t.Z=e=>({name:"pricingBundle",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new c.nc,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case S:return{...t,coursePricing:(0,l.qW)(s.response,t,s.InAppPurchaseData,s.productPricings)};case _:return{...t,coursePricing:(0,l.bf)(s.response,t,s.InAppPurchaseData,s.AllInAppCourseData)};case E:return{...t,...s.params.coursePricings,cacheRestoreState:i.Zg.RESTORED};case p:return{...t,coursePricing:(0,l.qR)(s.payload.data,s.payload.id,t)};case d:return new c.nc;default:return t}},selectPricing:e=>e.pricingBundle.coursePricing,selectPricingBundle:e=>e.pricingBundle,selectCurrentCoursePricing:(0,r.P1)("selectCurrentBundleId","selectCurrentCourseId","selectPricing",(e,t,s)=>s&&(e||t)?e&&o.customerConfig.pricing_model===n._n.ONE_TIME_PAYMENT?s[e]||null:s[t]||null:null),selectCurrentSubscriptionPricing:(0,r.P1)("selectCurrentSubscriptionId","selectPricing",(e,t)=>t&&e&&t[e]||null),doSetVariablePrice:(e,t)=>s=>{let{dispatch:r}=s;r({type:p,payload:{data:e,id:t}}),r({type:D})}})},99955:function(e,t,s){"use strict";s.d(t,{MI:function(){return SetVariablePriceSummary},Nj:function(){return PricingSummary},nc:function(){return Pricing}});var r=s(78445);function Pricing(){this.coursePricing={},this.cacheRestoreState=r.Zg.NOT_RESTORED}function PricingSummary(e){this.courseEndDate=e.courseEndDate,this.courseValidityDays=e.courseValidityDays,this.pricingType=e.pricingType,this.productId=e.productId,this.discountPrice=e.discountPrice,this.actualPrice=e.actualPrice,this.localizedDiscountPrice=e.localizedDiscountPrice,this.localizedActualPrice=e.localizedActualPrice,this.selctedVariablePrice=e.selctedVariablePrice,this.variablePrices=e.variablePrices,this.discountPercentage=e.discountPercentage,this.offerStartDate=e.offerStartDate,this.offerEndDate=e.offerEndDate,this.pricingPlanShortDescription=e.pricingPlanShortDescription,this.renewPricingPlan=e.renewPricingPlan}function SetVariablePriceSummary(e){this.priceId=e.priceId,this.discountPrice=e.discountPrice,this.actualPrice=e.actualPrice,this.validity=e.validity,this.localizedDiscountPrice=e.localizedDiscountPrice,this.localizedActualPrice=e.localizedActualPrice,this.discountPercentage=e.discountPercentage,this.courseEndDate=e.courseEndDate,this.InstallmentCount=null==e?void 0:e.InstallmentCount,this.title=null==e?void 0:e.title,this.instalmentPrice=null==e?void 0:e.instalmentPrice,this.validityType=null==e?void 0:e.validityType,this.shortDescription=null==e?void 0:e.shortDescription,this.recurringDuration=null==e?void 0:e.recurringDuration,this.endDate=null==e?void 0:e.endDate,this.discountDuration=null==e?void 0:e.discountDuration,this.pricingType=null==e?void 0:e.pricingType,this.formattedValidity=null==e?void 0:e.formattedValidity,this.isTriallEnable=null==e?void 0:e.isTriallEnable,this.discountedPrice=null==e?void 0:e.discountedPrice,this.payableAmount=null==e?void 0:e.payableAmount,this.localizedDiscountedPrice=null==e?void 0:e.localizedDiscountedPrice,this.localizedInstalmentPrice=null==e?void 0:e.localizedInstalmentPrice,this.localizedPayableAmount=null==e?void 0:e.localizedPayableAmount,this.isDefaultPlan=null==e?void 0:e.isDefaultPlan,this.longDescription=null==e?void 0:e.longDescription,this.offerStartDate=null==e?void 0:e.offerStartDate,this.offerEndDate=null==e?void 0:e.offerEndDate,this.allowReEnroll=null==e?void 0:e.allowReEnroll}},66148:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_productsBundle}});var r=s(97405),o=s(78445),n=s(73704),i=s(81851);let a={courses:{},enrolledCourses:{bundleIds:[],courseIds:[],mockTestIds:[],testSeriesIds:[],telegramIds:[],ebookIds:[],podcastIds:[],webinarIds:[],digitalProductIds:[],batchIds:[]},unEnrolledCourses:{bundleIds:[],courseIds:[],mockTestIds:[],testSeriesIds:[],telegramIds:[],ebookIds:[],podcastIds:[],webinarIds:[],digitalProductIds:[],batchIds:[]},courseTags:{courseTags:[],mockTestTags:[],bundleTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]},enrolledCourseTags:{courseTags:[],mockTestTags:[],bundleTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]},fetchStatus:o.UK.IDLE,isDirtyData:!1,lastFetchTime:0,error:{errorCode:0,errorMessage:null},categoryData:{categoryList:{},categoryOrder:[]},currentCourseCategory:{categoryCustomName:null},segmentData:{segment:null,productOrder:null},cacheRestoreState:o.Zg.NOT_RESTORED};function CoursesIds(e){this.bundleIds=e.bundleIds,this.courseIds=e.courseIds,this.mockTestIds=e.mockTestIds,this.testSeriesIds=e.testSeriesIds,this.telegramIds=e.telegramIds,this.ebookIds=e.ebookIds,this.podcastIds=e.podcastIds,this.webinarIds=e.webinarIds,this.digitalProductIds=e.digitalProductIds,this.batchIds=e.batchIds}function CourseDetails(e){this.courseType=e.courseType,this.coursePaymentMode=e.coursePaymentMode,this.courseAvailabilityMode=e.courseAvailabilityMode,this.courseAccessType=e.courseAccessType,this.enrollmentState=e.enrollmentState,this.courseStatus=e.courseStatus,this.courseSeoTitle=e.courseSeoTitle,this.courseTitle=e.courseTitle,this.courseTag=e.courseTag,this.rating=e.rating,this.courseShortDescription=e.courseShortDescription,this.numberOfFreeLessons=e.numberOfFreeLessons,this.courseImageUrl=e.courseImageUrl,this.lessonCount=e.lessonCount||0,this.testCount=e.testCount||0,this.coursesCount=e.coursesCount||0,this.courseStartTime=e.courseStartTime,this.courseEndTime=e.courseEndTime,this.courseEpiryTime=e.courseEpiryTime,this.inAppProductId=e.inAppProductId||"",this.isFree=e.isFree}function Category(e,t){this.id=e.id,this.categoryName=e.categoryName,this.categoryCustomName=e.categoryCustomName,this.seoDescription=e.seoDescription,this.products=t}function CategoriesData(e){this.categoryList=e.categoryList,this.categoryOrder=e.categoryOrder,this.categoryCustomNameToIdMap=e.categoryCustomNameToIdMap}function CurrentCourseCategory(e){this.categoryCustomName=e}function SelectedSegment(e){this.id=e.id,this.productType=e.productType}function SegmentData(e){this.segment=e.segment,this.productOrder=e.productOrder}function ProductsData(){this.courses={},this.enrolledCourses={bundleIds:[],courseIds:[],mockTestIds:[],testSeriesIds:[],telegramIds:[],ebookIds:[],podcastIds:[],webinarIds:[],digitalProductIds:[],batchIds:[]},this.unEnrolledCourses={bundleIds:[],courseIds:[],mockTestIds:[],testSeriesIds:[],telegramIds:[],ebookIds:[],podcastIds:[],webinarIds:[],digitalProductIds:[],batchIds:[]},this.legacyCourses={bundleIds:[],courseIds:[],mockTestIds:[],testSeriesIds:[]},this.allProductIds=[],this.allEnrolledIds=[],this.courseTags={courseTags:[],mockTestTags:[],bundleTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]},this.enrolledCourseTags={courseTags:[],mockTestTags:[],bundleTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]},this.fetchStatus=o.UK.IDLE,this.isDirtyData=!1,this.lastFetchTime=0,this.error={errorCode:0,errorMessage:null},this.categoryData={categoryList:{},categoryOrder:[]},this.currentCourseCategory={categoryCustomName:null},this.segmentData={segment:null,productOrder:null},this.cacheRestoreState=o.Zg.NOT_RESTORED}var l=s(37648),c=s(67717),u=s(46988),d=s(53794);let S=i.customerConfig.pricing_model===l._n.SUBSCRIPTION_TYPE,_=i.customerConfig.pricing_model===l._n.ONE_TIME_PAYMENT,setCategoryData=e=>{let{category:t,enrolled_courses:s,courses:r}=e,filterEnrolledProductForNonOtpModes=e=>e.filter(e=>{if(!_&&!r.some(t=>t.id===e)){let t=s.find(t=>t.course_id===e);if(t&&new Date(t.exam_date)<Date.now())return!1}return!0}),o={category_list:[],category_order:[]};t&&(o.category_list=t.category_list||[],o.category_order=t.category_order||[]);let{category_list:n,category_order:i}=o,a={},l={};n&&n.length&&n.forEach(e=>{if(e.product_count){let t=null;if(e.content_order){t={courses:[],mocktests:[],bundles:[],testSeries:[],telegrams:[],ebooks:[],podcasts:[],webinars:[],digitalProducts:[],batches:[]};let s={};try{s=JSON.parse(e.content_order)}catch(e){console.log("productIds parse failed")}if(s.product_order){let{product_order:e}=s;e.courses&&(t.courses=filterEnrolledProductForNonOtpModes(e.courses)),e.bundles&&(t.bundles=filterEnrolledProductForNonOtpModes(e.bundles)),e.mocktests&&(t.mocktests=filterEnrolledProductForNonOtpModes(e.mocktests)),e.test_series&&(t.testSeries=filterEnrolledProductForNonOtpModes(e.test_series)),e.telegrams&&(t.telegrams=filterEnrolledProductForNonOtpModes(e.telegrams)),e.ebooks&&(t.ebooks=filterEnrolledProductForNonOtpModes(e.ebooks)),e.podcasts&&(t.podcasts=filterEnrolledProductForNonOtpModes(e.podcasts)),e.webinars&&(t.webinars=filterEnrolledProductForNonOtpModes(e.webinars)),e.digital_products&&(t.digitalProducts=filterEnrolledProductForNonOtpModes(e.digital_products)),e.batches&&(t.batches=filterEnrolledProductForNonOtpModes(e.batches))}}let s={id:e.id,categoryName:e.category_name,categoryCustomName:e.slug,seoDescription:e.seo_description,products:t};e.slug&&(l[e.slug]=e.id),a[e.id]=new Category(s,t)}});let c=new CategoriesData({categoryList:a,categoryOrder:i||[],categoryCustomNameToIdMap:l});return c},setSegmentData=e=>{let{segment:t}=e,s={},r=null;t&&t.product_order&&(r=t.product_order);let o=t&&t.segment;o&&(s=new SelectedSegment({id:o.id,productType:o.product_type}));let n=new SegmentData({segment:s,productOrder:r});return n},mapData=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n={...a},i=e.lesson_count;if(0===i&&e.course_type===o.courseType.COURSE)return n;let l={};switch(l={courseType:e.course_type||o.courseType.INVALID,coursePaymentMode:e.is_free?o.H3.FREE:o.H3.PAID,enrollmentState:s?t.activation_type:o.ri.NOT_ENROLLED,courseAvailabilityMode:e.signup_type||o.m$.INVALID,courseAccessType:e.new_course_access_type||o.Qu.INVALID,courseStatus:e.status||o.iP.INVALID,courseSeoTitle:e.seo_title||null,courseTitle:e.title||null,courseTag:e.tag||"",courseShortDescription:e.short_description,rating:e.rating,numberOfFreeLessons:e.trial_lessons_count,courseStartTime:e.start_time||null,courseEndTime:e.end_time||null,courseEpiryTime:s&&t.exam_date||null,courseImageUrl:e.image_url||null,inAppProductId:r[e.id]||"",isFree:e.is_free||!1},e.course_type){case o.courseType.COURSE:l.lessonCount=i;break;case o.courseType.BUNDLE:case o.courseType.BATCH:case o.courseType.SUBSCRIPTION_BUNDLE:case o.courseType.SUBSCRIPTION_TIER_BUNDLE:l.coursesCount=i;break;case o.courseType.TEST:case o.courseType.TEST_SERIES:l.testCount=i;break;default:l.lessonCount=i}return n.courses[e.id]=new CourseDetails(l),n},mapAllCourseTags=e=>{let t=[],s=[],r=[],n=[],i=[],a=[],l=[],c=[],u=[],d=[],S={[o.courseType.COURSE]:t,[o.courseType.BUNDLE]:s,[o.courseType.TEST]:r,[o.courseType.TEST_SERIES]:n,[o.courseType.TELEGRAM]:i,[o.courseType.EBOOK]:a,[o.courseType.PODCAST]:l,[o.courseType.WEBINAR]:c,[o.courseType.DIGITAL_PRODUCT]:u,[o.courseType.BATCH]:d};return e.forEach(e=>{let t=S[e.course_type];t&&e.tag&&!t.includes(e.tag)&&t.push(e.tag)}),{courseTags:t,bundleTags:s,mockTestTags:r,testSeriesTags:n,telegramTags:i,ebookTags:a,podcastTags:l,webinarTags:c,digitalProductTags:u,batchTags:d}},mapAllEnrolledCourseTags=e=>{let t={courseTags:[],bundleTags:[],mockTestTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]},s={[o.courseType.COURSE]:t.courseTags,[o.courseType.BUNDLE]:t.bundleTags,[o.courseType.TEST]:t.mockTestTags,[o.courseType.TEST_SERIES]:t.testSeriesTags,[o.courseType.TELEGRAM]:t.telegramTags,[o.courseType.EBOOK]:t.ebookTags,[o.courseType.PODCAST]:t.podcastTags,[o.courseType.WEBINAR]:t.webinarTags,[o.courseType.DIGITAL_PRODUCT]:t.digitalProductTags,[o.courseType.BATCH]:t.batchTags};return e.forEach(e=>{let{course:t}=e,r=s[t.course_type];t.tag&&r&&!r.includes(t.tag)&&r.push(t.tag)}),t},mapEnrolledAndUnEnrolledIds=function(e,t,s,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[],c=[],_=[],E=[],D=[],p=[],T=[],C=[],h=[],I=[],m=[],f=[],g=[],y=[],A=[],N=[],R=[],P=[],L=[],v=[],O=[],U=[],F=[],w=[],b=[],M=[],k=[];s.forEach(e=>{e.product_id&&U.push(e.course_id)});let B=t.filter(e=>i.customerConfig.pricing_model===l._n.ONE_TIME_PAYMENT?e.activation_type===o.ri.PURCHASED||e.activation_type===o.ri.FREE_PURCHASE:e.activation_type===o.ri.PURCHASED&&!(e.course&&(e.course.course_type===o.courseType.SUBSCRIPTION_BUNDLE||e.course.course_type===o.courseType.SUBSCRIPTION_TIER_BUNDLE))).map(e=>e.course_id),V=t.filter(e=>e.activation_type===o.ri.ENROLLED&&!(e.course&&(e.course.course_type===o.courseType.SUBSCRIPTION_BUNDLE||e.course.course_type===o.courseType.SUBSCRIPTION_TIER_BUNDLE))).map(e=>e.course_id),Y=[...B,...V],H={[o.courseType.COURSE]:g,[o.courseType.TEST]:y,[o.courseType.TEST_SERIES]:A,[o.courseType.BUNDLE]:f,[o.courseType.TELEGRAM]:N,[o.courseType.EBOOK]:R,[o.courseType.PODCAST]:P,[o.courseType.WEBINAR]:L,[o.courseType.DIGITAL_PRODUCT]:v,[o.courseType.BATCH]:O},G={[o.courseType.COURSE]:_,[o.courseType.TEST]:E,[o.courseType.TEST_SERIES]:D,[o.courseType.BUNDLE]:c,[o.courseType.TELEGRAM]:p,[o.courseType.EBOOK]:T,[o.courseType.PODCAST]:C,[o.courseType.WEBINAR]:h,[o.courseType.DIGITAL_PRODUCT]:I,[o.courseType.BATCH]:m};if(Number(i.customerConfig.PAYMENT_TYPE)!==l.O5.IN_APP_PAYMENT||i.customerConfig.IS_LEARNYFY_APP&&Number(i.customerConfig.PAYMENT_TYPE)===l.O5.IN_APP_PAYMENT&&!(0,d.mG)()?e.forEach(e=>{F.push(e.id);let t=e.course_type,s=H[t];t===o.courseType.COURSE&&e.lesson_count?s.push(e.id):s&&t!==o.courseType.COURSE&&s.push(e.id)}):e.forEach(e=>{switch(F.push(e.id),e.course_type){case o.courseType.COURSE:e.lesson_count&&(U.includes(e.id)||e.is_free||S)&&g.push(e.id);break;case o.courseType.BUNDLE:(U.includes(e.id)||e.is_free||S)&&(F.push(e.id),f.push(e.id));break;case o.courseType.TEST:(U.includes(e.id)||e.is_free||S)&&(F.push(e.id),y.push(e.id));break;case o.courseType.TEST_SERIES:(U.includes(e.id)||e.is_free||S)&&(F.push(e.id),A.push(e.id));break;case o.courseType.SUBSCRIPTION_BUNDLE:case o.courseType.SUBSCRIPTION_TIER_BUNDLE:break;case o.courseType.TELEGRAM:N.push(e.id);break;case o.courseType.EBOOK:R.push(e.id);break;case o.courseType.PODCAST:P.push(e.id);break;case o.courseType.WEBINAR:L.push(e.id);break;case o.courseType.DIGITAL_PRODUCT:v.push(e.id);break;case o.courseType.BATCH:(U.includes(e.id)||e.is_free||S)&&(F.push(e.id),O.push(e.id));break;default:g.push(e.id)}}),Number(i.customerConfig.PAYMENT_TYPE)!==l.O5.IN_APP_PAYMENT||i.customerConfig.is_learnyfy_ios_enabled&&Number(i.customerConfig.PAYMENT_TYPE)===l.O5.IN_APP_PAYMENT&&!(0,d.mG)()?t.forEach(e=>{let t=e.course_id,s=e.course.course_type;F.push(t),s===o.courseType.COURSE&&e.course.lesson_count?_.push(t):G[s]?G[s].push(t):_.push(t)}):(()=>{let e={[o.courseType.BUNDLE]:c,[o.courseType.TEST]:E,[o.courseType.TEST_SERIES]:D,[o.courseType.TELEGRAM]:p,[o.courseType.EBOOK]:T,[o.courseType.PODCAST]:C,[o.courseType.WEBINAR]:h,[o.courseType.DIGITAL_PRODUCT]:I,[o.courseType.BATCH]:m},handleEnrollment=(e,t)=>{(!(0,u.Sh)(e.exam_date)&&e.activation_type===o.ri.PURCHASED||e.activation_type===o.ri.ENROLLED||e.activation_type===o.ri.FREE_PURCHASE||U.includes(e.course_id)||S||e.course.is_free)&&(F.push(e.course_id),t.push(e.course_id))};t.forEach(t=>{let s=e[t.course.course_type];if(t.course.course_type===o.courseType.COURSE){let e=t.course.lesson_count&&(!(0,u.Sh)(t.exam_date)&&(t.activation_type===o.ri.PURCHASED||t.activation_type===o.ri.ENROLLED||t.activation_type===o.ri.FREE_PURCHASE)||U.includes(t.course_id)||S||t.course.is_free);e&&(F.push(t.course_id),_.push(t.course_id))}else if(t.course.course_type===o.courseType.SUBSCRIPTION_BUNDLE||t.course.course_type===o.courseType.SUBSCRIPTION_TIER_BUNDLE){let e=!(0,u.Sh)(t.exam_date)&&t.activation_type===o.ri.PURCHASED;e&&(F.push(t.course_id),c.push(t.course_id))}else s?handleEnrollment(t,s):(F.push(t.course_id),_.push(t.course_id))})})(),i.customerConfig.pricing_model===l._n.ONE_TIME_PAYMENT){if(n&&Object.keys(n.courses).length){let{courses:e}=n;w=c.filter(t=>{let s=e[t];return s.enrollmentState===o.ri.PURCHASED&&(s.courseType===o.courseType.SUBSCRIPTION_BUNDLE||s.courseType===o.courseType.SUBSCRIPTION_TIER_BUNDLE)}),c=c.filter(e=>!w.includes(e)),Y=Y.filter(e=>!w.includes(e))}}else if(n&&Object.keys(n.courses).length){let{courses:e}=n;b=_.filter(t=>{let s=e[t];return!(0,u.Sh)(s.courseEpiryTime)&&s.enrollmentState===o.ri.PURCHASED}),w=c.filter(t=>{let s=e[t];return!(0,u.Sh)(s.courseEpiryTime)&&s.enrollmentState===o.ri.PURCHASED&&!(s.courseType===o.courseType.SUBSCRIPTION_BUNDLE||s.courseType===o.courseType.SUBSCRIPTION_TIER_BUNDLE)}),M=E.filter(t=>{let s=e[t];return!(0,u.Sh)(s.courseEpiryTime)&&s.enrollmentState===o.ri.PURCHASED}),k=D.filter(t=>{let s=e[t];return!(0,u.Sh)(s.courseEpiryTime)&&s.enrollmentState===o.ri.PURCHASED}),_=[],c=[],E=[],D=[],p=[],T=[],C=[],h=[],I=[],m=[]}let K={enrolledBundleIds:c,enrolledCourseIds:_,enrolledMockTestIds:E,enrolledTestSeriesIds:D,enrolledTelegramIds:p,enrolledEbookIds:T,enrolledPodcastIds:C,enrolledWebinarIds:h,enrolledDigitalProductIds:I,enrolledBatchIds:m,unEnrolledBundleIds:f,unEnrolledCourseIds:g,unEnrolledMockTestIds:y,unEnrolledTestSeriesIds:A,unEnrolledTelegramIds:N,unEnrolledEbookIds:R,unEnrolledPodcastIds:P,unEnrolledWebinarIds:L,unEnrolledDigitalProductIds:v,unEnrolledBatchIds:O,allProductIds:F,allEnrolledIds:Y};a.length&&Object.keys(K).forEach(e=>{K[e]=K[e].filter(e=>a.includes(e))});let W={bundleIds:c,courseIds:_,mockTestIds:E,testSeriesIds:D,telegramIds:p,ebookIds:T,podcastIds:C,webinarIds:h,digitalProductIds:I,batchIds:m},x={bundleIds:w,courseIds:b,mockTestIds:M,testSeriesIds:k},q={enrolledCourses:new CoursesIds(W),unEnrolledCourses:new CoursesIds({bundleIds:f,courseIds:g,mockTestIds:y,testSeriesIds:A,telegramIds:N,ebookIds:R,podcastIds:P,webinarIds:L,digitalProductIds:v,batchIds:O}),legacyCourses:new CoursesIds(x),allProductIds:F,allEnrolledIds:Y};return q},setCurrentCourseCategory=(e,t)=>{if(t===l.navigatorScreens.CATEGORIES){let t=new CurrentCourseCategory(e);return t}let s=new CurrentCourseCategory(null);return s},constructCoursesDataToRender=(e,t)=>{let s=[];return e.forEach(e=>{s.push({...t[e],id:e})}),s},getInAppPurchaseDetails=async e=>{let t=[],{in_app_purchases:s}=e;if(!s||!s.length)return{};s.forEach(e=>{e.product_id&&t.push(e.product_id)});let r={};return n.OS===n.vO.DEVICE_IOS&&(r=await (0,c.kR)(t)),r};var productsDetails=(e,t,s,r)=>{let n=e.courses,i=e.test_engine_version,l=e.in_app_purchases||[],c=e.enrolled_courses,u={};l.forEach(e=>{u[e.course_id]=e.product_id});let d={...a};d.cacheRestoreState=o.Zg.RESTORED,d.errorCode=0,n.forEach(e=>{let t={};t=mapData(e,null,!1,u),d={...d,...t}}),c.forEach(e=>{let t={};t=mapData(e.course,e,!0,u),d={...d,...t}}),d.fetchStatus=o.UK.SUCCESS,d.lastFetchTime=Date.now(),d.currentCourseCategory=t;let S=mapEnrolledAndUnEnrolledIds(n,c,l,i,d),_={...mapAllCourseTags(n)},E={...mapAllEnrolledCourseTags(c)},D=setCategoryData(e),p=setSegmentData(e);return{...d,...S,courseTags:_,enrolledCourseTags:E,categoryData:D,segmentData:p}};let{USER_SIGNEDIN:E,USER_SIGNEDOUT:D,CLEAR_CACHE:p,COURSE_PURCHASED:T,NAVIGATION_CHANGED:C,DATA_EXPIRED:h}=n.notifications,{COURSES_FETCH:I,COURSES_FETCH_SUCCESS:m,COURSES_FETCH_FAILED:f,COURSES_RESTORE_FROM_CACHE:g}=o.coursesActions,{FETCH_SEGMENT_PRODUCTS:y}=o.segmentActions,{SET_PRICING_MODEL:A}=o.pricingActions;var bundles_productsBundle=e=>({name:"productsData",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new ProductsData,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case I:return{...t,fetchStatus:o.UK.IN_PROGRESS};case f:return{...t,fetchStatus:o.UK.FAILED,error:s.error};case m:return productsDetails(s.response,t.currentCourseCategory,s.sharedIsUserLoggedIn,s.productPricings);case T:return{...t,cacheRestoreState:o.Zg.RESTORED,isDirtyData:!0};case g:return{...s.courses,cacheRestoreState:o.Zg.RESTORED,fetchStatus:o.UK.SUCCESS};case E:case D:case p:case h:return{...new ProductsData,cacheRestoreState:o.Zg.RESTORED};case C:return s.currentScreen===n.i_.STORE&&s.prevScreen===n.i_.SEGMENT_BOARD&&(t.isDirtyData=!0),{...t,currentCourseCategory:setCurrentCourseCategory(s.params.categoryCustomName,s.currentScreen)};default:return t}},doFetchProducts:(e,t)=>async r=>{let{dispatch:a,httpApi:l}=r,c="".concat(o.API_URLS.COURSE_URL),u={is_from_classroom:!0,school_id:i.customerConfig.SCHOOL_ID,device_type:n.OS};Number(i.customerConfig.PAYMENT_TYPE)!==n.O5.IN_APP_PAYMENT||d.zO||(u.is_in_app=!0),t&&(i.customerConfig.segment_enabled||i.schoolConfig.segment_enabled)&&(u.segment_id=t),a({type:I,params:u}),(async()=>{try{var t,r;let s=await Promise.all([l.get(c,u),l.get(o.API_URLS.PRODUCT_PRICING_URL,u)]),n=null===(t=s[0])||void 0===t?void 0:t.response,i=null===(r=s[1])||void 0===r?void 0:r.response,d=await getInAppPurchaseDetails(i);a({type:y,data:null}),a({type:m,response:n,sharedIsUserLoggedIn:e,productPricings:i}),a({type:A,response:n,InAppPurchaseData:d,productPricings:i})}catch(e){a({type:f,error:e}),s.g.bugsnag.notify(e)}})()},doClearCache:()=>async e=>{let{dispatch:t}=e;await (0,d._0)(),t({type:n.notifications.CLEAR_CACHE})},selectAllProductsFetchError:e=>e.productsData.error,selectProducts:e=>e.productsData,selectProductsFetchStatus:e=>e.productsData.fetchStatus,selectProductsError:e=>e.productsData.error,selectEnrolledCoursesLength:(0,r.P1)("selectProducts",e=>{if(e&&e.enrolledCourses){let{bundleIds:t,courseIds:s,mockTestIds:r,testSeriesIds:o}=e.enrolledCourses;if(!(t&&s&&r&&o))return 0;let n=t.length+s.length+r.length+o.length;return n}return 0}),selectProductsList:e=>e.productsData.courses,selectProductTags:e=>{var t;return null===(t=e.productsData)||void 0===t?void 0:t.courseTags},selectEnrolledProductTags:e=>e.productsData.enrolledCourseTags,selectAllProductTags:(0,r.P1)("selectProductTags","selectEnrolledProductTags",(e,t)=>{if(!e||!t)return{courseTags:[],mockTestTags:[],bundleTags:[],testSeriesTags:[],telegramTags:[],ebookTags:[],podcastTags:[],webinarTags:[],digitalProductTags:[],batchTags:[]};let s=[...null==e?void 0:e.courseTags,...null==t?void 0:t.courseTags],r=[...null==e?void 0:e.mockTestTags,...null==t?void 0:t.mockTestTags],o=[...null==e?void 0:e.bundleTags,...null==t?void 0:t.bundleTags],n=[...null==e?void 0:e.testSeriesTags,...null==t?void 0:t.testSeriesTags],i=[...null==e?void 0:e.telegramTags,...null==t?void 0:t.telegramTags],a=[...null==e?void 0:e.ebookTags,...null==t?void 0:t.ebookTags],l=[...null==e?void 0:e.podcastTags,...null==t?void 0:t.podcastTags],c=[...null==e?void 0:e.webinarTags,...null==t?void 0:t.webinarTags],u=[...null==e?void 0:e.digitalProductTags,...null==t?void 0:t.digitalProductTags],d=[...null==e?void 0:e.batchTags,...null==t?void 0:t.batchTags];return{courseTags:s,mockTestTags:r,bundleTags:o,testSeriesTags:n,telegramTags:i,ebookTags:a,podcastTags:l,webinarTags:c,digitalProductTags:u,batchTags:d}}),selectAllProductIds:e=>e.productsData.allProductIds,selectAllEnrolledIds:e=>e.productsData.allEnrolledIds,selectEnrolledCourses:e=>e.productsData.enrolledCourses,selectUnEnrolledCourses:e=>e.productsData.unEnrolledCourses,selectUnenrolledCourseIds:e=>e.productsData.unEnrolledCourses.courseIds,selectUnenrolledMocktestIds:e=>e.productsData.unEnrolledCourses.mockTestIds,selectUnenrolledBundleIds:e=>e.productsData.unEnrolledCourses.bundleIds,selectUnenrolledTestSeriesIds:e=>e.productsData.unEnrolledCourses.testSeriesIds,selectUnenrolledTelegramIds:e=>e.productsData.unEnrolledCourses.telegramIds,selectUnenrolledEbookIds:e=>e.productsData.unEnrolledCourses.ebookIds,selectUnenrolledPodcastIds:e=>e.productsData.unEnrolledCourses.podcastIds,selectUnenrolledWebinarIds:e=>e.productsData.unEnrolledCourses.webinarIds,selectUnenrolledDigitalProductIds:e=>e.productsData.unEnrolledCourses.digitalProductIds,selectUnenrolledBatchIds:e=>e.productsData.unEnrolledCourses.batchIds,selectEnrolledCourseIds:e=>e.productsData.enrolledCourses.courseIds,selectEnrolledMocktestIds:e=>e.productsData.enrolledCourses.mockTestIds,selectEnrolledBundleIds:(0,r.P1)("selectProducts",e=>e&&e.enrolledCourses?e.enrolledCourses.bundleIds:[]),selectEnrolledTestSeriesIds:e=>e.productsData.enrolledCourses.testSeriesIds,selectEnrolledTelegramIds:e=>e.productsData.enrolledCourses.telegramIds,selectEnrolledEbookIds:e=>e.productsData.enrolledCourses.ebookIds,selectEnrolledPodcastIds:e=>e.productsData.enrolledCourses.podcastIds,selectEnrolledWebinarIds:e=>e.productsData.enrolledCourses.webinarIds,selectEnrolledDigitalProductIds:e=>e.productsData.enrolledCourses.digitalProductIds,selectEnrolledBatchIds:e=>e.productsData.enrolledCourses.batchIds,selectCategoryData:e=>e.productsData.categoryData,selectCurrentCourseCategory:e=>e.productsData.currentCourseCategory,selectSegmentData:e=>e.productsData.segmentData,selectLegacyProducts:e=>e.productsData.legacyCourses,selectUnEnrolledCoursesLength:(0,r.P1)("selectProducts",e=>{if(e&&e.unEnrolledCourses){let{bundleIds:t,courseIds:s,mockTestIds:r,testSeriesIds:o,telegramIds:n,ebookIds:i,podcastIds:a,webinarIds:l,digitalProductIds:c,batchIds:u}=e.unEnrolledCourses;if(!(t&&s&&r&&o&&n&&i&&a&&l&&c&&u))return 0;let d=t.length+s.length+r.length+o.length+n.length+i.length+a.length+l.length+c.length+u.length;return d}return 0}),selectEnrolledCourseData:(0,r.P1)("selectEnrolledCourseIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledMockTestData:(0,r.P1)("selectEnrolledMocktestIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledTestSeriesData:(0,r.P1)("selectEnrolledTestSeriesIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledTelegramData:(0,r.P1)("selectEnrolledTelegramIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledEbookData:(0,r.P1)("selectEnrolledEbookIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledPodcastData:(0,r.P1)("selectEnrolledPodcastIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledWebinarData:(0,r.P1)("selectEnrolledWebinarIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledDigitalProductData:(0,r.P1)("selectEnrolledDigitalProductIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledBatchData:(0,r.P1)("selectEnrolledBatchIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledBundleData:(0,r.P1)("selectEnrolledBundleIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectEnrolledProductsData:(0,r.P1)("selectEnrolledCourseData","selectEnrolledMockTestData","selectEnrolledTestSeriesData","selectEnrolledBundleData","selectEnrolledTelegramData","selectEnrolledEbookData","selectEnrolledPodcastData","selectEnrolledWebinarData","selectEnrolledDigitalProductData","selectEnrolledBatchData",(e,t,s,r,o,n,i,a,l,c)=>[...e,...t,...s,...r,...o,...n,...i,...a,...l,...c]),selectUnEnrolledCourseData:(0,r.P1)("selectUnenrolledCourseIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledMockTestData:(0,r.P1)("selectUnenrolledMocktestIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledTestSeriesData:(0,r.P1)("selectUnenrolledTestSeriesIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledBundleData:(0,r.P1)("selectUnenrolledBundleIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledTelegramData:(0,r.P1)("selectUnenrolledTelegramIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledEbookData:(0,r.P1)("selectUnenrolledEbookIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledPodcastData:(0,r.P1)("selectUnenrolledPodcastIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledWebinarData:(0,r.P1)("selectUnenrolledWebinarIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledDigitalProductData:(0,r.P1)("selectUnenrolledDigitalProductIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledBatchData:(0,r.P1)("selectUnenrolledBatchIds","selectProductsList",(e,t)=>constructCoursesDataToRender(e,t)),selectUnEnrolledProductsData:(0,r.P1)("selectUnEnrolledCourseData","selectUnEnrolledMockTestData","selectUnEnrolledTestSeriesData","selectUnEnrolledBundleData","selectUnEnrolledTelegramData","selectUnEnrolledEbookData","selectUnEnrolledPodcastData","selectUnEnrolledWebinarData","selectUnEnrolledDigitalProductData","selectUnEnrolledBatchData",(e,t,s,r,o,n,i,a,l,c)=>[...e,...t,...s,...r,...o,...n,...i,...a,...l,...c]),reactShouldFetchProductBundleData:(0,r.P1)("selectProducts","selectAppTime","selectNavigationCurrentScreen","selectCanInternetFetchApiData","selectUserSegmentId","selectSharedIsUserLoggedIn","selectDetailsPageSegmentId","selectSegmentFetchStatus","selectCurrentSegment","selectViewerLocation",(e,t,s,r,i,a,l,c,u,d)=>{if(!d)return null;let S=!1;if(!(s===n.i_.HOME||s===n.i_.STORE||s===n.i_.CATEGORIES||s===n.i_.PRACTISE||s===n.i_.TESTS||s===n.i_.CLASSES||s===n.i_.CATGORY_FILTERED_PRODUCTS||s===n.i_.CATEGORIES||s===n.i_.GLOBAL_SEARCH||s===n.i_.COURSE_DETAILS||s===n.i_.SUBSCRIPTION_PLANS||s===n.i_.VIEW_ALL||s===n.i_.FAVOURITES||s===n.i_.COURSES_LIBRARY||s===n.i_.SEGMENT_BOARD&&l)||c===o.UK.IN_PROGRESS)return null;if(e.fetchStatus===o.UK.IDLE&&(S=!0),e.fetchStatus===o.UK.SUCCESS){let s=t-e.lastFetchTime;s>n.xU&&r&&(S=!0)}return(e.fetchStatus===o.UK.SUCCESS&&e.isDirtyData&&(S=!0),S)?{actionCreator:"doFetchProducts",args:[a,l||i||u]}:null})})},73766:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var r=s(97405),o=s(78445),n=s(73704);let setRecentlyAddedLessonData=(e,t)=>{if(!e.length)return[];let s=[];return e.map(e=>{s.push({courseId:e.course_id,createdAt:e.created_at,id:e.id,lessonType:e.lesson_type,sectionId:e.section_id,sectionTitle:e.section_title,title:e.title})}),s},i={fetchStatus:o.UK.IDLE,recentlyAddedLessons:[],error:null};var a=s(37648);let{RECENTLY_ADDED_LESSONS_FETCH:l,RECENTLY_ADDED_LESSONS_FETCH_SUCCESS:c,RECENTLY_ADDED_LESSONS_FETCH_FAILED:u}=o.coursesActions;var d={name:"recentlyAddedLessonsData",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.notifications.NAVIGATION_CHANGED:return i;case l:return{...e,fetchStatus:o.UK.IN_PROGRESS};case c:return{...e,fetchStatus:o.UK.SUCCESS,recentlyAddedLessons:setRecentlyAddedLessonData(t.response,e)};case u:return{...e,fetchStatus:o.UK.FAILED,error:t.error};case n.notifications.CLEAR_CACHE:case n.notifications.USER_SIGNEDIN:case n.notifications.USER_SIGNEDOUT:return i;default:return e}},doFetchRecentlyAddedLessons:e=>t=>{let{dispatch:r,httpApi:n}=t;r({type:l}),n.get(o.API_URLS.RECENTLY_ADDED_LESSON,{course_id:e}).then(e=>{let{response:t}=e;try{r({type:c,response:t})}catch(e){r({type:u,error:e}),s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:u,error:t})})},selectRecentlyAddedLessonsDataFetchStatus:e=>e.recentlyAddedLessonsData.fetchStatus,selectRecentlyAddedLessonsData:e=>e.recentlyAddedLessonsData.recentlyAddedLessons,selectRecentlyAddedLessonsDataError:e=>e.recentlyAddedLessonsData.error,reactShouldFetchRecentlyAddedLessons:(0,r.P1)("selectRecentlyAddedLessonsDataFetchStatus","selectCurrentCourseId","selectNavigationCurrentScreen",(e,t,s)=>{let r=!1;return(e===o.UK.IDLE&&t&&s===a.navigatorScreens.LESSON_PLAYER&&(r=!0),r)?{actionCreator:"doFetchRecentlyAddedLessons",args:[t]}:null})}},16647:function(e,t,s){"use strict";s.d(t,{Z:function(){return bundles_resumeMediaBundle}});var r=s(97405),o=s(78445);function resumeMediaData(){this.fetchStatus=o.UK.IDLE,this.cacheRestoreState=o.Zg.NOT_RESTORED,this.positionData={}}var n=s(98348);let handlePositionData=(e,t)=>{var s;let{fileId:r,currentPosition:{currentSlide:n,currentVideoTime:i,key:a},mediaType:l}=t,c="?link:".concat(n,":").concat(i,":").concat(a),u="".concat(t.courseId,".").concat(t.lessonId),d=null===(s=e.positionData[u])||void 0===s?void 0:s.filePositions;return delete e.positionData[u],e.positionData[u]={serverFileId:r,link:c,mediaType:l,filePositions:{...null!=d?d:{},[r]:{link:c}}},Object.keys(e.positionData).length>o.e8.LOCAL_ENTRIES_LIMIT&&delete e.positionData[Object.keys(e.positionData)[0]],e};var i=s(73704),bundles_resumeMediaBundle=e=>({name:"resumeMediaData",getReducer:()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||new resumeMediaData,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case n.PS.COURSE_TIME_CONSUMED:return handlePositionData(t,s.data);case o.CJ.RESTORE_RESUME_MEDIA_DATA:return{...t,cacheRestoreState:o.Zg.RESTORING};case o.CJ.RESTORE_RESUME_MEDIA_DATA_SUCCESS:return{...s.data,cacheRestoreState:o.Zg.RESTORED};case o.CJ.RESTORE_RESUME_MEDIA_DATA_FAILURE:return{...t,cacheRestoreState:o.Zg.RESTORE_FAILED};case i.notifications.USER_SIGNEDOUT:return new resumeMediaData;default:return t}},doRestoreResumeMediaData:()=>e=>{let{dispatch:t,persist:s}=e;t({type:o.CJ.RESTORE_RESUME_MEDIA_DATA}),s.getValue("resumeMediaData:data",o.e8.CACHE_VERSION,8760).then(e=>{if(e)t({type:o.CJ.RESTORE_RESUME_MEDIA_DATA_SUCCESS,data:e});else throw Error("No local data")}).catch(e=>{t({type:o.CJ.RESTORE_RESUME_MEDIA_DATA_FAILURE,error:e})})},selectResumeMediaCacheRestoreState:e=>e.resumeMediaData.cacheRestoreState,selectResumeMediaPositionData:e=>e.resumeMediaData.positionData,selectResumeMediaCurrentLessonPosition:(0,r.P1)("selectCurrentCourseId","selectCurrentLessonId","selectResumeMediaPositionData","selectNavigationCurrentScreen",(e,t,s)=>s["".concat(e,".").concat(t)]),selectResumeMediaLastLessonForCourse:(0,r.P1)("selectCurrentCourseId","selectResumeMediaPositionData","selectNavigationCurrentScreen",(e,t)=>{let s=Object.keys(t).filter(t=>t.includes("".concat(e,"."))).map(e=>+e.split(".")[1]);return s.length?s[s.length-1]:null}),selectResumeMediaCurrentLessonSlidePositions:(0,r.P1)("selectCurrentCourseId","selectCurrentLessonId","selectCurrentLessonDetails","selectResumeMediaPositionData","selectNavigationCurrentScreen",(e,t,s,r)=>{var o,n;return null!==(n=null==s?void 0:null===(o=s.slides)||void 0===o?void 0:o.slideIds.map(o=>{var n,i,a,l,c;let u=null==s?void 0:null===(a=s.slides)||void 0===a?void 0:null===(i=a.slideDetails)||void 0===i?void 0:null===(n=i[o])||void 0===n?void 0:n.fileId;return null===(c=r["".concat(e,".").concat(t)])||void 0===c?void 0:null===(l=c.filePositions)||void 0===l?void 0:l[u]}))&&void 0!==n?n:[]}),persistActions:[n.PS.COURSE_TIME_CONSUMED,i.notifications.USER_SIGNEDOUT],persistVersion:o.e8.CACHE_VERSION,persistFunc:(e,t,s)=>{let r=[],o="".concat(e,":data");return s.type===n.PS.COURSE_TIME_CONSUMED&&r.push({key:o,value:t}),s.type===i.notifications.USER_SIGNEDOUT&&r.push({key:o,value:null}),r},reactShouldRestoreResumeMediaData:(0,r.P1)("selectSharedIsUserLoggedIn","selectResumeMediaCacheRestoreState",(e,t)=>e&&t===o.Zg.NOT_RESTORED?{actionCreator:"doRestoreResumeMediaData"}:null)})},15957:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var r=s(97405),o=s(37648),n=s(78445),i=s(73704);let a={reviewDetails:{}};function SetReviewsData(e){this.reviewId=e.reviewId,this.createdAt=e.createdAt,this.comment=e.comment,this.rating=e.rating,this.userName=e.userName,this.profilePhoto=e.profilePhoto,this.approvedStatus=e.approvedStatus}function SetReviewDetails(e){this.allReviews=e.allReviews,this.ratings=e.ratings,this.fetchStatus=e.fetchStatus,this.error=e.error||null,this.currentPage=e.currentPage,this.totalMatchedPages=e.totalMatchedPages,this.totalMatchedRecords=e.totalMatchedRecords,this.isCurrentUserReviewed=e.isCurrentUserReviewed,this.noOfUsersRated=e.noOfUsersRated,this.lastFetchTime=e.lastFetchTime}var l=s(53794);let setReviewDetailsOnSuccess=(e,t,s,r,o)=>{let{reviews:i}=e,a=e.my_review,c=[];i.forEach(e=>{let t={reviewId:e.id,createdAt:e.created_at,comment:(0,l.eC)(e.comment),rating:e.rating,userName:e.user.name,profilePhoto:e.user.profile_photo_file_name,approvedStatus:1};r!==e.user_id&&c.push(new SetReviewsData(t))});let u={};a&&(u={reviewId:a.id,createdAt:a.created_at,comment:(0,l.eC)(a.comment),rating:a.rating,userName:s,profilePhoto:o,approvedStatus:a.approve_status},c.unshift(new SetReviewsData(u)));let d={},{ratings:S}=e,_=getRatingPercentage(S);return d[t]=new SetReviewDetails({allReviews:c,ratings:_.ratingsPercent,fetchStatus:n.UK.SUCCESS,currentPage:e.summary.page_number,totalMatchedPages:e.summary.total_matched_pages,totalMatchedRecords:e.summary.total_matched_records,isCurrentUserReviewed:!!a,noOfUsersRated:_.total,lastFetchTime:Date.now()}),d},concateReviewDetailsOnSuccess=(e,t,s,r)=>{let o={...s},i={...o[t]},a=i.allReviews?[...i.allReviews]:[],{reviews:c}=e;return c.forEach(e=>{let t={reviewId:e.id,createdAt:e.created_at,comment:(0,l.eC)(e.comment),rating:e.rating,userName:e.user.name,approvedStatus:1};r!==e.user_id&&a.push(new SetReviewsData(t))}),o[t]={...i,allReviews:a,currentPage:e.summary.page_number,totalMatchedPages:e.summary.total_matched_pages,totalMatchedRecords:e.summary.total_matched_records,fetchStatus:n.UK.SUCCESS,lastFetchTime:Date.now()},o},changeCurrentUserReview=(e,t,s,r)=>{let o={...s[e]},i=o.allReviews?[...o.allReviews]:[],a={reviewId:t.id,createdAt:t.created_at,comment:(0,l.eC)(t.comment),rating:t.rating,userName:r,approvedStatus:0};i[0]&&i[0].reviewId===t.id?i[0]=new SetReviewsData(a):i.unshift(new SetReviewsData(a));let c={};return c[e]={...o,allReviews:i,fetchStatus:n.UK.SUCCESS,isCurrentUserReviewed:!0},{...s,...c}},setreviewApiRequestInit=(e,t)=>{let s={...t};return s[e]={...s[e],fetchStatus:n.UK.IN_PROGRESS},s},setreviewApiRequestFailed=(e,t,s)=>{let r={...t};return r[e]={...r[e],fetchStatus:n.UK.FAILED,error:s},r},restoreReviewFromCache=(e,t,s)=>{let r={};return r[s]={...t},{...e,...r}},getRatingPercentage=e=>{let t={one:0,two:0,three:0,four:0,five:0};e["0.5"]&&(t.one+=e["0.5"]),e["1.0"]&&(t.one+=e["1.0"]),e["1.5"]&&(t.two+=e["1.5"]),e["2.0"]&&(t.two+=e["2.0"]),e["2.5"]&&(t.three+=e["2.5"]),e["3.0"]&&(t.three+=e["3.0"]),e["3.5"]&&(t.four+=e["3.5"]),e["4.0"]&&(t.four+=e["4.0"]),e["4.5"]&&(t.five+=e["4.5"]),e["5.0"]&&(t.five+=e["5.0"]);let s=Object.values(t).reduce((e,t)=>e+t),r={five:0===t.five?0:Math.round(t.five/s*100),four:0===t.four?0:Math.round(t.four/s*100),three:0===t.three?0:Math.round(t.three/s*100),two:0===t.two?0:Math.round(t.two/s*100),one:0===t.one?0:Math.round(t.one/s*100)};return{total:s,ratingsPercent:r}};var c=s(81851);let{REVIEW_API_REQUEST:u,REVIEW_API_FAILURE:d,REVIEW_API_SUCCESS:S,UPDATE_REVIEW_API:_,ADD_REVIEW_API:E,REVIEW_RESTORE_FROM_CACHE:D,FETCH_MORE_REVIEW_API_SUCCESS:p,DELETE_REVIEW_API:T}=n.reviewApiAtions,{USER_SIGNEDIN:C,USER_SIGNEDOUT:h,CLEAR_CACHE:I,NAVIGATION_CHANGED:m}=i.notifications,{REVIEW_URL:f}=n.API_URLS;var g={name:"reviewBundle",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{...e,reviewDetails:setreviewApiRequestInit(t.courseId,e.reviewDetails)};case S:return{...e,reviewDetails:setReviewDetailsOnSuccess(t.response,t.courseId,t.userName,t.userId,t.userProfilePhoto)};case p:return{...e,reviewDetails:concateReviewDetailsOnSuccess(t.response,t.courseId,e.reviewDetails,t.userId)};case d:return{...e,reviewDetails:setreviewApiRequestFailed(t.courseId,e.reviewDetails,t.error)};case _:case E:return{...e,reviewDetails:changeCurrentUserReview(t.courseId,t.response,e.reviewDetails,t.userName)};case T:return{...e};case D:return{...e,reviewDetails:restoreReviewFromCache(e.reviewDetails,t.courses,t.courseId)};case C:case h:case I:case m:return t.currentScreen!==i.i_.COURSE_DETAILS&&t.currentScreen!==i.i_.LESSON_PLAYER&&t.currentScreen!==i.i_.SCHOOL_REVIEW?e:a;default:return e}},selectReviewData:e=>e.reviewBundle.reviewDetails,selectCurrentReviewData:(0,r.P1)("selectCurrentCourseId","selectCurrentBundleId","selectReviewData","selectNavigationCurrentScreen",(e,t,s,r)=>{let o=null;return r===i.i_.BATCH_RATING_REVIEW?o=s[t]:e?o=s[e]:t&&(o=s[t]),o}),selectSchoolReviewData:(0,r.P1)("selectReviewData",e=>e[o.ke]),doFetchReviews:(e,t,r,o,n,i,a,l)=>a=>{let{dispatch:l,httpApi:_,persist:E}=a;!function(a){let E="".concat(f),p={course_id:e,page_number:t,per_page:r,school_id:c.customerConfig.SCHOOL_ID};i&&(p.user_id=n),l({type:u,courseId:e}),_.get(E,p).then(t=>{let{response:r}=t;try{l({type:S,response:r,courseId:e,userName:o,userId:n})}catch(e){s.g.bugsnag.notify(e)}}).catch(t=>{let{error:s}=t;a?l({type:D,courses:a,courseId:e}):l({type:d,courseId:e,error:s})})}()},doFetchMoreReviews:(e,t,r,o)=>n=>{let{dispatch:i,httpApi:a}=n;i({type:u,courseId:e});let l="".concat(f),S={course_id:e,page:t,per_page:r,school_id:c.customerConfig.SCHOOL_ID};o&&(S.user_id=o),a.get(l,S).then(t=>{let{response:r}=t;try{i({type:p,response:r,courseId:e,userId:o})}catch(e){s.g.bugsnag.notify(e)}}).catch(t=>{let{error:s}=t;i({type:d,courseId:e,error:s})})},doUpdateReviews:e=>t=>{let{dispatch:r,httpApi:o}=t,n=e.course_id,{userName:i,comment:a,rating:l,reviewId:S}=e;r({type:u,courseId:n});let E="".concat(f,"/").concat(S),D={course_id:n,comment:a,rating:l,school_id:c.customerConfig.SCHOOL_ID};o.patch(E,D).then(e=>{let{response:t}=e;try{r({type:_,response:t,courseId:n,userName:i})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:d,courseId:n,error:t})})},doAddReviews:e=>t=>{let{dispatch:r,httpApi:o}=t,n=e.course_id,{userName:i,comment:a,rating:l}=e;r({type:u,courseId:n});let S="".concat(f),_={course_id:n,comment:a,rating:l,school_id:c.customerConfig.SCHOOL_ID};o.post(S,_).then(e=>{let{response:t}=e;try{r({type:E,response:t,courseId:n,userName:i})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:d,courseId:n,error:t})})},doDeleteReview:e=>t=>{let{dispatch:r,httpApi:o}=t,n=e.course_id,{userName:i,comment:a,rating:l,reviewId:S}=e;r({type:u,courseId:n});let _="".concat(f,"/").concat(S),E={course_id:n,comment:a,rating:l,school_id:c.customerConfig.SCHOOL_ID};o.delete(_,null,E).then(e=>{let{response:t}=e;try{r({type:T,response:t,courseId:n,reviewId:S})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;r({type:d,courseId:n,error:t})})},reactShouldFetchReviewBundleData:(0,r.P1)("selectCurrentBundleDetails","selectCurrentCourseDetails","selectCurrentBundleId","selectCurrentCourseId","selectAppTime","selectNavigationCurrentScreen","selectSharedUserName","selectSharedUserId","selectSharedUserProfilePhoto","selectSharedIsUserLoggedIn","selectCurrentReviewData","selectCanInternetFetchApiData",(e,t,s,r,o,a,l,c,u,d,S,_)=>{let E=!1;if(!(a===i.i_.LESSON_PLAYER||a===i.i_.COURSE_DETAILS||a===i.i_.COURSE_REVIEW||a===i.i_.ADD_REVIEW||a===i.i_.BATCH_RATING_REVIEW||a===i.i_.BATCH_ABOUT))return null;let D=0,p=!1;if(a===i.i_.BATCH_RATING_REVIEW?e&&s&&(D=s,p=e.isReviewsEnabled):!r&&s&&e?(D=s,p=e.isReviewsEnabled):r&&t&&(D=r,p=t.isReviewsEnabled),!p)return null;if(S&&S.fetchStatus===n.UK.IDLE&&(E=!0),S&&S.fetchStatus===n.UK.SUCCESS){let e=o-S.lastFetchTime;e>i.xU&&_&&(E=!0)}S||(E=!0);let T=n.WI;return E?{actionCreator:"doFetchReviews",args:[D,1,T,l,c,d,o,_]}:null}),reactShouldFetchSchoolReviewData:(0,r.P1)("selectAppTime","selectNavigationCurrentScreen","selectSharedUserName","selectSharedUserId","selectSharedIsUserLoggedIn","selectSchoolReviewData","selectCanInternetFetchApiData",(e,t,s,r,a,l,c)=>{let u=!1;if(t!==i.i_.SCHOOL_REVIEW)return null;if(l||(u=!0),l&&l.fetchStatus===n.UK.IDLE&&(u=!0),l&&l.fetchStatus===n.UK.SUCCESS){let t=e-l.lastFetchTime;t>i.xU&&c&&(u=!0)}let d=n.WI;return u?{actionCreator:"doFetchReviews",args:[o.ke,1,d,s,r,a,e,c]}:null})}},19983:function(e,t,s){"use strict";var r=s(97405),o=s(78445),n=s(37648),i=s(54568),a=s(3002),l=s(1496),c=s(81851);let{SEGMENT_API_REQUEST:u,SEGMENT_API_SUCCESS:d,SEGMENT_API_FAILURE:S,SET_SEGMENT_REQUEST:_,SET_SEGMENT_SUCCESS:E,SET_SEGMENT_FAILURE:D,REMOVE_SEGMENT_REQUEST:p,REMOVE_SEGMENT_SUCCESS:T,REMOVE_SEGMENT_FAILURE:C,SET_CURRENT_SEGMENT:h,SET_SEGMENT_DETAILS_PATH:I,FETCH_SEGMENT_PRODUCTS:m}=o.segmentActions,{SET_USER_SEGMENT_ID:f,SET_VISITOR_SEGMENT:g}=l.authActions,{SEGMENT_URL:y}=o.API_URLS,{NAVIGATION_CHANGED:A,USER_SIGNEDOUT:N,USER_SIGNEDIN:R}=n.notifications;t.Z={name:"segmentData",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:if(t.currentScreen===n.navigatorScreens.SIGNIN||t.currentScreen===n.navigatorScreens.SIGN_UP_AUTH&&!e.currentSegment)return{...e,currentSegment:t.params.segmentId||e.currentSegment||t.params.segment||null,visitorSegmentId:t.params.segmentId||e.currentSegment||t.params.segment||null,currentSegmentPath:t.params.segmentPath||e.currentSegmentPath||t.params.path||null};return{...e,fetchStatus:o.UK.IDLE,currentSegmentSlug:t.params.customSegmentSlug,segmentState:t.currentScreen===n.navigatorScreens.SEGMENT_BOARD?o.zj.FETCH_SEGMENT_BY_SLUG:t.currentScreen===n.navigatorScreens.SEGMENT?o.zj.FETCH_SEGMENTS:e.segmentState};case u:return{...e,fetchStatus:o.UK.IN_PROGRESS};case d:return{...e,fetchStatus:o.UK.SUCCESS,segmentState:o.zj.FETCH_SEGMENTS,segmentList:(0,i.Vx)(t.data),segmentOrder:(0,i.Am)(t.data)};case S:return{...e,fetchStatus:o.UK.FAILED,error:t.data};case _:return{...e,fetchStatus:o.UK.IN_PROGRESS};case E:return{...e,segmentState:t.state,fetchStatus:o.UK.SUCCESS};case D:return{...e,fetchStatus:o.UK.FAILED,error:t.data};case p:return{...e,fetchStatus:o.UK.IN_PROGRESS};case T:return{...e,segmentState:o.zj.REMOVE_SEGMENT,fetchStatus:o.UK.SUCCESS};case C:return{...e,fetchStatus:o.UK.FAILED,error:t.data};case h:return{...e,currentSegment:t.data};case I:return{...e,currentSegmentPath:t.data};case N:if(e.currentSegmentSlug)return{...e,detailsPageSegmentId:e.currentSegment};return{...e};case R:var s,r,c;return{...e,visitorSegmentId:(null==t?void 0:null===(s=t.params)||void 0===s?void 0:s.data.segment)||e.visitorSegmentId||0,currentSegmentPath:(null==t?void 0:null===(r=t.params)||void 0===r?void 0:r.data.segment_path)||e.currentSegmentPath||null,currentSegment:(null==t?void 0:null===(c=t.params)||void 0===c?void 0:c.data.segment)||e.visitorSegmentId||0};case m:return{...e,detailsPageSegmentId:t.data};case l.authActions.SET_VISITOR_SEGMENT:return{...e,visitorSegmentId:t.data};case n.notifications.REMOVE_LOCAL_SEGMENT:return{...e,...new a.S};default:return e}},doFetchSegments:()=>e=>{let{dispatch:t,httpApi:s}=e,r={school_id:c.customerConfig.SCHOOL_ID};t({type:u}),s.get(y,r).then(e=>{let{response:s}=e;try{t({type:d,data:s})}catch(e){t({type:S,data:e})}}).catch(e=>{t({type:S,data:e})})},doSetSegment:(e,t,s)=>r=>{let{dispatch:i,httpApi:a}=r;i({type:_}),s?a.patch("".concat(y,"/").concat(e),{segment_path:t,segment_id:e}).then(t=>{let{response:s}=t;try{i({type:f,data:e}),i({type:E,state:o.zj.SET_SEGMENT}),i({type:m,data:e}),i({type:n.notifications.CLEAR_CACHE})}catch(e){i({type:D,data:e})}}).catch(e=>{i({type:D,data:e})}):(i({type:g,data:e}),i({type:n.notifications.CLEAR_CACHE}),i({type:E,state:o.zj.SET_GUEST_SEGMENT}),i({type:m,data:e}),i({type:I,data:t}))},doRemoveLocalSegment:()=>e=>{let{dispatch:t}=e;t({type:n.notifications.REMOVE_LOCAL_SEGMENT})},doRemoveSelectedSegment:e=>t=>{let{dispatch:s,httpApi:r}=t;s({type:p}),r.patch("".concat(y,"/").concat(e),{remove_user_from_segment:!0}).then(e=>{let{response:t}=e;try{s({type:T})}catch(e){s({type:C,data:e})}}).catch(e=>{s({type:C,data:e})})},doSetCurrentSegment:e=>t=>{let{dispatch:s}=t;s({type:h,data:e})},doSetDetailsPageSegmentId:e=>t=>{let{dispatch:s}=t;s({type:m,data:e})},doSetDetailsPageSegmentPath:e=>t=>{let{dispatch:s}=t;s({type:I,data:e})},selectVisitorSegmentId:e=>e.segmentData.visitorSegmentId,selectSegmentFetchStatus:e=>e.segmentData.fetchStatus,selectSegmentError:e=>e.segmentData.error,selectSegmentState:e=>e.segmentData.segmentState,selectSegmentList:e=>e.segmentData.segmentList,selectSegmentOrder:e=>e.segmentData.segmentOrder,selectCurrentSegment:e=>e.segmentData.currentSegment,selectCurrentSegmentPath:e=>e.segmentData.currentSegmentPath,selectCurrentSegmentSlug:e=>e.segmentData.currentSegmentSlug,selectDetailsPageSegmentId:e=>e.segmentData.detailsPageSegmentId,reactShouldFetchSegments:(0,r.P1)("selectSegmentFetchStatus","selectNavigationCurrentScreen","selectSegmentState",(e,t,s)=>(t===n.navigatorScreens.SEGMENT||t===n.navigatorScreens.SEGMENT_BOARD)&&e===o.UK.IDLE&&(s===o.zj.FETCH_SEGMENTS||s===o.zj.FETCH_SEGMENT_BY_SLUG)?{actionCreator:"doFetchSegments"}:null)}},3002:function(e,t,s){"use strict";s.d(t,{S:function(){return SegmentsData},X:function(){return Segment}});var r=s(78445);function SegmentsData(){this.segmentList={},this.segmentOrder=[],this.fetchStatus=r.UK.IDLE,this.error={errorCode:0,errorMessage:""},this.segmentState=r.zj.INITIAL,this.currentSegment=null,this.currentSegmentPath="",this.currentSegmentSlug="",this.detailsPageSegmentId=null}function Segment(e){this.id=e.id,this.name=e.name,this.description=e.description,this.status=e.status,this.subSegmentOrder=e.subSegmentOrder,this.ancestry=e.ancestry,this.productType=e.productType,this.segmentImage=e.segmentImage,this.coverImage=e.coverImage,this.shortDescription=e.shortDescription,this.productOrder=e.productOrder||[],this.segmentType=e.segmentType,this.segmentPath=e.segmentPath,this.segmentSlug=e.segmentSlug}},67717:function(e,t,s){"use strict";s.d(t,{vw:function(){return ActivateScreenWake},z9:function(){return DeactivateScreenWake},sz:function(){return GetWindowLayoutSize},ud:function(){return LockOrientationToPortrait},a8:function(){return LstSlider},$X:function(){return addToScannedFiles},T6:function(){return cancelCurrentDownload},p_:function(){return checkReadWritePermissionsForDirectory},bm:function(){return i.bm},c1:function(){return deleteFiles},Sv:function(){return downloadFile},ri:function(){return r.ri},UK:function(){return r.UK},R:function(){return n.R},ec:function(){return getCurrentDownloadingFileId},kR:function(){return getInAppPurchaseData},lD:function(){return getScannedFileList},a$:function(){return getStoragePath},Jf:function(){return n.Jf},Bv:function(){return n.Bv},$2:function(){return r.$2},zI:function(){return reattachToDownload},_E:function(){return scanListOfDownloadedFiles},zo:function(){return o}});var r=s(78445);let o={fileListByFileId:{},fileSizeStats:{}};function getStoragePath(e,t){}async function checkReadWritePermissionsForDirectory(e){}async function deleteFiles(e){}async function addToScannedFiles(e,t){}async function scanListOfDownloadedFiles(e){}function getScannedFileList(){return o}function downloadFile(e,t,s,r){}function cancelCurrentDownload(){}function getCurrentDownloadingFileId(){}async function reattachToDownload(e,t,s){}var n=s(41559);s(26255),s(71605),s(63720),s(45516);var i=s(47746);s(6374),s(27208),s(70862),s(13270),s(63338);let getInAppPurchaseData=()=>({});s(59876),s(59339),s(66148),s(15957),s(19983),s(16647),s(91407),s(73766);let ActivateScreenWake=()=>{},DeactivateScreenWake=()=>{},GetWindowLayoutSize=()=>({width:0,height:0}),LockOrientationToPortrait=()=>{},LstSlider=()=>null},73462:function(){},59876:function(e,t,s){"use strict";s.d(t,{$G:function(){return setCourseAccessDataFetchProgress},D$:function(){return updateLikeIdForLesson},Ds:function(){return setCurrentProductTypeOnFetch},Eg:function(){return setDirtyFlag},Fz:function(){return setCourseAccessData},Jk:function(){return validateCurrentAccesingLessons},Jn:function(){return changeTrailSignedUrlToPaid},LK:function(){return clearCache},Mw:function(){return setCourseAnalyticsData},Of:function(){return getEnrollmentState},Rf:function(){return getContinuousWatchThreshold},Tv:function(){return setLiveLessonAttendance},Zs:function(){return setCurrentAccessingLessonData},a4:function(){return setCourseWatchTimeDetails},ae:function(){return updateLessonDetails},dK:function(){return isTestResultPublished},gH:function(){return getInAppPurchaseDetails},gQ:function(){return setTimeOffset},gw:function(){return getColorAndTopicSwot},hF:function(){return getUserActivationType},hM:function(){return setSubscriptionAccessDetails},hP:function(){return setAccessDataError},lx:function(){return setCourseDetails},nC:function(){return getAchievementdataBasedOnType},oB:function(){return checkRootPathForMedia},ol:function(){return resetCourseBundleStateOnNavigationChanged},pz:function(){return setCourseIdAndBundleId},qJ:function(){return setPlayerData},qR:function(){return setFetchProgress},sT:function(){return setError},sy:function(){return checkCurrentCourseHasAccessToPlayOnCurrentDevice},uw:function(){return updateRemainingCourseTime},vz:function(){return getPlayTimeState},wU:function(){return checkIsSTHLesson},xj:function(){return checkIsCourseExpired}});var r=s(30454),o=s.n(r),n=s(61320),i=s.n(n),a=s(93050),l=s(78445),c=s(48098),u=s(73704),d=s(81851);s(37648);var S=s(67717),_=s(57459),E=s(47746),D=s(53794);let isResultScheduled=e=>e&&new Date(e)>Date.now()?e:null,changeTrailSignedUrlToPaid=e=>e?e.replace("/trial/","/paid/"):null,setFetchProgress=(e,t)=>(e[t]?e[t]={...e[t],fetchStatus:l.UK.IN_PROGRESS}:e[t]={fetchStatus:l.UK.IN_PROGRESS,error:{errorCode:0,errorMessage:null},cacheRestoreState:l.Zg.NOT_RESTORED},{...e,...e}),setCourseAccessDataFetchProgress=(e,t)=>(e[t]||(e[t]=new c.T0),e[t]={...e[t],courseAccessFetchStatus:l.UK.IN_PROGRESS},{...e,...e}),setCurrentAccessingLessonData=function(e,t,s,r,o,n,i){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(!t||!s)return e;let c={};return c[t]={sectionId:Number(s),lessonId:Number(r)||0,autoScrollLessonTs:i?parseInt(i):0,initialSlideIdx:o?parseInt(o):0,initialSlideSeekPos:n?parseInt(n):0,isAutoPlay:a,isLessonLocked:l},{...e,...c}},updateLessonDetails=(e,t)=>{var s;let r=null==e?void 0:e.coursesDetails[t.courseId],o=null==r?void 0:null===(s=r.courseDetails)||void 0===s?void 0:s.lessons,n=null==o?void 0:o.lessonDetails[t.lessonId];return n.isLessonLocked=t.isLessonLocked,{...e.coursesDetails}},clearCache=e=>{let t={};return Object.keys(e).forEach(s=>{t[s]={...e[s],fetchStatus:l.UK.IDLE,courseAccessFetchStatus:l.UK.IDLE,courseDetails:null}}),{...e,...t}},setDirtyFlag=(e,t)=>{if(!t)return{...e};let s={...e};return t.forEach(e=>{if(s[e]){let t=s[e].courseDetails;s[e]={...s[e],courseDetails:{...t,isDirtyData:!0}}}}),{...e,...s}},setError=(e,t,s)=>{let r={...e[t],courseDetails:{...e[t].courseDetails,isDirtyData:!1}};return e[t]={...r,fetchStatus:l.UK.FAILED,error:(null==s?void 0:s.error)?s.error:s},{...e,...e}},setAccessDataError=(e,t,s)=>(e[t]={...e[t],courseAccessFetchStatus:l.UK.FAILED,error:s},{...e,...e}),updateRemainingCourseTime=(e,t)=>{var s,r,o,n;let i=e[t.courseId],a=null==i?void 0:null===(r=i.courseDetails)||void 0===r?void 0:null===(s=r.coursePlayTimeRestrictionDetails)||void 0===s?void 0:s.isPlayTimeRestrictionEnabled;if(i&&a){let e=null==i?void 0:null===(n=i.courseDetails)||void 0===n?void 0:null===(o=n.coursePlayTimeRestrictionDetails)||void 0===o?void 0:o.remainingAllocatedTime;!t.isTrial&&e&&t.mediaType===l.vE.AUDIO_VIDEO&&(e-=t.timeWatched)<0&&(e=0),i.courseDetails.coursePlayTimeRestrictionDetails.remainingAllocatedTime=e,i.courseDetails.coursePlayTimeRestrictionDetails.playTimeState=getPlayTimeState(e,!0)}return e[t.courseId]=i,{...e}},resetCourseBundleStateOnNavigationChanged=(e,t)=>{let{params:s,currentScreen:r,prevScreen:o,isForwardNavigation:n}=t,{courseType:i,courseId:u,bundleId:d,batchId:S,subProductSeo:_,productSeo:E,sectionId:D,lessonId:p,initialSlideIdx:T,initialSlideSeekPos:C,autoScrollLessonTs:h,testSeriesAnalyticsSectionId:I}=s,m=Number(u)||0,[f,g,y]=[Number(d)||Number(S)||0,Number(D)||0,Number(p)||0],A={...e.coursesDetails};if((o===a.i_.COURSE_DETAILS||o===a.i_.LESSON_PLAYER||o===a.i_.BATCH_DASHBOARD||o===a.i_.BATCH_SCHEDULE||o===a.i_.BATCH_CONTENT||o===a.i_.BATCH_DISCUSSION_CIRCLE||o===a.i_.CHECKOUT)&&r!==a.i_.COURSE_DETAILS&&r!==a.i_.LESSON_PLAYER&&r!==a.i_.COURSE_ANALYTICS&&r!==a.i_.SUBSCRIPTIONS&&!n)return{...e,currentCourseId:0,currentCourseSeo:null,currentBundleId:0,currentBundleSeo:null,currentCourseAccessBundleId:0,updateLeaderBoardStatus:l.UK.IDLE};let N=!!(Number(m)&&Number(f)),{seoToIdFetchStatus:R}=e;(!(m||f)&&(E||_)||m===l.$2)&&(R=l.UK.IDLE,m=l.$2);let P={...e.currentAccesingLessons},L={...e.courseAnalyticsData},v=P[m]?P[m].lessonId:0;return m&&g&&(P[m]={sectionId:g,lessonId:n?y||0:v,autoScrollLessonTs:h?parseInt(h,10):0,initialSlideIdx:T?parseInt(T,10):0,initialSlideSeekPos:C?parseInt(C,10):0}),m&&e[m]&&e[m].fetchStatus===l.UK.FAILED&&n&&(A[m]={...e[m],fetchStatus:l.UK.IDLE,error:{errorCode:0,errorMessage:null}}),m&&n&&(A[m]={...new c.T0,...A[m]||{},fetchStatus:l.UK.IDLE,courseAccessFetchStatus:l.UK.IDLE,error:{errorCode:0,errorMessage:null},cacheRestoreState:l.Zg.NOT_RESTORED}),{coursesDetails:{...A},currentCourseType:Number(i)||e.currentCourseType||0,currentProductType:Number(i)||e.currentProductType||0,isCurrentCourseFromBundle:N,currentCourseId:m===l.$2?0:m||e.currentCourseId,currentCourseSeo:i&&(i===l.courseType.BUNDLE||i===l.courseType.BATCH)?null:_||E||e.currentCourseSeo,currentBundleId:f||0,currentBundleSeo:i&&i!==l.courseType.BUNDLE&&i!==l.courseType.BATCH?null:E||null,currentAccesingLessons:{...P},currentTestSeriesAnalyticsSectionId:Number(I)||e.currentTestSeriesAnalyticsSectionId||0,seoToIdFetchStatus:R,courseAnalyticsData:{...L},autoEnrollmentData:{},updateLeaderBoardStatus:l.UK.IDLE,updateTelegramJoinLinkTimer:!1}},setCurrentProductTypeOnFetch=(e,t,s,r)=>r&&(r===a.i_.GLOBAL_SEARCH||r===a.i_.COURSE_DETAILS)?e:s&&(t===l.courseType.BUNDLE||t===l.courseType.BATCH||t===l.courseType.SUBSCRIPTION_BUNDLE||t===l.courseType.SUBSCRIPTION_TIER_BUNDLE)&&0!==e?e:t,checkCurrentCourseHasAccessToPlayOnCurrentDevice=e=>!!a.I6&&!!(e&l.Mg.ANDROID)||!!a.Od&&!!(e&l.Mg.IOS)||!!a.SD&&!!(e&l.Mg.WEB),checkIsCourseExpired=(e,t)=>{let s=new Date;if(e||t){let r;if(e&&(r=new Date(e)).setHours(23,59,59,999),t&&(r=new Date(t)),r.getTime()<s.getTime())return!0}return!1},setCourseEvents=e=>{let t=[];return null==e||e.forEach(e=>{t.push({title:null==e?void 0:e.title,description:null==e?void 0:e.description})}),t},getEnrollmentState=(e,t,s)=>s||(e?l.ri.PURCHASED:t?l.ri.ENROLLED:l.ri.NOT_ENROLLED),calculateNoOfFreeLessons=e=>{if(e.course_type===l.courseType.COURSE||e.course_type===l.courseType.TEST_SERIES||e.course_type===l.courseType.EBOOK||e.course_type===l.courseType.PODCAST||e.course_type===l.courseType.WEBINAR||e.course_type===l.courseType.DIGITAL_PRODUCT||e.course_type===l.courseType.TRACK){if(e.lessons&&0===e.lessons.length)return 0;let t=e.lessons.filter(e=>!0===e.is_trial);return t.length}if(e.course_type===l.courseType.BUNDLE||e.course_type===l.courseType.BATCH||e.course_type===l.courseType.SUBSCRIPTION_BUNDLE||e.course_type===l.courseType.SUBSCRIPTION_TIER_BUNDLE){let t=0;return e.bundle_courses.forEach(e=>{e.trial_lessons_count>0&&(t+=1)}),t}return 0},calculateNoOfFreeCourses=(e,t)=>e&&0===e.length?0:t===l.courseType.BATCH?e.filter(e=>!0===e.is_free&&e.course_type!==l.courseType.TRACK).length:e.filter(e=>!0===e.is_free).length,getBundleCourses=e=>{let t=setDetailsForBundles(e.bundle_courses,l.courseType.COURSE,"coursesDetails","coursesIds"),s=setDetailsForBundles(e.bundle_courses,l.courseType.TEST_SERIES,"testSeriesDetails","testSeriesIds"),r=setDetailsForBundles(e.bundle_courses,l.courseType.TEST,"testsDetails","testsIds"),o=setDetailsForBundles(e.bundle_courses,l.courseType.EBOOK,"ebooksDetails","ebooksIds"),n=setDetailsForBundles(e.bundle_courses,l.courseType.PODCAST,"podcastsDetails","podcastsIds"),i=setDetailsForBundles(e.bundle_courses,l.courseType.WEBINAR,"webinarsDetails","webinarsIds"),a=setDetailsForBundles(e.bundle_courses,l.courseType.DIGITAL_PRODUCT,"digitalProductsDetails","digitalProductsIds"),u=setDetailsForBundles(e.bundle_courses,l.courseType.TELEGRAM,"telegramsDetails","telegramsIds"),d=setDetailsForBundles(e.bundle_courses,l.courseType.TRACK,"tracksDetails","tracksIds"),S=mapAllBundleCourseIds(e.bundle_courses);return new c.Pc({courses:t,testSeries:s,test:r,ebooks:o,podcasts:n,webinars:i,digitalProducts:a,telegrams:u,tracks:d,allBundleCoursesIds:S})},checkCourseHasAttachments=e=>{if(!e)return 0;let t=e.filter(e=>"[]"!==e.pdf_file_name);return t.length>0},getfirstAttemptAvgSpeed=(e,t)=>e.avg_speed_first_attempt?e.avg_speed_first_attempt:e.duration?Number((e.qcount/(e.duration/60)).toFixed(2)):0,getLatestAttemptAvgSpeed=e=>e.avg_speed_latest_attempt?e.avg_speed_latest_attempt:e.duration?Number((e.qcount/(e.duration/60)).toFixed(2)):0,setUserQuizData=(e,t,s)=>{let r={firstAttemptPercent:0,firstAttemptScore:0,latestAttemptScore:0,currentRetakeCount:0,firstAttemptRelativeSpeed:0,firstAttemptAccuracy:0,firstAttemptAvgSpeed:0,firstAttemptSpeed:0,firstAttemptIsUnderEvaluation:!1,secondAttemptIsUnderEvaluation:!1,firstSubmittedStatus:l.OZ.NOT_ATTEMPTED,latestSubmittedStatus:l.OZ.NOT_ATTEMPTED,totalTimeTaken:0,latestAttemptAccuracy:0,latestAttemptSpeed:0,latestAttemptAvgSpeed:0,latestAttemptRelativeSpeed:0,latestAttemptPercent:0,firstAttemptIsUnderRevaluation:!1,secondAttemptIsUnderRevaluation:!1};if(!e||!e.length)return r;if(e.forEach(e=>{r.totalTimeTaken+=Number(e.time_taken)}),r.firstAttemptIsUnderEvaluation=e[0].qn_eval_pending>0,r.secondAttemptIsUnderEvaluation=e[e.length-1].qn_eval_pending>0,r.firstAttemptIsUnderRevaluation=e[0].evaluation_status===l.QN.REVALUATION,r.secondAttemptIsUnderRevaluation=e[e.length-1].evaluation_status===l.QN.REVALUATION,!r.firstAttemptIsUnderEvaluation){r.firstAttemptAvgSpeed=getfirstAttemptAvgSpeed(s,e[0]),r.firstAttemptRelativeSpeed=r.firstAttemptAvgSpeed?Number(Number(e[0].speed)/r.firstAttemptAvgSpeed):0,r.firstAttemptAccuracy=Number(e[0].accuracy)||0,r.firstAttemptSpeed=Number(e[0].speed),r.firstAttemptPercent=Number((Number(e[0].score)/t*100).toFixed(2))||0,r.firstAttemptScore=Number(e[0].score)||0;let o=Number(e[e.length-1].score)||0;r.latestAttemptPercent=Number((o/Number(t)*100).toFixed(2))||0,r.latestAttemptAccuracy=Number(e[e.length-1].accuracy)||0,r.latestAttemptSpeed=Number(e[e.length-1].speed),r.latestAttemptAvgSpeed=getLatestAttemptAvgSpeed(s),r.latestAttemptRelativeSpeed=r.latestAttemptAvgSpeed?Number(r.latestAttemptSpeed/r.latestAttemptAvgSpeed):1}return r.secondAttemptIsUnderEvaluation||(r.latestAttemptScore=Number(e[e.length-1].score)),r.firstSubmittedStatus=e[0].status,r.latestSubmittedStatus=e[e.length-1].status,e.forEach(e=>{r.currentRetakeCount+=e.retakes}),r},getUnlockAtData=(e,t,s)=>{if(!s)return null;let r=s[t];if(!r)return null;let o=new Date(e.current_time).getTime(),n=new Date(r).getTime(),a=n<=o,l=i()(n).format("MMM DD 'YY");return new c.dG({lessonReleaseDateInMiliSeconds:n,isReleased:a,releaseDate:l})},getMarketingEventsForLessons=e=>{if(!e)return null;let t={};return e.forEach(e=>{t[e.magnet_id]=e.occurs_at}),t},getUnlockedContentForCourse=e=>{if(!e)return null;let t={};return e.forEach(e=>{t[e.content_id]=e.unlocks_at}),t},isLocked=(e,t)=>{if(!t)return!1;let s=!t[e];return s},setMockTestDetails=(e,t)=>{let s=[],r={},o=getMarketingEventsForLessons(null==t?void 0:t.marketing_event_batch);return e&&e.length&&e.forEach(e=>{s.push(e.id);let n={mockTestId:e.id,resourceQuizId:e.resource_quiz_id||e.id,mockTestTitle:e.title||null,mockTestDuration:e.duration||0,scheduleStartDate:e.start_time||null,scheduleEndDate:e.end_time||null,resultScheduleTime:isResultScheduled(e.result_time),totalMarks:Number(e.marks)||0,maxRetakesAllowed:e.max_retakes||0,totalQuestions:e.qcount||0,difficultyLevel:e.level||null,mockTestStatus:e.status||l.mockTestStatus.INVALID,mockTestType:e.test_type,quizConfig:e.quiz_config,unlocksAt:getUnlockAtData(t,e.id,o)},i=setUserQuizData(e.user_quiz_data,n.totalMarks,e);n={...n,...i},r[e.id]=new c._P(n)}),new c.fz(r,s)},setUserCodeExecutions=e=>{e.marks;let t=e.user_code_executions,s=(null==t?void 0:t[0])||{},r=(null==t?void 0:t[1])||{},o={firstAttemptScore:0,latestAttemptScore:0,currentAttempt:0,firstAttemptStatus:l.e2.NOT_ATTEMPTED,latestAttemptStatus:l.e2.NOT_ATTEMPTED,firstAttemptStartTime:null,firstAttemptSubmittedTime:null,latestAttemptStartTime:null,latestAttemptSubmittedTime:null};return(null==t?void 0:t.length)&&(o.firstAttemptScore=Number(s.score)||0,o.latestAttemptScore=Number(r.score)||0,o.firstAttemptStatus=s.status,o.latestAttemptStatus=r.status,o.firstAttemptStartTime=s.start_time,o.latestAttemptStartTime=r.start_time,o.firstAttemptSubmittedTime=s.submitted_time,o.latestAttemptSubmittedTime=r.submitted_time,o.firstAttemptResult=s.result,o.latestAttemptResult=r.result,o.currentAttempt=r.attempt||s.attempt),o},setCodeChallengeDetails=(e,t)=>{let s=[],r={};return(null==e?void 0:e.length)&&e.forEach(e=>{s.push(e.id);let t={codeId:e.id,title:e.title,language:e.language,codeDuration:e.duration,totalMarks:e.marks,contentType:e.content_type,contentId:e.content_id,maxRetakesAllowed:e.max_retakes,status:e.status},o=setUserCodeExecutions(e);t={...t,...o},r[e.id]=t}),new c.g(r,s)},bundleCoursesSummary=e=>{let t={},s=e.lesson_count;switch(t={courseId:e.id,courseType:e.course_type||l.courseType.INVALID,coursePaymentMode:e.is_free?l.H3.FREE:l.H3.PAID,courseAvailabilityMode:e.signup_type||l.m$.INVALID,courseAccessType:e.new_course_access_type||l.Qu.INVALID,courseStatus:e.status||l.iP.INVALID,courseSeoTitle:e.seo_title||null,courseTitle:e.title||null,courseTag:e.tag||"",courseShortDescription:e.short_description,rating:e.rating,numberOfFreeLessons:e.trial_lessons_count,courseStartTime:e.start_time||null,courseEndTime:e.end_time||null,courseImageUrl:e.image_url||null,trialLessonCount:e.trial_lessons_count,totalLessonCount:e.lesson_count},e.course_type){case l.courseType.COURSE:case l.courseType.EBOOK:case l.courseType.PODCAST:case l.courseType.WEBINAR:case l.courseType.TRACK:case l.courseType.DIGITAL_PRODUCT:t.lessonCount=s;break;case l.courseType.TEST:case l.courseType.TEST_SERIES:t.testCount=s;break;default:t.lessonCount=s}return t},setDetailsForBundles=(e,t,s,r)=>{let o={},n=[];return e.forEach(e=>{if(e.course_type===t){n.push(e.id);let t=bundleCoursesSummary(e);o[e.id]=new c.MH(t)}}),{[s]:o,[r]:n}},mapAllBundleCourseIds=e=>{let t=[];return e.forEach(e=>{t.push(e.id)}),t},isTestResultPublished=e=>new Date(e).getTime()<Date.now(),calaculateTopicsAnalytics=e=>{let t={totalPercent:0,totalAccuracy:0,totalSpeed:0,userTotalPercent:0,userTotalSpeed:0,userTotalAccuracy:0,totalEffectiveRelTestCount:0,totalTestEvaluated:0,totalTestCompleted:0,totalTimeSpent:0,relativeSpeed:0,userLatestTotalPercent:0,userLatestTotalAccuracy:0};return e.mockTestIds.forEach(s=>{let r=e.mockTestDetails[s].latestSubmittedStatus===l.OZ.SUBMITTED||e.mockTestDetails[s].latestSubmittedStatus===l.OZ.SUBMITTED_AFTER_TIMEUP,{mockTestDuration:o,totalTimeSpent:n,resultScheduleTime:i,latestAttemptPercent:a,latestAttemptAccuracy:c,secondAttemptIsUnderEvaluation:u,latestAttemptRelativeSpeed:d,latestAttemptSpeed:S}=e.mockTestDetails[s];if(r){t.totalTestCompleted+=1;let e=!!(!u&&i&&isTestResultPublished(i));(i?e:!u)&&(t.userTotalSpeed+=S,t.userTotalAccuracy+=c,t.userTotalPercent+=a,t.userLatestTotalPercent+=a,t.userLatestTotalAccuracy+=c,t.totalTestEvaluated+=1,t.relativeSpeed+=d,o&&(t.totalSpeed+=d,t.totalAccuracy+=c,t.totalPercent+=a,t.totalEffectiveRelTestCount+=1),n&&(t.totalTimeSpent+=n))}}),{totalTestCompleted:t.totalTestCompleted,totalEffectiveRelTestCount:t.totalEffectiveRelTestCount,totalTestEvaluated:t.totalTestEvaluated,avgPercent:t.totalEffectiveRelTestCount?Number((t.totalPercent/t.totalEffectiveRelTestCount).toFixed(2)):0,accuracy:t.totalEffectiveRelTestCount?Number((t.totalAccuracy/t.totalEffectiveRelTestCount).toFixed(2)):0,speed:t.totalEffectiveRelTestCount?Number((t.totalSpeed/t.totalEffectiveRelTestCount).toFixed(2)):0,userAvgPercent:t.totalTestEvaluated?Number((t.userTotalPercent/t.totalTestEvaluated).toFixed(2)):0,userAvgSpeed:t.totalTestEvaluated?Number((t.userTotalSpeed/t.totalTestEvaluated).toFixed(2)):0,userAvgAccuracy:t.totalTestEvaluated?Number((t.userTotalAccuracy/t.totalTestEvaluated).toFixed(2)):0,totalTimeSpent:t.totalTimeSpent.toFixed(2),relativeSpeed:t.totalEffectiveRelTestCount?Number((t.relativeSpeed/t.totalEffectiveRelTestCount).toFixed(2)):Number(t.relativeSpeed).toFixed(2),userLatestAvgPercent:t.totalTestEvaluated?Number((t.userTotalPercent/t.totalTestEvaluated).toFixed(2)):0,userLatestAvgAccuracy:t.totalTestEvaluated?Number((t.userLatestTotalAccuracy/t.totalTestEvaluated).toFixed(2)):0}},setTseriesTopicAnalytics=(e,t,s)=>{let r=[];t.forEach(t=>{e.forEach(e=>{e.id===t.lesson_id&&r.push(t)})});let o=setMockTestDetails(r,s),n={totalTestCount:r.length,totalTestCompleted:0,totalTestEvaluated:0,avgPercent:0,accuracy:0,speed:0,userAvgPercent:0,userAvgSpeed:0,userAvgAccuracy:0,userLatestAvgAccuracy:0,userLatestAvgPercent:0},{totalTestCompleted:i,totalTestEvaluated:a,avgPercent:l,accuracy:u,speed:d,userAvgPercent:S,userAvgSpeed:_,userAvgAccuracy:E,totalTimeSpent:D,relativeSpeed:p,userLatestAvgAccuracy:T,userLatestAvgPercent:C}=calaculateTopicsAnalytics(o);return n.totalTestCompleted=i,n.totalTestEvaluated=a,n.avgPercent=l,n.accuracy=u,n.speed=d,n.userAvgPercent=S,n.userAvgSpeed=_,n.userAvgAccuracy=E,n.totalTimeSpent=D,n.relativeSpeed=p,n.userLatestAvgPercent=C,n.userLatestAvgAccuracy=T,new c.i$(n)},setSectionDetails=(e,t,s,r,o,n,i)=>{let a={},u=[];return e.forEach(e=>{let i={id:e.id,resourceSectionId:e.resource_section_id||0,lessonIds:[],attachmentCount:0,sectionTitle:e.title,freeLessonCount:0,totalTestCount:0,hasDownloadableSlides:!1,testSeriesAnalytics:null},d=t.filter(t=>e.id===t.section_id&&!t.hide_lesson);(r===l.courseType.TEST_SERIES||r===l.courseType.COURSE||r===l.courseType.EBOOK||r===l.courseType.PODCAST||r===l.courseType.WEBINAR||r===l.courseType.DIGITAL_PRODUCT||r===l.courseType.TRACK)&&(i.testSeriesAnalytics=setTseriesTopicAnalytics(d,s,n)),d.forEach(e=>{if(i.lessonIds.push(e.id),"[]"!==e.pdf_file_name){let t=JSON.parse(e.pdf_file_name);i.attachmentCount+=t.length}e.is_trial&&(i.freeLessonCount+=1),e.quiz_id&&(i.totalTestCount+=1),!1===i.hasDownloadableSlides&&(i.hasDownloadableSlides=!!o&&e.lesson_type!==l.A.CODE&&isLessonDownloadable(e))}),0!==d.length?u.push(e.id):delete a[e.id],a[e.id]=new c.$0(i)}),new c.bx(a,u)},isLessonDownloadable=e=>{let{lesson_data:t}=e;t="string"==typeof t?JSON.parse(t):[];for(let e=0;e<t.length;e++){let s=t[e];if((0,_.lH)(s.src_type,s.src))return!0}return!1},setSlideData=(e,t)=>{let{lesson_data:s}=e,{quizzes:r}=t;s="string"==typeof s?JSON.parse(s):[];let o={},n=[],i=!1;t.content_signed_url&&t.content_signed_url.indexOf("/v6/")>0&&(i=!0);let a=new Date,u=new Date(e.end_time);if(e.lesson_type===l.A.LIVE&&u>a&&e.provider===l.$4.LIVE_WEBINAR&&e.status!==l.GK.COMPLETED){let t={fileName:"".concat(l.API_URLS.LIVE_URL),fileType:e.lesson_type===l.A.LYST_LIVE?l.r5.LEARNYST_LIVE_UNENCRYPTED:l.r5.LIVE_LESSON,slideState:l.Ll.READY,startFile:null,fileId:0};o[0]=new c.Mi(t),n.push(0)}else if((e.lesson_type===l.A.LYST_LIVE||e.lesson_type===l.A.LIVE)&&s.length<=0){let t={fileName:"".concat(l.API_URLS.LIVE_URL),fileType:e.lesson_type===l.A.LYST_LIVE?l.r5.LEARNYST_LIVE_UNENCRYPTED:l.r5.LIVE_LESSON,slideState:l.Ll.READY,startFile:null,fileId:0};o[0]=new c.Mi(t),n.push(0)}else if(e.lesson_type!==l.A.CODE){let e="aaa.test";s.forEach((s,a)=>{if(s.src_type===l.r5.TEST_TYPE&&s.state===l.Ll.READY){let o=r.filter(e=>(e.resource_quiz_id||e.id)===s.url),n=o[0]?o[0].id:0,i=setMockTestDetails(o,t);(i=i.mockTestDetails[n])&&(e="".concat(n,".test?name=").concat(s.src,"&mocktestId=").concat(n,"&status=").concat(i.mockTestStatus,"&submissionStatus=").concat(i.latestSubmittedStatus,"&state=").concat(s.state,"&marks=").concat(i.totalMarks,"&myMarks=").concat(i.latestAttemptScore,"&duration=").concat(i.mockTestDuration,"&totalQuestions=").concat(i.totalQuestions,"&retakes=").concat(i.currentRetakeCount,"&myFirstAttemptMarks=").concat(i.firstAttemptScore,"&firstAttemptSubmissionStatus=").concat(i.firstSubmittedStatus,"&firstAttemptIsUnderEvaluation=").concat(i.firstAttemptIsUnderEvaluation,"&secondAttemptIsUnderEvaluation=").concat(i.secondAttemptIsUnderEvaluation,"&scheduleStartDate=").concat(i.scheduleStartDate,"&scheduleEndDate=").concat(i.scheduleEndDate,"&resultScheduleTime=").concat(i.resultScheduleTime,"&mockTestType=").concat(i.mockTestType,"&maxRetakesAllowed=").concat(i.maxRetakesAllowed,"&"))}let u={fileName:s.src_type===l.r5.TEST_TYPE?e:s.src,fileType:s.src_type,slideState:s.state,startFile:checkIsSTHLesson(s.src_type)?s.url:null,fileId:parseInt(s.src_id),numOfFormats:s.no_of_formats,hasFullyTranscoded:s.has_fully_transcoded||!0,contentId:s.content_id,contentPath:i?s.content_path:null,contentPathExtn:i?s.content_path_extn:null};o[a]=new c.Mi(u),n.push(a)})}return new c.My(o,n)},checkIsSTHLesson=e=>{switch(e){case l.r5.ENCRYPTED_SCORM:case l.r5.UNENCRYPTED_SCORM:case l.r5.ENCRYPTED_TINCAN:case l.r5.UNENCRYPTED_TINCAN:case l.r5.ENCRYPTED_HTML:case l.r5.UNENCRYPTED_HTML:return!0;default:return!1}},setLiveLessonDetails=e=>new c.wB({provider:e.provider,startTime:e.start_time,endTime:e.end_time,embededText:e.embedded_text,isCancelld:!!e.is_cancelled,cancelReason:e.reason,isLink:e.is_link}),setLiveLessonAttendance=e=>{let{live_attendance:t,live_attendance_count:s}=e;return t?new c.g4({id:t.id,lessonId:t.lesson_id,liveLessonId:t.live_lesson_id,userId:t.user_id,liveAttendanceCount:s,createdAt:t.created_at,updatedAt:t.updated_at}):{}},setCodeId=e=>{let{lesson_data:t}=e;try{var s;return null===(s=JSON.parse(t))||void 0===s?void 0:s[0].code_id}catch(e){console.log("Error in setting code id: ",e)}},setLessonDetails=(e,t,s,r)=>{let o={},n=[],i=[],a=getMarketingEventsForLessons(null==t?void 0:t.marketing_event_batch),u=null==t?void 0:t.sequential_learning_enabled;return e.map(e=>{var d;o[e.id]={};let S=e.lesson_type===l.A.VIDEO&&e.duration&&e.long_description,_=S?(0,E.h9)(e.long_description,e.duration):[],D={id:e.id,resourceLessonId:e.resource_lesson_id||0,lessonTitle:e.title,lessonShortDescription:e.short_description,lessonLongDescription:e.long_description,lessonDuration:e.duration,lessonType:e.lesson_type,lessonTag:e.tag,lessonVersion:e.version,isTrialLesson:e.is_trial,isHidden:e.hide_lesson,attachmentUrls:JSON.parse(e.pdf_file_name),lessonDripDate:e.release_date,mockTestId:e.quiz_id,codeId:e.lesson_type===l.A.CODE?setCodeId(e):null,sectionId:e.section_id,slides:setSlideData(e,t),hasDownloadableSlides:!!s&&e.lesson_type!==l.A.CODE&&isLessonDownloadable(e),liveLessonDetails:e.lesson_type===l.A.LYST_LIVE||e.lesson_type===l.A.LIVE?setLiveLessonDetails(e):null,dripData:t.drip_data?setDripData(t.drip_data,e,t,t.dripping_start_date):null,unlocksAt:getUnlockAtData(t,e.id,a),isLessonLocked:!!u&&isLocked(e.id,r),likeId:e.like_id,isLiked:!!e.like_id,likeCount:null!==(d=e.like_count)&&void 0!==d?d:0,...e.created_at?{createdAt:new Date(e.created_at)}:{},lessonThumbnailSrc:e.thumbnail_file_name,lessonChapters:_};D.hasDownloadableSlides&&(D.hasDownloadableSlides=D.dripData?D.dripData.isReleased:D.hasDownloadableSlides),D.attachmentUrls=D.dripData&&!D.dripData.isReleased?[]:D.attachmentUrls,o[e.id]=new c.NY(D),n.push(e.id),D.isHidden&&i.push(e.id)}),new c.uh(o,n,i)},setDripData=(e,t,s,r)=>{let o={},n={},a=0,l=0,u=!1,d=new Date(s.current_time).getTime();new Date().getTime(),o=e;let S=parseInt(JSON.parse(o.dripping_data)[t.id]);return u=(a=o.start_time?new Date(o.start_time).setDate(new Date(o.start_time).getDate()+S):new Date(r).setDate(new Date(r).getDate()+S))<=d,l=i()(a).format("MMM DD 'YY"),n={lessonReleaseDateInMiliSeconds:a,isReleased:u,releaseDate:l},new c.dG(n)},setTimeOffset=e=>new Date(e).getTime()-new Date().getTime(),setQueryParams=(e,t,s)=>{let r=e.trialContentSignedUrl,{liveContentSignedUrl:o}=e;return(t===l.ri.PURCHASED||s)&&(r=e.paidContentSignedUrl),o&&(r=o),r?r.split("?")[1]:null},checkIsTrialUser=(e,t)=>t||e===l.ri.PURCHASED?0:1;function setPlayerData(e,t,s,r,o){let n={title:t.courseTitle,schoolId:parseInt(d.customerConfig.SCHOOL_ID),masterSchoolId:t.masterSchoolId,resourceSchoolId:t.resourceSchoolId,resourceCourseId:t.resourceCourseId,resourceLessonId:e.resourceLessonId,lessonId:e.id,lessonTitle:e.lessonTitle,lessonVersion:e.lessonVersion,sectionId:e.sectionId,queryparams:setQueryParams(t,s,o),isTrialLesson:e.isTrialLesson,isTrialUser:checkIsTrialUser(s,o),courseId:t.courseId,courseSeoTitle:t.courseSeoTitle,initialSlideIdx:0,initialSlideSeekPos:0,isFreeCourse:!!t.isFree,isPaidSchool:!!d.customerConfig.ips,isMonitorEnabled:!!d.customerConfig.ipme,achievementData:null==t?void 0:t.achievements};return r&&(n.bundleId=r),n}let setCourseAccessTypes=e=>{let t=e?e&l.Qu.ONLINE:0,s=e?e&l.Qu.INAPP_DOWNLOAD:0,r=e?e&l.Qu.DOWNLOAD_LINK:0,o=e?e&l.Qu.SDCARD:0;return{online:t,inAppDownload:s,downloadLink:r,sdCard:o}},setCurriculumData=e=>{let t={};return(null==e?void 0:e.length)?(e.forEach(e=>{if(Object.keys(t).includes(null==e?void 0:e.section_name)){let s=new c.de(null==e?void 0:e.lesson_name,null==e?void 0:e.preview_url);null==t||t[null==e?void 0:e.section_name].push(s)}else{let s=new c.de(null==e?void 0:e.lesson_name,null==e?void 0:e.preview_url),r=Array(s);t[null==e?void 0:e.section_name]=r}}),t):null},getUserActivationType=e=>{var t;if(!e)return{isTrialUser:!1,isPaidUser:!1};let{is_bought:s,is_enrolled:r,end_date:o,course_type:n,quizzes:i,is_free:a}=e,c=n===l.courseType.TEST?null==i?void 0:null===(t=i[0])||void 0===t?void 0:t.end_time:null;if(s){let e=checkIsCourseExpired(o,c);return e?{isTrialUser:!1,isPaidUser:!1}:a?{isTrialUser:!0,isPaidUser:!1}:{isTrialUser:!0,isPaidUser:!0}}return{isTrialUser:r,isPaidUser:!1}},setCourseDetails=(e,t,s,r,n)=>{var i,a,u;let d={},S=o()(t),_=!!S.enc_key,E=getUnlockedContentForCourse(null==S?void 0:S.unlocked_content),D={achievements:null==S?void 0:S.achievements,favouriteId:null==S?void 0:null===(i=S.bookmark)||void 0===i?void 0:i.id,courseEvents:setCourseEvents(null==S?void 0:S.course_events),isFree:S.is_free,inAppProductId:S.in_app_purchases?S.in_app_purchases.product_id:"",resourceSchoolId:S.resource_school_id||0,resourceCourseId:S.resource_course_id||0,lastFetchTime:Date.now(),isDirtyData:!1,masterSchoolId:S.school_id?S.school_id:null,courseId:S.id,courseType:S.course_type,serverDeviceType:S.sell_on_device,coursePaymentMode:S.is_free?l.H3.FREE:l.H3.PAID,courseAvailabilityMode:S.signup_type,courseAccessType:setCourseAccessTypes(S.new_course_access_type),enrollmentState:getEnrollmentState(S.is_bought,S.is_enrolled,S.activation_type),courseStatus:S.status,testStartTime:S.course_type===l.courseType.TEST?S.quizzes[0].start_time:null,testEndTime:S.course_type===l.courseType.TEST?S.quizzes[0].end_time:null,courseSeoTitle:S.seo_title,seoPageTitle:S.seo_page_title||S.title,seoDescription:S.seo_description,courseTitle:S.title,isSellIndividualEnabled:1===S.sell_individual,courseImageUrl:S.image_url,coursePromoUrl:S.promo_url,courseDescription:S.description,courseShortDescription:S.short_description,numberOfFreeLessons:calculateNoOfFreeLessons(S),numberOfFreeCourses:S.course_type===l.courseType.BUNDLE||S.course_type===l.courseType.BATCH||S.course_type===l.courseType.SUBSCRIPTION_BUNDLE||S.course_type===l.courseType.SUBSCRIPTION_TIER_BUNDLE?calculateNoOfFreeCourses(S.bundle_courses,S.course_type):0,trialContentSignedUrl:S.content_signed_url,paidContentSignedUrl:changeTrailSignedUrlToPaid(S.content_signed_url),trialDownloadSignedUrl:S.download_signed_url,paidDownloadSignedUrl:changeTrailSignedUrlToPaid(S.download_signed_url),liveContentSignedUrl:S.live_signed_url,isCourseEncrypted:!!S.enc_key,studentCourseExpiryDate:S.end_date,courseStartTime:S.start_time,courseEndTime:S.end_time,currentServerTime:S.current_time,courseRating:S.rating||0,signedUrlAuthToken:S.url_token,isCertificateEnabled:S.is_certificate_enabled,isDiscussionEnabled:S.is_disscussion_enabled,isGamificationLeaderboardEnabled:S.gamification_leaderboard_enabled,isNotesEnabled:S.is_notes_enabled,isReviewsEnabled:S.is_reviews_enabled,isFaqEnabled:S.no_of_faqs>0,isShowAuthorsEnabled:S.no_of_teachers>0,leaderBoardStatus:S.leader_board_status,hasAttachments:checkCourseHasAttachments(S.lessons),bundleCourses:S.course_type===l.courseType.BUNDLE||S.course_type===l.courseType.BATCH||S.course_type===l.courseType.SUBSCRIPTION_BUNDLE||S.course_type===l.courseType.SUBSCRIPTION_TIER_BUNDLE?getBundleCourses(S):new c.Pc({}),sections:S.course_type===l.courseType.COURSE||S.course_type===l.courseType.TEST_SERIES||S.course_type===l.courseType.EBOOK||S.course_type===l.courseType.PODCAST||S.course_type===l.courseType.WEBINAR||S.course_type===l.courseType.DIGITAL_PRODUCT||S.course_type===l.courseType.FREE_RESOURCE||S.course_type===l.courseType.TRACK?setSectionDetails(S.sections,S.lessons,S.quizzes,S.course_type,_,S,E):null,lessons:S.course_type===l.courseType.COURSE||S.course_type===l.courseType.TEST_SERIES||S.course_type===l.courseType.EBOOK||S.course_type===l.courseType.PODCAST||S.course_type===l.courseType.WEBINAR||S.course_type===l.courseType.DIGITAL_PRODUCT||S.course_type===l.courseType.FREE_RESOURCE||S.course_type===l.courseType.TRACK?setLessonDetails(S.lessons,S,_,E):null,mockTests:setMockTestDetails(S.quizzes,S),totalLessons:S.lessons?S.lessons.filter(e=>e.lesson_type!==l.A.TEST).length:0,totalQuizzes:S.lessons?S.lessons.filter(e=>e.lesson_type===l.A.TEST).length:0,coursePlayTimeRestrictionDetails:setPlayTimeRestrictions(S,_,r),bundles:S.bundles,isLessonLikesEnabled:S.is_lesson_likes_enabled,curriculumData:setCurriculumData(null==S?void 0:S.curriculums),nextInstalmentPaymentDate:null==S?void 0:S.next_payment_date,selectedPricingPlanId:null==S?void 0:null===(a=S.renew_pricing_plan)||void 0===a?void 0:a.id,selectedPricingPlan:null==S?void 0:S.renew_pricing_plan,renewPricingPlan:null==S?void 0:S.renew_pricing_plan,allowRenewPlan:null==S?void 0:S.allow_renew_plan,joinLink:S.course_type===l.courseType.TELEGRAM?null==S?void 0:S.telegram_invite_link:null,isSequentialPathEnabled:null==S?void 0:S.sequential_learning_enabled,learningPathType:(null==S?void 0:S.sequential_learning_enabled)?null==S?void 0:S.learning_path_type:null,codeChallenges:setCodeChallengeDetails(null==S?void 0:S.codes,S),supportedBrowsersBinIntValue:null==S?void 0:S.supported_browsers_bin_int_value,downloadSupportedDevicesBinIntValue:null==S?void 0:S.download_supported_devices_bin_int_value,isBatchMemberEnabled:S.is_batch_member_enabled,isLearnerAchievementsEnabled:null==S?void 0:S.is_achievement_enabled,userCourseId:null==S?void 0:S.user_course_id,userEsignStatus:null==S?void 0:null===(u=S.user_consent)||void 0===u?void 0:u.esign_status,esignStatus:null==S?void 0:S.esign_status};if(S.drip_data){let e=modifySectionalDownloadables(D.sections,D.lessons);D.hasAttachments=!!e}return D.subscriptionAccessData=n,D.bundleType=getBundleType(s,n),d[S.id]={...e[S.id],courseAccessFetchStatus:l.UK.IDLE,fetchStatus:l.UK.SUCCESS,cacheRestoreState:l.Zg.RESTORED,error:{errorCode:0,errorMessage:null},courseDetails:new c.T_(D)},{...e,...d}},setCourseWatchTimeDetails=async(e,t)=>{let s={};try{if(s=await a.tJ.getValue(l.oc,52,0)||{},!t)return console.error("Error: userId is invalid",t),{};if(s[t]||(s[t]={}),!(null==e?void 0:e.bundleId))return s[t]||{};let{timeWatched:o,lessonId:n,bundleId:i}=e;if(!i||!n)return console.error("Error: Missing bundleId or lessonId",e),s[t];if(s[t][i]||(s[t][i]={streakGained:!1}),s[t][i][n]){var r;s[t][i][n]={...s[t][i][n],timeWatched:((null===(r=s[t][i][n])||void 0===r?void 0:r.timeWatched)||0)+o}}else s[t][i][n]={timeWatched:o};return s}catch(e){throw console.error("Error setting course watch time details:",e),e}},getBundleType=(e,t)=>t&&t.subscriptionId?l.H$.SUBSCRIPTION_BUNDLE:e?l.H$.PRODUCT_BUNDLE:"",modifySectionalDownloadables=(e,t)=>{let s=0,r=0,o=0;return e.sectionIds.forEach(n=>{r=0,o=0,e.sectionDetails[n].lessonIds.forEach(e=>{let s=t.lessonDetails[e];r+=s.attachmentUrls.length,s.hasDownloadableSlides&&o++}),e.sectionDetails[n].attachmentCount=r,r||(e.sectionDetails[n].attachmentCount=0),o||(e.sectionDetails[n].hasDownloadableSlides=!1),s+=r}),s},setCourseAccessData=(e,t,s)=>{let r={};return r[s]={...e[s],courseAccessFetchStatus:l.UK.SUCCESS,courseDetails:{...e[s].courseDetails,lastFetchTime:Date.now(),isDirtyData:!1,enrollmentState:getEnrollmentState(t.is_bought,t.is_enrolled,t.activation_type),studentCourseExpiryDate:t.end_date}},{...e,...r}};function setCourseIdAndBundleId(e,t){let s=t.currentCourseId||0,r=t.currentBundleId||0,o=null,n=null,i=0;return e.forEach(e=>{e.course_type===l.courseType.BUNDLE||e.course_type===l.courseType.BATCH||e.course_type===l.courseType.SUBSCRIPTION_BUNDLE||e.course_type===l.courseType.SUBSCRIPTION_TIER_BUNDLE?(r=e.id,n=e.seo_title):(s=e.id,o=e.seo_title),i=e.course_type}),{currentCourseId:s,currentBundleId:r,currentCourseSeo:o,currentBundleSeo:n,currentProductType:i,isCurrentCourseFromBundle:!!(s&&r)}}let renameObjcetProp=(e,t,s)=>{let{[e]:r,...o}=s;return{...o,[t]:r}};function validateCurrentAccesingLessons(e,t){if(!t[l.$2])return t;let s={};return e.forEach(e=>{(e.course_type===l.courseType.COURSE||e.course_type===l.courseType.TEST_SERIES||e.course_type===l.courseType.EBOOK||e.course_type===l.courseType.PODCAST||e.course_type===l.courseType.WEBINAR||e.course_type===l.courseType.DIGITAL_PRODUCT||e.course_type===l.courseType.TRACK)&&(s=renameObjcetProp(l.$2,e.id,t))}),{...s}}let getColorAndTopicSwot=(e,t)=>e>=1&&t>=70?{topic:"strong"}:e>=1&&t<70?{topic:"threat"}:e<1&&t>=70?{topic:"opportunity"}:{topic:"weak"};function getPlayTimeState(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t?e<=0?l.tO.TIME_LIMIT_REACHED:e<=300?l.tO.TIME_LIMIT_WARNING:l.tO.TIME_LIMIT_NOT_REACHED:l.tO.INVALID}function setPlayTimeRestrictions(e,t,s){let r=null==e?void 0:e.total_allocated_time,o=null==e?void 0:e.paid_av_playtime,n=null==e?void 0:e.is_bought,i=null==e?void 0:e.course_allocated_playtime,a=n?r:i,l=((null===d.customerConfig||void 0===d.customerConfig?void 0:d.customerConfig.is_watchtime_restriction_enabled)||(null===d.schoolConfig||void 0===d.schoolConfig?void 0:d.schoolConfig.is_watchtime_restriction_enabled))&&a&&t,u=!!(n&&l),S=r?r-o:0,_=s?s.remainingAllocatedTime:null,E=s?s.totalAllocatedPlayTime:null;(_||0===_)&&_<=S&&E===r&&(S=_,r=E,o=E-_);let D={remainingAllocatedTime:S,consumedPlayTime:o,totalAllocatedPlayTime:r,isPlayTimeRestrictionEnabled:u,playTimeState:getPlayTimeState(S,u),courseAllocatedPlayTime:i};return new c.rw(D)}let setSubscriptionAccessDetails=e=>{let{subscription_access:t,tier_access:s,course_access:r,course_not_in_subscription:o}=e,n=[],i=t&&t.subscription_id||0,a=!1;if(t){let e=new Date(new Date(t.end_date).setDate(new Date(t.end_date).getDate()+1));t.is_bought&&e>new Date&&n.push(t.subscription_id)}return s&&s.length&&s.map(e=>{let t=new Date(new Date(e.end_date).setDate(new Date(e.end_date).getDate()+1));e.is_bought&&t>new Date&&n.push(e.tier_id)}),r&&r.is_bought&&new Date(r.end_date)>new Date&&(a=!0),{purchasedIds:n,subscriptionId:i,isIndividualPurchased:a,isCourseNotInSubscription:o||!1}},getInAppPurchaseDetails=async e=>{let{in_app_purchases:t}=e;if(!t||!t.product_id)return{};let s={};return u.OS===u.vO.DEVICE_IOS&&(s=await (0,S.kR)([t.product_id])),s},updateLikeIdForLesson=(e,t,s)=>{let r=o()(e);return r.coursesDetails[r.currentCourseId].courseDetails.lessons.lessonDetails[t].likeId=s,r.coursesDetails[r.currentCourseId].courseDetails.lessons.lessonDetails[t].isLiked=!!s,r.coursesDetails[r.currentCourseId].courseDetails.lessons.lessonDetails[t].likeCount+=s?1:-1,r},setQuizData=(e,t,s)=>{let r=0,o=0,n=0,i=0,a=0,c=0,u=0;e&&e.forEach(e=>{if(r+=Number(e.marks),e.user_quiz_data.length){var t;let r=null===(t=e.user_quiz_data)||void 0===t?void 0:t[0];(null==r?void 0:r.score)&&(o+=Number(null==r?void 0:r.score),n+=Number(r.score)/Number(e.marks)),((null==r?void 0:r.qn_eval_pending)>0||(null==r?void 0:r.evaluation_status)===l.QN.REVALUATION)&&u++,s?(a+=null==r?void 0:r.correct,c+=null==r?void 0:r.answered):i+=(null==r?void 0:r.accuracy)?Number(null==r?void 0:r.accuracy):0}}),s&&(i=c?a/c*100:0);let d=t.length?(n/t.length*100).toFixed(2):0,S=t.length?(i/t.length).toFixed(2):0,_=c?t.length-u:0,E={totalScore:r,obtainedScore:o,averageScore:d,averageAccuracy:S,evaluatedCount:_};return E},setCourseAnalyticsData=(e,t,s)=>{let r=o()(e);if(!(null==r?void 0:r.is_enrolled)||!(null==r?void 0:r.is_bought))return{};if((null==r?void 0:r.course_type)===l.courseType.BUNDLE)return s.courseAnalyticsData;let n=[],i=[],a=[];(null==r?void 0:r.lessons)&&r.lessons.forEach(e=>{e.lesson_type!==l.A.VIDEO||e.hide_lesson?e.lesson_type===l.A.TEST?i.push(e.id):e.lesson_type===l.A.ASSIGNMENT&&a.push(e.id):n.push(e.id)});let c=[],u=[],d=[];t&&t.forEach(e=>{n.includes(e)?c.push(e):i.includes(e)?u.push(e):a.includes(e)&&d.push(e)});let S=[],_=[];(null==r?void 0:r.quizzes)&&r.quizzes.forEach(e=>{i.includes(e.lesson_id)?S.push(e):a.includes(e.lesson_id)&&_.push(e)});let E={totalVideoLessons:n,totalQuizzes:i,totalAssignments:a,completedVideoLessons:c,completedQuizzes:u,completedAssignments:d,quizData:setQuizData(S,u),assignmentData:setQuizData(_,d,!0)};return E},checkRootPathForMedia=e=>e?e.indexOf("/ldrm/")>0?l.ao.LDRM:e.indexOf("/sdrm/")>0?l.ao.SDRM:e.indexOf("/resources/")>0?l.ao.RESOURCES:l.ao.NO_DRM:l.ao.NO_DRM,getAchievementdataBasedOnType=(e,t)=>{if(!e)return null;let s=e.find(e=>e.achievement_type===t);return s||null},getContinuousWatchThreshold=e=>{try{var t;let s=(0,D.D6)((null==e?void 0:e.rule_data)||"{}"),r=null===(t=s.watch_content)||void 0===t?void 0:t.find(e=>e.field===l.Tr.VIDEO);return 60*((null==r?void 0:r.value)||0)}catch(e){return console.error("Failed to parse rule_data:",e),0}}},47746:function(e,t,s){"use strict";s.d(t,{K$:function(){return constructBookMarkDataForPlayer},bm:function(){return constructSlideDataForLessonPlay},fq:function(){return getAllFileSetsOfSlide},h9:function(){return constructChaptersDataForPlayer},qd:function(){return convertTimeStringToSeconds},zT:function(){return getAllFilesToDownload}});var r=s(39051),o=s.n(r),n=s(37839),i=s(78445),a=s(97425),l=s(93050),c=s(73704),u=s(53794),d=s(87344),S=s(29505),_=s(72904),E=s(36722),D=s.n(E);let p=[18712,63442,63441,63440,63439,63437,63436,63435,63434,3245,102423,97611,90679,138904,145012],isBrowserSupported=()=>!window||!!window.MediaSource&&!!MediaSource.isTypeSupported,constructBookMarkDataForPlayer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,r={};if(!e||!e.slideDetails)return r;let o=e.slideDetails||{};return t&&t.forEach(e=>{let t=-1;if(e.noteBookType===d.dE.BOOKMARK&&(s?t=0:e.srcName&&(t=(0,u.Gk)(e.srcName,o)),t>-1)){let s={timeStamp:e.timeStamp,id:e.noteBookId};r[t]?r[t].push(s):r[t]=[s]}}),{notebookDataForPlayer:r,bookmarkDataChanged:Date.now()}};function getFileNameWithOutExtn(e){if(!e||e.trim().length<=0)return null;if(0>=e.lastIndexOf("."))return e;let t=e.substring(0,e.lastIndexOf("."));return t}function getExtnFromFileName(e){if(!e||e.trim().length<=0||0>=e.lastIndexOf("."))return null;let t=e.substring(e.lastIndexOf(".")+1);return t.toLowerCase()}function getAllFileSetsOfSlide(e,t,s){let r=getFileNameWithOutExtn(t),o=[],n="ctrcenc";if(e===i.r5.ENCRYPTED_VIDEO){if(c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC){let e=[];e.push({fileName:"".concat(r,"_stream_").concat(n,".m3u8"),isMainFile:!0,fileId:s?"".concat(s,"-2"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_video_").concat(n,".m3u8"),isMainFile:!1,fileId:s?"".concat(s,"-3"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_audio_").concat(n,".m3u8"),isMainFile:!1,fileId:s?"".concat(s,"-4"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_videostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-5"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_audiostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-6"):null,isLegacyContent:!1}),o.push(e)}else{let e=[];e.push({fileName:"".concat(r,"_stream_").concat(n,".mpd"),isMainFile:!0,fileId:s?"".concat(s,"-1"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_videostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-5"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_audiostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-6"):null,isLegacyContent:!1}),o.push(e)}}else if(e===i.r5.ENCRYPTED_AUDIO){if(c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC){let e=[];e.push({fileName:"".concat(r,"_stream_").concat(n,".m3u8"),isMainFile:!0,fileId:s?"".concat(s,"-2"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_audiostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-6"):null,isLegacyContent:!1}),o.push(e)}else{let e=[];e.push({fileName:"".concat(r,"_stream_").concat(n,".mpd"),isMainFile:!0,fileId:s?"".concat(s,"-1"):null,isLegacyContent:!1}),e.push({fileName:"".concat(r,"_audiostream.mp4"),isMainFile:!1,fileId:s?"".concat(s,"-6"):null,isLegacyContent:!1}),o.push(e)}}else{let e=[{fileName:t,isMainFile:!0,fileId:s}];o.push(e)}return o}function getDownloadFileData(e,t,s,r,o,a,l,u){if(!e)return null;let d="",S="",_=null,E=null,D=null,p=[];if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.TEST_TYPE&&(d=getFileNameWithOutExtn(e.fileName),S=getExtnFromFileName(e.fileName),!d||!S||d.trim().length<=0||S.trim().length<=0))return console.log("Invalid filename in getDownloadFileData"),p;let{fileType:T}=e;if(e.fileName&&T!==i.r5.LIVE_LESSON&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?T===i.r5.ENCRYPTED_HTML?T=i.r5.ENCRYPTED_SCORM:T===i.r5.UNENCRYPTED_HTML&&(T=i.r5.UNENCRYPTED_SCORM):T===i.r5.ENCRYPTED_HTML&&(T=i.r5.UNENCRYPTED_HTML)),(c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC)&&(T===i.r5.ENCRYPTED_SCORM||T===i.r5.ENCRYPTED_TINCAN))return p;let C=e.fileId?e.fileId:0,h=a||0,I=t.indexOf("paid")>0?"PLYST":"TLYST";if(T===i.r5.ENCRYPTED_VIDEO)_="".concat(t+o,"/offline_audio_video/").concat(d,"_cencm4f.mp4"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_cencm4f.mp4");else if(T===i.r5.ENCRYPTED_PDF)_="".concat(t+o,"/").concat(d,"_dcf.pdf"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_dcf.pdf");else if(T===i.r5.ENCRYPTED_AUDIO)_="".concat(t+o,"/offline_audio_video/").concat(d,"_cencm4f.mp4"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_cencm4f.mp4");else if(T===i.r5.ENCRYPTED_IMAGE)_="".concat(t+o,"/").concat(d,"_uenc.").concat(S),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_uenc.").concat(S);else if(T===i.r5.ENCRYPTED_SCORM)_="".concat(t+o,"/offline_sth/").concat(d,"_dcf.zip"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_dcf.zip");else if(T===i.r5.ENCRYPTED_TINCAN)_="".concat(t+o,"/offline_sth/").concat(d,"_dcf.zip"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_dcf.zip");else if(T===i.r5.ENCRYPTED_HTML)_="".concat(t+o,"/offline_sth/").concat(d,"_dcf.zip"),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_dcf.zip");else{if(T!==i.r5.UNENCRYPTED_IMAGE)return p;_="".concat(t+o,"/").concat(d,"_uenc.").concat(S),D="".concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_uenc.").concat(S)}if(E="".concat(u,"/").concat(s,"/").concat(r,"/").concat(D),l&&(_="".concat(_,"?").concat(l)),p.push({downloadPath:E,onlineUrl:_,fileName:e.fileName,totalBytes:0,fileType:T}),T===i.r5.ENCRYPTED_VIDEO){let e="".concat(c.urls.THUMBNAIL_CDN_BASE_URL,"/v3/schools/").concat(n.customerConfig.SCHOOL_ID,"/courses/").concat(s,"/").concat(o,"/").concat(d,"_HQ.png"),t="".concat(u,"/").concat(s,"/").concat(r,"/").concat(I,"_").concat(s,"_").concat(o,"_").concat(C,"_").concat(h,"_HQ.png");p.push({downloadPath:t,onlineUrl:e,fileName:"".concat(d,"_HQ.png"),totalBytes:0,fileType:i.r5.THUMBNAIL})}return p}function getSlideDataForPlay(e,t,s,r,o){if(!e||!t||t.trim().length<=0)return console.log("Invalid params in getSlideDataForPlay"),null;let a=null,l="",d="";if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.LIVE_LESSON&&e.fileType!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&e.fileType!==i.r5.TEST_TYPE&&(l=getFileNameWithOutExtn(e.fileName),d=getExtnFromFileName(e.fileName),!l||!d||l.trim().length<=0||d.trim().length<=0))return console.log("Invalid filename in getSlideDataForPlay"),null;let{fileType:S}=e;if(e.fileName&&S!==i.r5.LIVE_LESSON&&S!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?S===i.r5.ENCRYPTED_HTML?S=i.r5.ENCRYPTED_SCORM:S===i.r5.UNENCRYPTED_HTML&&(S=i.r5.UNENCRYPTED_SCORM):S===i.r5.ENCRYPTED_HTML&&(S=i.r5.UNENCRYPTED_HTML,t=t.replace("/sdrm/","/ldrm/"))),o&&o.downloadState===i.oV.SUCCESS){let t=o.downloadPath;if(t.startsWith("file://")||(t="file://".concat(t)),S===i.r5.ENCRYPTED_SCORM||S===i.r5.ENCRYPTED_TINCAN){let s=e.fileName.substring(0,e.fileName.lastIndexOf("."));t+="/".concat(s,"_dcf/").concat(e.startFile)}return{fileUrl:t,fileType:S,originalUrl:e.fileName}}S===i.r5.ENCRYPTED_SCORM?(S=i.r5.UNENCRYPTED_SCORM,t=t.replace("/sdrm/","/ldrm/")):S===i.r5.ENCRYPTED_TINCAN&&(S=i.r5.UNENCRYPTED_TINCAN,t=t.replace("/sdrm/","/ldrm/"));let _=s?"".concat(t+s,"/"):t;if(S===i.r5.LEARNYST_LIVE_UNENCRYPTED)a=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/master.m3u8"):"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/learnystlivestream.mpd");else if(S===i.r5.UNENCRYPTED_IMAGE)a="".concat(_).concat(l,"_uenc.").concat(d);else if(S===i.r5.ENCRYPTED_VIDEO)u.zO&&!p.includes(n.customerConfig.SCHOOL_ID)?a="".concat(_,"audio_video/").concat(l,"_lenc/stream.mpd"):(_=_.replace("/ldrm/","/sdrm/"),a="".concat(_,"audio_video/").concat(l,"_cenc/stream.mpd"));else if(S===i.r5.ENCRYPTED_PDF)a=u.zO?"".concat(_).concat(l,"_lenc.epdf"):"".concat(_).concat(l,"_dcf.pdf");else if(S===i.r5.UNENCRYPTED_VIDEO)a=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(_,"audio_video/").concat(l,"_uenc/stream.m3u8"):"".concat(_,"audio_video/").concat(l,"_uenc/stream.mpd");else if(S===i.r5.YOUTUBE)a=e.fileName;else if(S===i.r5.VIMEO)a=e.fileName;else if(S===i.r5.TEST_TYPE)a=e.fileName;else if(S===i.r5.UNENCRYPTED_PDF)a="".concat(_).concat(l,"_uenc.pdf");else if(S===i.r5.ENCRYPTED_AUDIO)a=u.zO?"".concat(_,"audio_video/").concat(l,"_lenc/stream.mpd"):"".concat(_,"audio_video/").concat(l,"_cenc/stream.mpd");else if(S===i.r5.UNENCRYPTED_AUDIO)a=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(_,"audio_video/").concat(l,"_uenc/stream_0.m3u8"):"".concat(_,"audio_video/").concat(l,"_uenc/stream.mpd");else if(S===i.r5.ENCRYPTED_IMAGE)a="".concat(_).concat(l,"_uenc.").concat(d);else if(S===i.r5.ENCRYPTED_SCORM)a="".concat(_,"sth/").concat(l,"_dcf/").concat(e.startFile);else if(S===i.r5.UNENCRYPTED_SCORM)a="".concat(_,"sth/").concat(l,"_uenc/").concat(e.startFile);else if(S===i.r5.ENCRYPTED_TINCAN)a="".concat(_,"sth/").concat(l,"_dcf/").concat(e.startFile);else if(S===i.r5.UNENCRYPTED_TINCAN)a="".concat(_,"sth/").concat(l,"_uenc/").concat(e.startFile);else if(S===i.r5.ENCRYPTED_HTML)a="".concat(_,"sth/").concat(l,"_dcf/").concat(e.startFile);else if(S===i.r5.UNENCRYPTED_HTML)a="".concat(_,"sth/").concat(l,"_uenc/").concat(e.startFile);else if(S===i.r5.LIVE_LESSON)a=e.fileName;else{if(S!==i.r5.ZIP_CONTENT)return console.log("getSlideDataForPlay: Invalid file type: ".concat(S)),null;a=e.fileName}return{fileUrl:a,fileType:S,originalUrl:e.fileName}}function getV4DownloadFileData(e,t,s,r,a,u,d,_,E,D){if(!e)return null;let p="",T="",C=[],h=t;if(t.includes("/sdrm/")||t.includes("/ldrm/")||t.includes("/ndrm/")){let e=t.indexOf("/sdrm/");e<0&&(e=t.indexOf("/ldrm/"))<0&&(e=t.indexOf("/ndrm/")),h=t.substring(0,e)}else"/"===t.trim().charAt(t.length-1)&&(h=t.substring(0,t.length-1));if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.TEST_TYPE&&(p=getFileNameWithOutExtn(e.fileName),T=getExtnFromFileName(e.fileName),!p||!T||p.trim().length<=0||T.trim().length<=0))return console.log("Invalid filename in getV4DownloadFileData"),C;let{fileType:I}=e;e.fileName&&I!==i.r5.LIVE_LESSON&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?I===i.r5.ENCRYPTED_HTML?I=i.r5.ENCRYPTED_SCORM:I===i.r5.UNENCRYPTED_HTML&&(I=i.r5.UNENCRYPTED_SCORM):I===i.r5.ENCRYPTED_HTML&&(I=i.r5.UNENCRYPTED_HTML));let m=a?"".concat(h,"/sdrm/").concat(a,"/"):"".concat(h,"/sdrm/"),f=a?"".concat(h,"/ldrm/").concat(a,"/"):"".concat(h,"/ldrm/"),g=m,y=f;!1===e.hasFullyTranscoded&&(g=g.replace("/sdrm/","/sdrm_p/"),y=y.replace("/ldrm/","/ldrm_p/"));let A=e.fileId?e.fileId:0,N=u||0,R=t.indexOf("paid")>0?"PLYST":"TLYST";t.indexOf("paid");let P=[];if(I===i.r5.ENCRYPTED_VIDEO||I===i.r5.ENCRYPTED_AUDIO){let r;let u=e&&e.numOfFormats>0?e.numOfFormats:1;r=E===S.V.AVERAGE?4:E===S.V.GOOD?3:E===S.V.BETTER?2:1;let d=null===l.tJ||void 0===l.tJ?void 0:l.tJ.getValueSync("playerIgnore1080pTrack",1,0),_=0;d&&(_=d.val),console.log("getV6DownloadFileData: ignore1080pTrack = ".concat(_)),console.log("getV6DownloadFileData: numberOfVideoFormatsAvailable = ".concat(u)),_&&u>=3&&1==r&&(r=2,console.log("getV6DownloadFileData: Changed High Quality to Medium Quality"));let T="cenc",C="cenc";if(5==D){if(c.OS===c.vO.DEVICE_ANDROID){T="ctr";let e=t.indexOf("/trial/")>0;C=!0===e?"ctr":"lctr"}}else c.OS===c.vO.DEVICE_ANDROID&&(o().validate(c.UU)&&o().compare(c.UU,"7.1.2","<=")||n.Ii.forceLegacyDrm)&&(T="ctr",C="ctr");u<r&&(r=u);let h=["NA","dashHighQualityVideoStream.mp4","dashMediumQualityVideoStream.mp4","dashAverageQualityVideoStream.mp4","dashLowQualityVideoStream.mp4"][r],f=["NA","_HQ","_MQ","_AQ","_LQ"][r],y="".concat(g,"audio_video/").concat(p,"_").concat(T,"/").concat(p,"dashAudioStream.mp4"),L="".concat(g,"audio_video/").concat(p,"_").concat(T,"/").concat(p).concat(h),v="".concat(g,"audio_video/").concat(p,"_").concat(T,"/OfflineDash_Video").concat(f,"_").concat(T,".mpd"),O="".concat(g,"audio_video/").concat(p,"_").concat(T,"/OfflineHls_Video").concat(f,"_").concat(T,".m3u8"),U="".concat(g,"audio_video/").concat(p,"_").concat(T,"/OfflineHls_Stream_Audio.m3u8"),F="".concat(g,"audio_video/").concat(p,"_").concat(T,"/OfflineHls_Stream_Video").concat(f,".m3u8"),w="".concat(g,"audio_video/").concat(p,"_").concat(T,"/OfflineDash_Audio_").concat(T,".mpd");I===i.r5.ENCRYPTED_VIDEO?(c.OS===c.vO.DEVICE_IOS?(P.push({onlineUrl:O,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-2_").concat(N,"_stream_").concat(C,".m3u8"),fileName:"".concat(p,"_stream_").concat(T,".m3u8")}),P.push({onlineUrl:F,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-3_0_video_").concat(C,".m3u8"),fileName:"".concat(p,"_video_").concat(T,".m3u8")}),P.push({onlineUrl:U,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-4_0_audio_").concat(C,".m3u8"),fileName:"".concat(p,"_audio_").concat(T,".m3u8")})):P.push({onlineUrl:v,alternateUrlList:[],downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-1_").concat(N,"_stream_").concat(C,".mpd"),fileName:"".concat(p,"_stream_").concat(T,".mpd")}),P.push({onlineUrl:L,alternateUrlList:[],downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-5_0_videostream.mp4"),fileName:"".concat(p,"_videostream.mp4")}),P.push({onlineUrl:y,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-6_0_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")})):c.OS===c.vO.DEVICE_IOS?(P.push({onlineUrl:U,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-2_").concat(N,"_stream_").concat(C,".m3u8"),fileName:"".concat(p,"_stream_").concat(T,".m3u8")}),P.push({onlineUrl:y,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-6_0_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")})):(P.push({onlineUrl:w,downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-1_").concat(N,"_stream_").concat(C,".mpd"),fileName:"".concat(p,"_stream_").concat(T,".mpd")}),P.push({onlineUrl:"".concat(m,"audio_video/").concat(p,"_").concat(T,"/").concat(p,"dashAudioStream.mp4"),downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"-6_0_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")}))}else if(I===i.r5.ENCRYPTED_PDF)P.push({onlineUrl:"".concat(f).concat(p,"_lenc.epdf"),downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"_").concat(N,"_lenc.pdf")});else if(I===i.r5.ENCRYPTED_IMAGE)P.push({onlineUrl:"".concat(f).concat(p,"_lenc.").concat(T),downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"_").concat(N,"_lenc.").concat(T)});else{if(I!==i.r5.ENCRYPTED_SCORM&&I!==i.r5.ENCRYPTED_TINCAN&&I!==i.r5.ENCRYPTED_HTML)return C;P.push({onlineUrl:"".concat(f,"offline_sth/").concat(p,"_lenc.zip"),downloadFileName:"".concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"_").concat(N,"_lenc.zip")})}let L="".concat(_,"/").concat(s,"/").concat(r);if(d){for(let e=0;e<P.length;e++)if(P[e].alternateUrlList&&P[e].alternateUrlList.length>0)for(let t=0;t<P[e].alternateUrlList.length;t++)P[e].alternateUrlList[t]="".concat(P[e].alternateUrlList[t],"?").concat(d)}for(let t=0;t<P.length;t++)C.push({downloadPath:"".concat(L,"/").concat(P[t].downloadFileName),onlineUrl:d?"".concat(P[t].onlineUrl,"?").concat(d):P[t].onlineUrl,fileName:P[t].fileName?P[t].fileName:e.fileName,totalBytes:0,fileType:I,alternateOnlineUrls:P[t].alternateUrlList});if(I===i.r5.ENCRYPTED_VIDEO){let e="".concat(c.urls.THUMBNAIL_CDN_BASE_URL,"/v").concat(D,"/schools/").concat(n.customerConfig.SCHOOL_ID,"/courses/").concat(s,"/").concat(a,"/").concat(p,"_HQ.png"),t="".concat(_,"/").concat(s,"/").concat(r,"/").concat(R,"_").concat(s,"_").concat(a,"_").concat(A,"_").concat(N,"_HQ.png");C.push({downloadPath:t,onlineUrl:e,fileName:"".concat(p,"_HQ.png"),totalBytes:0,fileType:i.r5.THUMBNAIL})}return C}function getV6DownloadFileData(e,t,s,r,o,n,a,u,d,_,E){let D;if(!e)return null;let p="",T="",C=[];if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.TEST_TYPE&&(p=getFileNameWithOutExtn(e.fileName),T=getExtnFromFileName(e.fileName),!p||!T||p.trim().length<=0||T.trim().length<=0))return console.log("Invalid filename in getV4DownloadFileData"),C;let{fileType:h}=e;e.fileName&&h!==i.r5.LIVE_LESSON&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?h===i.r5.ENCRYPTED_HTML?h=i.r5.ENCRYPTED_SCORM:h===i.r5.UNENCRYPTED_HTML&&(h=i.r5.UNENCRYPTED_SCORM):h===i.r5.ENCRYPTED_HTML&&(h=i.r5.UNENCRYPTED_HTML));let I=e.fileId?e.fileId:0,m=n||0,f="ULYST",g=[],{contentPath:y}=e;D=c.OS===c.vO.DEVICE_ANDROID||c.OS===c.vO.DEVICE_WINDOWS?e.contentId.split("/")[0]:e.contentId.split("/")[1];let A=e.contentPathExtn.split("/")[1],N="".concat(Date.now(),"_").concat(Math.ceil(1e9*Math.random()));if(h===i.r5.ENCRYPTED_VIDEO||h===i.r5.ENCRYPTED_AUDIO){let r;let n=e&&e.numOfFormats>0?e.numOfFormats:1;r=d===S.V.AVERAGE?4:d===S.V.GOOD?3:d===S.V.BETTER?2:1;let a="cbcs",u="cbcs";(c.OS===c.vO.DEVICE_ANDROID||c.OS===c.vO.DEVICE_WINDOWS)&&(a="ctr",u="lctr");let _=null===l.tJ||void 0===l.tJ?void 0:l.tJ.getValueSync("playerIgnore1080pTrack",1,0),E=0;_&&(E=_.val),console.log("getV6DownloadFileData: ignore1080pTrack = ".concat(E)),console.log("getV6DownloadFileData: numberOfVideoFormatsAvailable = ".concat(n)),E&&n>=3&&1==r&&(r=2,console.log("getV6DownloadFileData: Changed High Quality to Medium Quality")),n<r&&(r=n);let T=["NA","vHQStream.mp4","vMQStream.mp4","vAQStream.mp4","vLQStream.mp4"][r],C=["NA","_HQ","_MQ","_AQ","_LQ"][r],R="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/aStream.mp4"),P="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/").concat(T),L="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/OfflineDash_Video").concat(C,"_").concat(a,".lds"),v="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/OfflineHls_Video").concat(C,"_").concat(a,".m3u8"),O="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/OfflineHls_Stream_Audio.m3u8"),U="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/OfflineHls_Stream_Video").concat(C,".m3u8"),F="".concat(t).concat(y,"/").concat(A,"/sdrm/").concat(a,"/audio_video/OfflineDash_Audio_").concat(a,".lds"),w=[];h===i.r5.ENCRYPTED_VIDEO?c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC?(g.push({onlineUrl:v,downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"-2_").concat(m,"_stream_").concat(u,".m3u8"),fileName:"".concat(p,"_stream_").concat(a,".m3u8")}),g.push({onlineUrl:U,downloadFileName:"".concat(f,"_1_1_").concat(D,"-3_Stream_Video_").concat(u,".m3u8"),fileName:"".concat(p,"_video_").concat(a,".m3u8")}),g.push({onlineUrl:O,downloadFileName:"".concat(f,"_1_1_").concat(D,"-4_Stream_Audio_").concat(u,".m3u8"),fileName:"".concat(p,"_audio_").concat(a,".m3u8")}),g.push({onlineUrl:P,alternateUrlList:w,downloadFileName:"".concat(f,"_1_1_").concat(D,"-5_videostream.mp4"),fileName:"".concat(p,"_videostream.mp4")}),g.push({onlineUrl:R,downloadFileName:"".concat(f,"_1_1_").concat(D,"-6_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")}),g.push({onlineUrl:v,downloadFileName:"license.lic.".concat(N),fileName:"license.lic.".concat(N)})):(g.push({onlineUrl:L,alternateUrlList:[],downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"-1_").concat(m,"_stream_").concat(u,".lds"),fileName:"".concat(p,"_stream_").concat(a,".lds")}),g.push({onlineUrl:P,alternateUrlList:w,downloadFileName:"".concat(f,"_1_1_").concat(D,"-5_videostream.mp4"),fileName:"".concat(p,"_videostream.mp4")}),g.push({onlineUrl:R,downloadFileName:"".concat(f,"_1_1_").concat(D,"-6_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")}),g.push({onlineUrl:L,downloadFileName:"license.lic.".concat(N),fileName:"license.lic.".concat(N)})):c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC?(g.push({onlineUrl:O,downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"-2_").concat(m,"_stream_").concat(u,".m3u8"),fileName:"".concat(p,"_stream_").concat(a,".m3u8")}),g.push({onlineUrl:R,downloadFileName:"".concat(f,"_1_1_").concat(D,"-6_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")}),g.push({onlineUrl:O,downloadFileName:"license.lic.".concat(N),fileName:"license.lic.".concat(N)})):(g.push({onlineUrl:F,downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"-1_").concat(m,"_stream_").concat(u,".lds"),fileName:"".concat(p,"_stream_").concat(a,".lds")}),g.push({onlineUrl:R,downloadFileName:"".concat(f,"_1_1_").concat(D,"-6_audiostream.mp4"),fileName:"".concat(p,"_audiostream.mp4")}),g.push({onlineUrl:F,downloadFileName:"license.lic.".concat(N),fileName:"license.lic.".concat(N)}))}else if(h===i.r5.ENCRYPTED_PDF)g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/pdfFile_lenc.epdf"),downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"_").concat(m,"_lenc.pdf")}),g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/pdfFile_lenc.epdf"),downloadFileName:"license.lic.".concat(N)});else if(h===i.r5.ENCRYPTED_IMAGE)g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/imgFile_lenc.").concat(T),downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"_").concat(m,"_lenc.").concat(T)}),g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/imgFile_lenc.").concat(T),downloadFileName:"license.lic.".concat(N)});else{if(h!==i.r5.ENCRYPTED_SCORM&&h!==i.r5.ENCRYPTED_TINCAN&&h!==i.r5.ENCRYPTED_HTML)return C;g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/sthFile_lenc.zip"),downloadFileName:"".concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"_").concat(m,"_lenc.zip")}),g.push({onlineUrl:"".concat(t).concat(y,"/").concat(A,"/ldrm/sthFile_lenc.zip"),downloadFileName:"license.lic.".concat(N)})}let R="".concat(u,"/").concat(s,"/").concat(o);if(a){for(let e=0;e<g.length;e++)if(g[e].alternateUrlList&&g[e].alternateUrlList.length>0)for(let t=0;t<g[e].alternateUrlList.length;t++)g[e].alternateUrlList[t]="".concat(g[e].alternateUrlList[t],"?").concat(a)}for(let t=0;t<g.length;t++)C.push({downloadPath:"".concat(R,"/").concat(g[t].downloadFileName),onlineUrl:a?"".concat(g[t].onlineUrl,"?").concat(a):g[t].onlineUrl,fileName:g[t].fileName?g[t].fileName:g[t].downloadFileName.indexOf("license.lic")>=0?g[t].downloadFileName:e.fileName,totalBytes:0,fileType:h,alternateOnlineUrls:g[t].alternateUrlList,contentPath:y,contentId:e.contentId});if(h===i.r5.ENCRYPTED_VIDEO){let e="".concat(c.urls.THUMBNAIL_CDN_BASE_URL,"/v6/schools/").concat(y,"/thumbnail_HQ.png"),t="".concat(u,"/").concat(s,"/").concat(o,"/").concat(f,"_").concat(s,"_").concat(o,"_").concat(I,"_").concat(m,"_HQ.png");C.push({downloadPath:t,onlineUrl:e,fileName:"".concat(p,"_HQ.png"),totalBytes:0,fileType:i.r5.THUMBNAIL,contentPath:y})}return C}function getV6SlideDataForPlay(e,t,s,r,o,a){if(!e||!t||t.trim().length<=0)return console.log("Invalid params in getV6SlideDataForPlay"),null;let l=null,u="",d="";if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.LIVE_LESSON&&e.fileType!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&e.fileType!==i.r5.TEST_TYPE&&(u=getFileNameWithOutExtn(e.fileName),d=getExtnFromFileName(e.fileName),!u||!d||u.trim().length<=0||d.trim().length<=0))return console.log("Invalid filename in getV6SlideDataForPlay"),null;let{fileType:S}=e;if(e.fileName&&S!==i.r5.LIVE_LESSON&&S!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?S===i.r5.ENCRYPTED_HTML?S=i.r5.ENCRYPTED_SCORM:S===i.r5.UNENCRYPTED_HTML&&(S=i.r5.UNENCRYPTED_SCORM):S===i.r5.ENCRYPTED_HTML&&(S=i.r5.UNENCRYPTED_HTML)),o&&console.log("!!!!!!downloadedSlide.downloadState = ".concat(o.downloadState)),o&&o.downloadState===i.oV.SUCCESS){let t=o.downloadPath;if(t.startsWith("file://")||(t="file://".concat(t)),S===i.r5.ENCRYPTED_SCORM||S===i.r5.ENCRYPTED_TINCAN){let s="sthFile";0>=t.indexOf("/ULYST_")&&(s=u),t.trim().endsWith("_dcf")?t+="/".concat(s,"_dcf/").concat(e.startFile):t+="/".concat(s,"_lenc/").concat(e.startFile)}return(S===i.r5.ENCRYPTED_VIDEO||S===i.r5.ENCRYPTED_AUDIO)&&c.OS!==c.vO.DEVICE_WINDOWS&&t.indexOf("/ULYST_")>0&&(t=t.replace(".lds",".mpd")),{fileUrl:t,fileType:S,originalUrl:e.fileName}}S===i.r5.ENCRYPTED_SCORM?S=i.r5.UNENCRYPTED_SCORM:S===i.r5.ENCRYPTED_TINCAN&&(S=i.r5.UNENCRYPTED_TINCAN);let _=e.contentPath||null,E=e.contentPathExtn?e.contentPathExtn.split("/")[0]:null,D=e.contentPathExtn?e.contentPathExtn.split("/")[1]:null;if(S===i.r5.LEARNYST_LIVE_UNENCRYPTED)l=c.OS!==c.vO.DEVICE_IOS&&(c.OS!==c.vO.DEVICE_WEB&&c.OS!==c.vO.DEVICE_WINDOWS||isBrowserSupported())?"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/learnystlivestream.mpd"):"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/master.m3u8");else if(S===i.r5.UNENCRYPTED_IMAGE)l="".concat(t).concat(_,"/").concat(E,"/ndrm/imgFile_uenc.").concat(d);else if(S===i.r5.ENCRYPTED_VIDEO||S===i.r5.ENCRYPTED_AUDIO)l=c.OS===c.vO.DEVICE_IOS||c.OS===c.vO.DEVICE_MAC?"".concat(t).concat(_,"/").concat(D,"/sdrm/cbcs/audio_video/stream.m3u8"):c.OS===c.vO.DEVICE_WEB||c.OS===c.vO.DEVICE_WINDOWS?"".concat(t).concat(_,"/").concat(D,"/sdrm/ctr/audio_video/stream.lds"):"".concat(t).concat(_,"/").concat(D,"/sdrm/ctr/audio_video/stream.mpd");else if(S===i.r5.ENCRYPTED_PDF)l="".concat(t).concat(_,"/").concat(D,"/ldrm/pdfFile_lenc.epdf");else if(S===i.r5.UNENCRYPTED_VIDEO)l=c.OS!==c.vO.DEVICE_IOS&&(c.OS!==c.vO.DEVICE_WEB||isBrowserSupported())?"".concat(t).concat(_,"/").concat(E,"/ndrm/audio_video/stream.mpd"):"".concat(t).concat(_,"/").concat(E,"/ndrm/audio_video/stream.m3u8");else if(S===i.r5.YOUTUBE)l=e.fileName;else if(S===i.r5.VIMEO)l=e.fileName;else if(S===i.r5.TEST_TYPE)l=e.fileName;else if(S===i.r5.UNENCRYPTED_PDF)l="".concat(t).concat(_,"/").concat(E,"/ndrm/pdfFile_uenc.pdf");else if(S===i.r5.UNENCRYPTED_AUDIO)l=c.OS!==c.vO.DEVICE_IOS&&(c.OS!==c.vO.DEVICE_WEB||isBrowserSupported())?"".concat(t).concat(_,"/").concat(E,"/ndrm/audio_video/stream.mpd"):"".concat(t).concat(_,"/").concat(E,"/ndrm/audio_video/Stream_Audio.m3u8");else if(S===i.r5.ENCRYPTED_IMAGE)l="".concat(t).concat(_,"/").concat(E,"/ndrm/imgFile_uenc.").concat(d);else if(S===i.r5.UNENCRYPTED_SCORM)l="".concat(t).concat(_,"/").concat(E,"/ndrm/sth/").concat(e.startFile);else if(S===i.r5.UNENCRYPTED_TINCAN)l="".concat(t).concat(_,"/").concat(E,"/ndrm/sth/").concat(e.startFile);else if(S===i.r5.UNENCRYPTED_HTML)l="".concat(t).concat(_,"/").concat(E,"/ndrm/sth/").concat(e.startFile);else if(S===i.r5.LIVE_LESSON)l=e.fileName;else{if(S!==i.r5.ZIP_CONTENT)return console.log("getV6SlideDataForPlay: Invalid file type: ".concat(S)),null;l=e.fileName}return{fileUrl:l,fileType:S,originalUrl:e.fileName,hasFullyTranscoded:e.hasFullyTranscoded}}function getV4SlideDataForPlay(e,t,s,r,a,l){if(!e||!t||t.trim().length<=0)return console.log("Invalid params in getV4SlideDataForPlay"),null;let d=null,S="",_="",E=t;if(t.includes("/sdrm/")||t.includes("/ldrm/")||t.includes("/ndrm/")){let e=t.indexOf("/sdrm/");e<0&&(e=t.indexOf("/ldrm/"))<0&&(e=t.indexOf("/ndrm/")),E=t.substring(0,e)}if(e.fileType!==i.r5.YOUTUBE&&e.fileType!==i.r5.VIMEO&&e.fileType!==i.r5.LIVE_LESSON&&e.fileType!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&e.fileType!==i.r5.TEST_TYPE&&(S=getFileNameWithOutExtn(e.fileName),_=getExtnFromFileName(e.fileName),!S||!_||S.trim().length<=0||_.trim().length<=0))return console.log("Invalid filename in getV4SlideDataForPlay"),null;let{fileType:D}=e;if(e.fileName&&D!==i.r5.LIVE_LESSON&&D!==i.r5.LEARNYST_LIVE_UNENCRYPTED&&(0>e.fileName.toLowerCase().trim().indexOf("htmllesson.html")?D===i.r5.ENCRYPTED_HTML?D=i.r5.ENCRYPTED_SCORM:D===i.r5.UNENCRYPTED_HTML&&(D=i.r5.UNENCRYPTED_SCORM):D===i.r5.ENCRYPTED_HTML&&(D=i.r5.UNENCRYPTED_HTML)),a&&console.log("!!!!!!downloadedSlide.downloadState = ".concat(a.downloadState)),a&&a.downloadState===i.oV.SUCCESS){let t=a.downloadPath;if(t.startsWith("file://")||(t="file://".concat(t)),D===i.r5.ENCRYPTED_SCORM||D===i.r5.ENCRYPTED_TINCAN){let s=e.fileName.substring(0,e.fileName.lastIndexOf("."));t.trim().endsWith("_dcf")?t+="/".concat(s,"_dcf/").concat(e.startFile):t+="/".concat(s,"_lenc/").concat(e.startFile)}return{fileUrl:t,fileType:D,originalUrl:e.fileName}}D===i.r5.ENCRYPTED_SCORM?D=i.r5.UNENCRYPTED_SCORM:D===i.r5.ENCRYPTED_TINCAN&&(D=i.r5.UNENCRYPTED_TINCAN);let p=s?"".concat(E,"/ndrm/").concat(s,"/"):"".concat(E,"/ndrm/"),T=s?"".concat(E,"/sdrm/").concat(s,"/"):"".concat(E,"/sdrm/"),C=s?"".concat(E,"/ldrm/").concat(s,"/"):"".concat(E,"/ldrm/"),h=T,I=C,m=p;if(!1===e.hasFullyTranscoded&&(h=h.replace("/sdrm/","/sdrm_p/"),I=I.replace("/ldrm/","/ldrm_p/"),m=m.replace("/ndrm/","/ndrm_p/")),D===i.r5.LEARNYST_LIVE_UNENCRYPTED)d=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/master.m3u8"):"".concat(c.urls.CDN_BASE_URL,"/learnystlive/").concat(n.customerConfig.SCHOOL_ID,"/").concat(r,"/").concat(s,"/learnystlivestream.mpd");else if(D===i.r5.UNENCRYPTED_IMAGE)d="".concat(p).concat(S,"_uenc.").concat(_);else if(D===i.r5.ENCRYPTED_VIDEO||D===i.r5.ENCRYPTED_AUDIO)d=u.zO?5===l?"".concat(h,"audio_video/").concat(S,"_ctr/stream.mpd"):"".concat(h,"audio_video/").concat(S,"_cenc/stream.mpd"):c.OS===c.vO.DEVICE_IOS?"".concat(h,"audio_video/").concat(S,"_cenc/stream.m3u8"):5===l?"".concat(h,"audio_video/").concat(S,"_ctr/stream.mpd"):o().validate(c.UU)&&o().compare(c.UU,"7.1.2","<=")||n.Ii.forceLegacyDrm?"".concat(h,"audio_video/").concat(S,"_ctr/stream.mpd"):"".concat(h,"audio_video/").concat(S,"_cenc/stream.mpd");else if(D===i.r5.ENCRYPTED_PDF)d="".concat(C).concat(S,"_lenc.epdf");else if(D===i.r5.UNENCRYPTED_VIDEO)d=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(m,"audio_video/").concat(S,"_uenc/stream.m3u8"):"".concat(m,"audio_video/").concat(S,"_uenc/stream.mpd");else if(D===i.r5.YOUTUBE)d=e.fileName;else if(D===i.r5.VIMEO)d=e.fileName;else if(D===i.r5.TEST_TYPE)d=e.fileName;else if(D===i.r5.UNENCRYPTED_PDF)d="".concat(p).concat(S,"_uenc.pdf");else if(D===i.r5.UNENCRYPTED_AUDIO)d=c.OS===c.vO.DEVICE_IOS||u.zO&&!isBrowserSupported()?"".concat(m,"audio_video/").concat(S,"_uenc/Stream_Audio.m3u8"):"".concat(m,"audio_video/").concat(S,"_uenc/stream.mpd");else if(D===i.r5.ENCRYPTED_IMAGE)d=u.zO?"".concat(p).concat(S,"_uenc.").concat(_):"".concat(C).concat(S,"_lenc.").concat(_);else if(D===i.r5.UNENCRYPTED_SCORM)d="".concat(p,"sth/").concat(S,"_uenc/").concat(e.startFile);else if(D===i.r5.UNENCRYPTED_TINCAN)d="".concat(p,"sth/").concat(S,"_uenc/").concat(e.startFile);else if(D===i.r5.UNENCRYPTED_HTML)d="".concat(p,"sth/").concat(S,"_uenc/").concat(e.startFile);else if(D===i.r5.LIVE_LESSON)d=e.fileName;else{if(D!==i.r5.ZIP_CONTENT)return console.log("getV4SlideDataForPlay: Invalid file type: ".concat(D)),null;d=e.fileName}return{fileUrl:d,fileType:D,originalUrl:e.fileName,hasFullyTranscoded:e.hasFullyTranscoded}}function constructSlideDataForLessonPlay(e,t,s,r,o,n,l){let d;if(!e||!r)return console.log("Invalid params in constructSlideDataForLessonPlay"),[];if(e.slides.slideIds.length<=0)return console.log("constructSlideDataForLessonPlay: No slides"),[];let S=r.split("?")[0];if(S.trim().length<=0)return console.log("constructSlideDataForLessonPlay: invalid baseurl"),[];"*"===(S=S.trim()).charAt(S.length-1)&&(S=S.substring(0,S.length-1));let _=e.slides.slideIds.length,E=[];if(n){var D;let r=null==n?void 0:null===(D=n.courses)||void 0===D?void 0:D[c.OS===c.vO.DEVICE_WINDOWS||c.OS===c.vO.DEVICE_MAC?t:(0,a.Un)(t,l)];if(r){let t=r.sections[e.sectionId];if(t){let e=t.lessons[s];e&&e.downloadState===i.oV.SUCCESS&&(d=e.slides)}}}for(let o=0;o<_;o++){let n,_;let D=e.slides.slideIds[o],p=e.slides.slideDetails[D];if(d){let r;let o=getAllFileSetsOfSlide(p.fileType,p.fileName,p.fileId),u=!1;for(let S=0;S<o.length;S++){let _=o[S];u=!1,r=null;for(let o=0;o<_.length;o++){let n=(0,a.WU)(c.OS===c.vO.DEVICE_WINDOWS||c.OS===c.vO.DEVICE_MAC?t:(0,a.Un)(t,l),e.sectionId,s,_[o].fileName),S=d[n];if(!S||S.downloadState!==i.oV.SUCCESS){u=!0;break}!0===_[o].isMainFile&&(r=_[o].fileName)}if(!1===u){let o=(0,a.WU)(c.OS===c.vO.DEVICE_WINDOWS||c.OS===c.vO.DEVICE_MAC?t:(0,a.Un)(t,l),e.sectionId,s,r);n=d[o];break}}}if(r.includes("/v4/")||r.includes("/v5/")){let e=r.includes("/v5/")?5:4;_=getV4SlideDataForPlay(p,S,s,t,n,e)}else _=r.includes("/v6/")?getV6SlideDataForPlay(p,S,s,t,n,6):getSlideDataForPlay(p,S,s,t,n);let T="";if(_.originalUrl){if(_.originalUrl.includes("youtube.com")||_.originalUrl.includes("youtu.be"))T=(0,u.P9)(_.originalUrl);else{let e=_.originalUrl.lastIndexOf("/")+1;T=_.originalUrl.substr(e)}}_&&E.push({fileType:_.fileType,uri:_.fileUrl,hasFullyTranscoded:_.hasFullyTranscoded,slideState:p.slideState,bookmarkFileName:T,serverFileId:p.fileId,contentId:p.contentId,contentPath:p.contentPath,contentPathExtn:p.contentPathExtn})}return E}function constructSlideDataForLessonDownload(e,t,s,r,o,n,i,a){if(!r||!o||!n)return console.log("Invalid params in constructSlideDataForLessonDownload ".concat(n)),[];if(r.slides.slideIds.length<=0)return console.log("constructSlideDataForLessonDownload: No slides"),[];if(!r.hasDownloadableSlides)return console.log("constructSlideDataForLessonDownload: No slides to download"),[];let l=o.split("?")[0];if(l.trim().length<=0)return console.log("constructSlideDataForLessonDownload: invalid baseurl"),[];"*"===(l=l.trim()).charAt(l.length-1)&&(l=l.substring(0,l.length-1));let c=o.split("?")[1],u=r.slides.slideIds.length,d=[];for(let S=0;S<u;S++){let u;let _=r.slides.slideIds[S],E=r.slides.slideDetails[_],D=3;o.includes("/v4/")?D=4:o.includes("/v5/")?D=5:o.includes("/v6/")&&(D=6),u=4===D||5===D?getV4DownloadFileData(E,l,e,t,s,r.lessonVersion,c,n,i,D):6===D?getV6DownloadFileData(E,l,e,t,s,r.lessonVersion,c,n,i,D,a):getDownloadFileData(E,l,e,t,s,r.lessonVersion,c,n);for(let e=0;e<u.length;e++){let t=u[e];d.push({onlineUrl:t.onlineUrl,downloadPath:t.downloadPath,fileName:t.fileName,totalBytes:t.totalBytes,fileType:t.fileType,alternateOnlineUrls:t.alternateOnlineUrls,contentPath:t.contentPath,contentId:t.contentId})}}return d}function getAllFilesToDownload(e,t,s,r,o,n,i,l){if(!e)return null;if(e.sections.sectionIds.length<=0)return console.log("getAllFilesToDownload, No sections"),null;let u={courseId:c.OS===c.vO.DEVICE_WINDOWS||c.OS===c.vO.DEVICE_MAC?s:(0,a.Un)(s,i),sections:[]},d=e.sections.sectionIds.length;for(let a=0;a<d;a++){let c=e.sections.sectionIds[a];if(!(r===c||!r))continue;let d=e.sections.sectionDetails[c];if(!d){console.log("getAllFilesToDownload: section not found: ".concat(c));continue}if(d.lessonIds.length<=0){console.log("getAllFilesToDownload: emption section: ".concat(c));continue}let S={sectionId:c,lessons:[]};u.sections.push(S);let _=d.lessonIds.length;for(let r=0;r<_;r++){let a=d.lessonIds[r];if(!(o===a||!o))continue;let u=e.lessons.lessonDetails[a];if(!u){console.log("getAllFilesToDownload: lesson not found: ".concat(a));continue}let _=constructSlideDataForLessonDownload(s,c,a,u,t,n,l,i),E=_.length;if(E<=0)continue;let D={lessonId:a,lessonVersion:u.lessonVersion,slides:[]};S.lessons.push(D);for(let e=0;e<E;e++){let t=_[e];D.slides.push(t)}}}return u}let convertTimeStringToSeconds=e=>{var t;if(!e)return 0;let s=null==e?void 0:null===(t=e.split(":"))||void 0===t?void 0:t.map(parseFloat),r=0;return 3===s.length?r=3600*s[0]+60*s[1]+s[2]:2===s.length?r=60*s[0]+s[1]:1===s.length&&(r=s[0]),r},formatTimeStringToHHMMSS=e=>{var t;let s=e.split(":");for(;s.length<3;)s.unshift("0");return null===(t=s.map(e=>null==e?void 0:e.padStart(2,"0")))||void 0===t?void 0:t.join(":")},getAllTextNodes=e=>{let t=[];return e.forEach(e=>{"text"===e.type?t.push(e.data):"tag"===e.type&&("br"===e.name?t.push("\n"):t=t.concat(getAllTextNodes(e.children)))}),t},constructChaptersDataForPlayer=(e,t)=>{if(!e||!t)return null;try{var s,r;let o=new(D())((e,t)=>{e&&console.error("Error in DomHandler:: ",e)}),n=new _.Parser(o,{decodeEntities:!0});n.write(e),n.end();let i=o.dom,a=null===(r=getAllTextNodes(i))||void 0===r?void 0:null===(s=r.join(""))||void 0===s?void 0:s.split("\n"),l=[],c=/\b(\d{1,2}:\d{2}(?::\d{2})?)\b/;return a.forEach(e=>{var s;let r=null==e?void 0:null===(s=e.trim())||void 0===s?void 0:s.match(c);if(e&&r){let s=r[0],o=formatTimeStringToHHMMSS(s),n=e.replace(s,"").trim(),i=convertTimeStringToSeconds(o),a=parseFloat(i)/parseFloat(t);!Number.isNaN(a)&&a<=1&&l.push({startTime:o,name:n,timeFrame:i,position:a})}}),l}catch(e){return console.log("Exception in constructing chapters:: ",e),[]}}},57459:function(e,t,s){"use strict";s.d(t,{Ei:function(){return cleanupHangedDownloads},KI:function(){return addNewDownloads},Sp:function(){return clearInvalidDownloadRequestsFromQueue},TM:function(){return getLessonDownloadData},Vq:function(){return isAnyDownloadAttempted},XX:function(){return removeNonSuccessDownloads},ZG:function(){return handleDownloadResult},b5:function(){return removeAllMatchesFromQueue},dJ:function(){return getDownloadedFileList},dj:function(){return startDownload},in:function(){return syncDownloadDataWithScannedFilesAndCourses},lH:function(){return isSlideDownloadable},qq:function(){return isUserSelectedDirectoryChanged},sR:function(){return handleDownloadProgress},sT:function(){return handleDownloadStart},tZ:function(){return getSlideObjectFromDownloads},ud:function(){return removeFromDownloads},uv:function(){return isAnyCourseDataChangedFromLastSync},z2:function(){return isAnyDownloadInProgress}});var r=s(78445),o=s(75378),n=s(73704),i=s(67717),a=s(97425),l=s(47746),c=s(73462);function addSlideToDownloads(e,t,s,o,n,i,l,c,u){console.log("addSlideToDownloads: ".concat(t,":").concat(s,":").concat(o));let d=e[t];d||(e[t]={...n},d=e[t]);let{sections:S}=d,_=S[s];_||(S[s]={...i},_=S[s]);let{lessons:E}=_,D=E[o];D||(E[o]={...l},D=E[o]);let p=(0,a.WU)(t,s,o,c.fileName),{slides:T}=D,C=T[p];if(C){if(!0!=(C.downloadState!==r.oV.SUCCESS&&C.downloadState!==r.oV.QUEUED&&C.downloadState!==r.oV.INPROGRESS))return!1;delete D.slides[p],T[p]={...c},D.downloadState=r.oV.QUEUED,D.version=l.version}else T[p]={...c},D.downloadState=r.oV.QUEUED,D.version=l.version;return!0}function addToDownloadQueue(e,t,s,r,n){e.push(new o.Th(t,s,r,n))}function removeAllMatchesFromQueue(e,t,s,r){e.downloadQueue=e.downloadQueue.filter(e=>{let o=s&&s>0?s:e.sectionId,n=r&&r>0?r:e.lessonId;return o!==e.sectionId||n!==e.lessonId||t!==e.courseId})}function removeFromDownloads(e,t,s,r){if(console.log("download: removing downloads for ".concat(t,":").concat(s,":").concat(r)),!t||t<=0){console.log("download: removeFromDownloads, invalid courseId");return}let o=e[t];if(!o){console.log("download: removeFromDownloads, courseId doesnot exist");return}if(!s||s<=0){delete e[t];return}let n=o.sections[s];if(!n){console.log("download: removeFromDownloads, sectionId doesnot exist");return}if(!r||r<=0){delete o.sections[s];return}let i=n.lessons[r];if(!i){console.log("download: removeFromDownloads, lessonId doesnot exist");return}delete n.lessons[r]}function removeNonSuccessDownloads(e,t,s,o){let n=e[t];if(!n||t<=0){console.log("download: removeNonSuccessDownloads, invalid courseId");return}for(let e in n.sections)if(n.sections.hasOwnProperty(e)){if(parseInt(e)!==s&&s)continue;let t=n.sections[e],i=!1,a=!1;for(let e in t.lessons)if(t.lessons.hasOwnProperty(e)){if(parseInt(e)!==o&&o){a=!0;continue}let s=t.lessons[e],n=!1,l=!1;for(let e in s.slides)if(s.slides.hasOwnProperty(e)){let t=s.slides[e];t.downloadState===r.oV.SUCCESS?n=!0:(t.downloadState=r.oV.FAILED,l=!0)}!0===n?!0===l?(i=!0,s.downloadState=r.oV.PARTIALLY_SUCCESS):(i=!0,s.downloadState=r.oV.SUCCESS):delete t.lessons[e]}!0!==i&&!1===a&&delete n.sections[e]}}function removeCurrentDownloadFromQueue(e){e.length<=0||e.shift()}function getSlideObjectFromDownloads(e,t,s,r,o){let n=e[t];if(n){let e=n.sections[s];if(e){let n=e.lessons[r];if(n){let e=(0,a.WU)(t,s,r,o),i=n.slides[e];if(i)return i;console.log("download: failed to get slide object for course: ".concat(t," section: ").concat(s," lesson: ").concat(r," fileName: ").concat(o))}}}return null}function getSlideDownloadState(e,t,s,o,n){let i=getSlideObjectFromDownloads(e,t,s,o,n);return i?i.downloadState:r.oV.INVALID}function isSlideDownloadable(e,t){if(t.indexOf("zoom_recording.mp4")>=0)return!1;let s=e;return t&&s!==r.r5.LIVE_LESSON&&(0>t.toLowerCase().trim().indexOf("htmllesson.html")?s===r.r5.ENCRYPTED_HTML?s=r.r5.ENCRYPTED_SCORM:s===r.r5.UNENCRYPTED_HTML&&(s=r.r5.UNENCRYPTED_SCORM):s===r.r5.ENCRYPTED_HTML&&(s=r.r5.UNENCRYPTED_HTML)),s===r.r5.ENCRYPTED_VIDEO||s===r.r5.ENCRYPTED_PDF||s===r.r5.ENCRYPTED_AUDIO||s===r.r5.ENCRYPTED_IMAGE||s===r.r5.UNENCRYPTED_IMAGE||(s===r.r5.ENCRYPTED_SCORM||s===r.r5.ENCRYPTED_TINCAN||s===r.r5.ENCRYPTED_HTML)&&n.OS!==n.vO.DEVICE_WINDOWS&&n.OS!==n.vO.DEVICE_MAC}function getSlideWeight(e){return e===r.r5.UNENCRYPTED_IMAGE||e===r.r5.ENCRYPTED_IMAGE?5:e===r.r5.ENCRYPTED_VIDEO||e===r.r5.UNENCRYPTED_VIDEO?100:e===r.r5.ENCRYPTED_AUDIO||e===r.r5.UNENCRYPTED_AUDIO?20:e===r.r5.ENCRYPTED_PDF||e===r.r5.UNENCRYPTED_PDF?10:e===r.r5.ENCRYPTED_SCORM||e===r.r5.UNENCRYPTED_SCORM||e===r.r5.ENCRYPTED_TINCAN||e===r.r5.UNENCRYPTED_TINCAN||e===r.r5.ENCRYPTED_HTML||e===r.r5.UNENCRYPTED_HTML?50:10}function modifyLessonDownloadStatus(e,t,s,o,n){let i=0,a=0,l=0,c=e[t];if(c){let e=c.sections[s];if(e){let t=e.lessons[o];if(t){let e=Object.values(t.slides),s=!1,o=!1,c=!1;for(let t=0;t<e.length;t+=1)i+=l=getSlideWeight(e[t].fileType),(e[t].downloadState===r.oV.QUEUED||e[t].downloadState===r.oV.INPROGRESS)&&(c=!0,a+=e[t].downloadPercent*l),e[t].downloadState===r.oV.FAILED||e[t].downloadState===r.oV.STOPPED||e[t].downloadState===r.oV.CANCELLED?(s=!0,a+=l):e[t].downloadState===r.oV.SUCCESS&&(o=!0,a+=l);if(t.downloadPercentage=a/i,c){t.downloadState=r.oV.INPROGRESS;return}s?o?t.downloadState=r.oV.PARTIALLY_SUCCESS:t.downloadState=r.oV.FAILED:t.downloadState=r.oV.SUCCESS,n&&(t.downloadState=r.oV.FAILED)}}}}function addNewDownloads(e,t,s,n,i,l,c){let u=0,d=0;for(;d<n.length;){let{sectionId:S}=n[d],{lessons:_}=n[d];for(;u<_.length;){let n=_[u],{lessonId:d,lessonVersion:E,slides:D}=n,p=new o._g(E,r.oV.QUEUED);for(let n=0;n<D.length;n++){let a=new o.kK(D[n].onlineUrl,D[n].downloadPath,r.oV.QUEUED,D[n].fileType,D[n].fileName,D[n].alternateOnlineUrls,D[n].contentPath,D[n].contentId,i,l,c);!0===addSlideToDownloads(t,s,S,d,new o.gZ({}),new o.MC({}),p,a)&&addToDownloadQueue(e,s,S,d,D[n].fileName)}let T=[],C=[];for(let e=0;e<D.length;e++){let t=(0,a.WU)(s,S,d,D[e].fileName);C.push(t)}let h=t[s].sections[S].lessons[d].slides;T=Object.keys(h);for(let e=0;e<T.length;e++)0>C.indexOf(T[e])&&h[T[e]].downloadState===r.oV.FAILED&&(delete h[T[e]],console.log("Deleting slide from downloads with file ID ".concat(T[e]," since it is not present in latest data")),modifyLessonDownloadStatus(t,s,S,d,!1));u++}d++}}function startDownload(e,t,s){if(e.length<=0){console.log("download: nothing to download. Queue empty");return}let o=e[0],n=(0,a.WU)(o.courseId,o.sectionId,o.lessonId,o.fileName);if(s!==n){console.log("download: Download start fileId does not match, fileId: ".concat(s," fileIdForCurDownload: ").concat(n));return}let i=getSlideObjectFromDownloads(t,o.courseId,o.sectionId,o.lessonId,o.fileName);if(!i){console.log("download: invalid slideObj in start download");return}i.downloadState=r.oV.INPROGRESS}function handleDownloadResult(e,t,s,o,n){if(console.log("download: reducer Handling download success for fileId ".concat(e)),t.length<=0){console.log("download: no active downloads, ignoring current successful download");return}let l=t[0],c=(0,a.WU)(l.courseId,l.sectionId,l.lessonId,l.fileName);if(e!==c){console.log("download: Downloaded fileId does not match, fileId: ".concat(e," fileIdForCurDownload: ").concat(c));return}getSlideDownloadState(s,l.courseId,l.sectionId,l.lessonId,l.fileName);let u=getSlideObjectFromDownloads(s,l.courseId,l.sectionId,l.lessonId,l.fileName);u&&(o===r.pI.SUCCESS?u.downloadState=r.oV.SUCCESS:u.downloadState=r.oV.FAILED,u.downloadState=o,u.downloadPercent=1,u.onlineUrl="",n&&n.trim().length>0&&(u.downloadPath=n),r.oV.SUCCESS===u.downloadState&&(0,i.$X)(u.downloadPath,!1)),removeCurrentDownloadFromQueue(t),modifyLessonDownloadStatus(s,l.courseId,l.sectionId,l.lessonId,!1)}function handleDownloadProgress(e,t,s,o){if(t.length<=0){console.log("download: no active downloads, ignoring current download progress");return}let n=t[0],i=(0,a.WU)(n.courseId,n.sectionId,n.lessonId,n.fileName);if(e!==i){console.log("download: Downloaded fileId does not match, fileId: ".concat(e," fileIdForCurDownload: ").concat(i));return}let l=getSlideDownloadState(s,n.courseId,n.sectionId,n.lessonId,n.fileName);if(r.oV.INPROGRESS===l||r.oV.QUEUED===l){let e=getSlideObjectFromDownloads(s,n.courseId,n.sectionId,n.lessonId,n.fileName);e&&(e.downloadState=r.oV.INPROGRESS,e.downloadPercent=o),modifyLessonDownloadStatus(s,n.courseId,n.sectionId,n.lessonId,!1)}else console.log("download: Invalid queue state. State in not in_progress when handling download progress")}function clearInvalidDownloadRequestsFromQueue(e,t){if(!(e.length<=0))for(console.log("download: clearInvalidDownloadRequestsFromQueue");e.length>0;){let s=e[0],o=getSlideObjectFromDownloads(t,s.courseId,s.sectionId,s.lessonId,s.fileName);if(o){if(o.downloadState!==r.oV.INPROGRESS&&o.downloadState!==r.oV.QUEUED)console.log("download: Clearing invalid download request, invalid slide state ".concat(o.downloadState)),e.shift();else break}else console.log("download: Clearing invalid download request, no slide object found"),e.shift()}}function handleDownloadStart(e,t,s,o,n){if(console.log("download: reducer Handling download started for fileId ".concat(e)),t.length<=0){console.log("download: no active downloads, ignoring current download start");return}let i=t[0],l=(0,a.WU)(i.courseId,i.sectionId,i.lessonId,i.fileName);if(e!==l){console.log("download: Downloaded fileId does not match, fileId: ".concat(e," fileIdForCurDownload: ").concat(l));return}let c=getSlideDownloadState(s,i.courseId,i.sectionId,i.lessonId,i.fileName);if(c===r.oV.QUEUED||c===r.oV.INPROGRESS||!0===n){let e=getSlideObjectFromDownloads(s,i.courseId,i.sectionId,i.lessonId,i.fileName);e&&(e.downloadState=r.oV.INPROGRESS,o>0&&(e.totalBytes=o))}else console.log("download: Invalid download state when handling download started for file Id".concat(e))}function getDownloadedFileList(e,t,s,o){let n=[],i=e[t];if(!i||t<=0)return console.log("download: getDownloadedFileList, invalid courseId"),n;for(let e in i.sections)if(i.sections.hasOwnProperty(e)){if(parseInt(e)!==s&&s)continue;let t=i.sections[e];for(let e in t.lessons)if(t.lessons.hasOwnProperty(e)){if(parseInt(e)!==o&&o)continue;let s=t.lessons[e];for(let e in s.slides)if(s.slides.hasOwnProperty(e)){let t=s.slides[e];t.downloadState===r.oV.SUCCESS&&n.push(t.downloadPath)}}}return n}function getLessonDownloadData(e,t,s,o,n,i){if(!t||!s||!o)return{downloadState:r.oV.INVALID,downloadPercentage:0,downloadedVersion:0};let l=(0,a.Un)(t,i);if(!e.courses[l])return{downloadState:r.oV.INVALID,downloadPercentage:0,downloadedVersion:0};let c=e.courses[l];if(!c.sections[s])return{downloadState:r.oV.INVALID,downloadPercentage:0,downloadedVersion:0};let u=c.sections[s];if(!u.lessons[o])return{downloadState:r.oV.INVALID,downloadPercentage:0,downloadedVersion:0};let d=u.lessons[o],S=d.downloadState;return(S===r.oV.SUCCESS||S===r.oV.PARTIALLY_SUCCESS)&&d.version&&n&&d.version!==n&&(S=r.oV.OUTDATED_VERSION),{downloadState:S,downloadPercentage:d.downloadPercentage,downloadedVersion:d.version}}function isAnyDownloadAttempted(e,t,s,o){let n=(0,a.Un)(t,o);if(!e.courses[n])return!1;let i=e.courses[n];if(!i||n<=0)return console.log("download: isAnyDownloadAttempted, invalid courseId"),!1;for(let e in i.sections)if(i.sections.hasOwnProperty(e)){if(parseInt(e)!==s&&s)continue;let t=i.sections[e];for(let e in t.lessons)if(t.lessons.hasOwnProperty(e)){let s=t.lessons[e];for(let e in s.slides)if(s.slides.hasOwnProperty(e)){let t=s.slides[e];if(t.downloadState!==r.oV.INVALID)return!0}}}return!1}function isAnyDownloadInProgress(e,t,s,r){if(e.downloadQueue.length<=0)return!1;let o=(0,a.Un)(t,r);for(let t=0;t<e.downloadQueue.length;t++){let r=e.downloadQueue[t];if(r.courseId===o){if(r.sectionId!==s&&s)continue;return!0}}return!1}function isUserSelectedDirectoryChanged(e){return e!==o.jP.userSelectedDir&&(console.log("isUserSelectedDirectoryChanged: true ".concat(e," ").concat(o.jP.userSelectedDir)),!0)}function isAnyCourseDataChangedFromLastSync(e){if(!e)return console.log("isAnyCourseDataChangedFromLastSync: Invalid allCourseDetails"),!1;let t=Object.keys(e);for(let s=0;s<t.length;s++){let n=e[t[s]];if(n&&n.courseDetails&&o.jP.courseVersionMap[t[s]]!==n.courseDetails.lastFetchTime&&n.courseDetails.courseType===r.courseType.COURSE)return console.log("isAnyCourseDataChangedFromLastSync: Course data changed for ".concat(t[s])),console.log("isAnyCourseDataChangedFromLastSync: T1 ".concat(o.jP.courseVersionMap[t[s]])),console.log("isAnyCourseDataChangedFromLastSync: T2 ".concat(n.courseDetails.lastFetchTime)),!0}return!1}function isFileTypeMatchWithDownloadFile(e,t){if(!t||t.trim().length<=0)return!1;if(e===r.r5.ENCRYPTED_VIDEO||e===r.r5.ENCRYPTED_AUDIO){if(t.toLowerCase().trim().endsWith(".cencm4f")||t.toLowerCase().trim().endsWith("_cencm4f.mp4")||t.toLowerCase().trim().endsWith("_cenc.mpd")||t.toLowerCase().trim().endsWith("_ctr.mpd")||t.toLowerCase().trim().endsWith("_lctr.mpd")||t.toLowerCase().trim().endsWith("_ctr.lds")||t.toLowerCase().trim().endsWith("_lctr.lds")||t.toLowerCase().trim().endsWith("_cenc.m3u8")||t.toLowerCase().trim().endsWith("_cbcs.m3u8")||t.toLowerCase().trim().endsWith("_videostream.mp4")||t.toLowerCase().trim().endsWith("_audiostream.mp4"))return!0}else if(e===r.r5.ENCRYPTED_PDF){if(t.toLowerCase().trim().endsWith(".dcfpdf")||t.toLowerCase().trim().endsWith("_dcf.pdf")||t.toLowerCase().trim().endsWith("_lenc.pdf"))return!0}else if(e===r.r5.ENCRYPTED_SCORM||e===r.r5.ENCRYPTED_TINCAN||e===r.r5.ENCRYPTED_HTML){if(t.toLowerCase().trim().endsWith("_dcf")||t.toLowerCase().trim().endsWith("_lenc"))return!0}else if((e===r.r5.UNENCRYPTED_IMAGE||e===r.r5.ENCRYPTED_IMAGE)&&(t.toLowerCase().trim().endsWith(".png")||t.toLowerCase().trim().endsWith(".jpg")||t.toLowerCase().trim().endsWith(".jpeg")||t.toLowerCase().trim().endsWith(".gif")))return!0;return console.log("Download error: isFileTypeMatchWithDownloadFile failed!!!!!".concat(e,":").concat(t)),!1}async function isV6LicenseValid(e,t,s){if(!isOfflineFileRequireLicense(e))return!0;let r=!1,o=!1;if(n.OS===n.vO.DEVICE_ANDROID?e.indexOf(".lds")>0&&(r=!0):e.indexOf("m3u8")>0&&(o=!0),r){let e=await (0,c.isV6LicenseAvailable)("com.widevine.alpha",t,s,"cenc");if(!e)return!1}if(o){let e=await (0,c.isV6LicenseAvailable)("com.apple.fps",t,s,"cbcs");if(!e)return!1}let i=await (0,c.isV6LicenseAvailable)("lstdrm",t,s,null);return!!i}async function syncDownloadDataWithScannedFilesAndCourse(e,t,s,i,c,u,d,S){if(console.log("syncDownloadDataWithScannedFilesAndCourse"),o.jP.courseVersionMap[e]&&i.courseDetails&&o.jP.courseVersionMap[e]===i.courseDetails.lastFetchTime||!i.courseDetails||i.courseDetails.courseType!==r.courseType.COURSE)return;console.log("syncDownloadDataWithScannedFilesAndCourse : syncing course ".concat(e));let{courseDetails:_}=i,E=(0,a.Un)(e,u),D=new o.lf,p=new o.gZ({});D.courses[E]=p;let T=_.sections.sectionIds.length;for(let i=0;i<T;i++){let d=_.sections.sectionIds[i],T=_.sections.sectionDetails[d];if(!T){console.log("syncDownloadDataWithScannedFilesAndCourse: section not found: ".concat(d));continue}let h=T.lessonIds.length;if(h<=0){console.log("syncDownloadDataWithScannedFilesAndCourse: empty section: ".concat(d));continue}p.sections[d]=new o.MC({});for(let i=0;i<h;i++){let h=T.lessonIds[i],I=_.lessons.lessonDetails[h];if(!I){console.log("syncDownloadDataWithScannedFilesAndCourse: lesson not found: ".concat(h));continue}let m=I.slides.slideIds.length;if(m<=0){console.log("syncDownloadDataWithScannedFilesAndCourse: empty lesson: ".concat(h));continue}let f=new o._g(I.version,r.oV.QUEUED),g=!1,y=!0,A=null;for(let i=0;i<m;i++){let _;let D=I.slides.slideIds[i],p=I.slides.slideDetails[D];if(!p){console.log("syncDownloadDataWithScannedFilesAndCourse: slide not found: ".concat(D));continue}if(!isSlideDownloadable(p.fileType,p.fileName))continue;_=u?"TRIAL_":"PAID_";let T=(0,l.fq)(p.fileType,p.fileName,p.fileId),m=!1;for(let i=0;i<T.length&&!1===m;i++){let l=T[i],u=!1;for(let i=0;i<l.length;i++){let D,T,I;let N=l[i],R="".concat(_+e,"_").concat(h,"_").concat(N.fileId);if(t.fileListByFileId[R])D=t.fileListByFileId[R],T=r.oV.SUCCESS;else{if(N.fileName.indexOf("audiostream.mp4")>0||N.fileName.indexOf("videostream.mp4")>0||N.fileName.indexOf("_ctrcenc.m3u8")>0){var C;let s;p.contentId&&p.contentId.indexOf("/")>0&&(s=n.OS===n.vO.DEVICE_ANDROID?p.contentId.split("/")[0]:p.contentId.split("/")[1]);let o=null===(C=N.fileId)||void 0===C?void 0:C.substring(N.fileId.indexOf("-")+1);R="".concat(_+e,"_").concat(h,"_").concat(s,"-").concat(o),t.fileListByFileId[R]&&(D=t.fileListByFileId[R],T=r.oV.SUCCESS)}D&&D.indexOf("ULYST_")>0&&0>D.indexOf("".concat(h))&&(D=null)}if(D&&!1===isFileTypeMatchWithDownloadFile(p.fileType,D)&&(D=null),D&&D.indexOf("ULYST_")>0)try{let e=await isV6LicenseValid(D,p.contentPath,S);e||(console.log("License Error:: License not available, Marking download as failure"),y=!1)}catch(e){console.log("License Error::  Error in syncing download data, license check failed ",e),y=!1}if(D?(console.log("download file found for url ".concat(N.fileName)),g=!0,m=!0,I=new o.kK("",D,T,p.fileType,N.fileName)):(A=getSlideObjectFromDownloads(s.courses,E,d,h,N.fileName))?(g=!0,m=!0,A.downloadState===r.oV.SUCCESS?(T=r.oV.FAILED,I=new o.kK("",A.downloadPath,T,p.fileType,N.fileName)):A.downloadState===r.oV.QUEUED||A.downloadState===r.oV.INPROGRESS?(T=A.downloadState,I=new o.kK(A.onlineUrl,A.downloadPath,T,p.fileType,N.fileName)):(T=A.downloadState,I=new o.kK("",A.downloadPath,T,p.fileType,N.fileName))):I=new o.kK("","",r.oV.FAILED,p.fileType,N.fileName),!I)continue;let P=(0,a.WU)(E,d,h,N.fileName);if(f.slides[P]=I,c===P&&(f.slides[P].downloadState=r.oV.INPROGRESS),I.fileType===r.r5.ENCRYPTED_VIDEO&&!1===u){let e;u=!0,e=p.fileName.lastIndexOf(".")>=0?p.fileName.substring(0,p.fileName.lastIndexOf(".")):p.fileName;let t="".concat(e,"_HQ.png");if(A=getSlideObjectFromDownloads(s.courses,E,d,h,t)){I=new o.kK(A.onlineUrl,A.downloadPath,A.downloadState,r.r5.THUMBNAIL,t);let e=(0,a.WU)(E,d,h,t);f.slides[e]=I}}}}}g&&(p.sections[d].lessons[h]=f,modifyLessonDownloadStatus(D.courses,E,d,h,!y))}}s.courses[E]=p,d&&(o.jP.courseVersionMap[e]=i.courseDetails.lastFetchTime)}async function syncDownloadDataWithScannedFilesAndCourses(e,t,s,r,o){if(!e){console.log("syncDownloadDataWithScannedFilesAndCourses: Invalid allCourseDetails");return}let n=Object.keys(e);for(let i=0;i<n.length;i++)await syncDownloadDataWithScannedFilesAndCourse(parseInt(n[i]),s,t,e[n[i]],r,!0,!1,o),await syncDownloadDataWithScannedFilesAndCourse(parseInt(n[i]),s,t,e[n[i]],r,!1,!0,o)}function cleanupHangedDownloads(e){let t=Object.values(e.courses);for(let e=0;e<t.length;e++){let s=Object.values(t[e].sections);for(let e=0;e<s.length;e++){let t=Object.values(s[e].lessons);for(let e=0;e<t.length;e++){let s=t[e];(s.downloadState===r.oV.INPROGRESS||s.downloadState===r.oV.QUEUED)&&(s.downloadState=r.oV.FAILED,s.downloadPercentage=0);let o=Object.values(s.slides);for(let e=0;e<o.length;e++){let t=o[e];(t.downloadState===r.oV.INPROGRESS||t.downloadState===r.oV.QUEUED)&&(t.downloadState=r.oV.FAILED,t.downloadPercent=0,t.onlineUrl="")}}}}}function isOfflineFileRequireLicense(e){return!(e.toLowerCase().indexOf("/thumbnail")>0||e.toLowerCase().indexOf(".mp4")>0||e.toLowerCase().indexOf("_hq.png")>0)}},97425:function(e,t,s){"use strict";s.d(t,{Bd:function(){return getCourseidFromVirtualId},Un:function(){return getVirtualCourseId},WU:function(){return getFileId}});var r=s(78445);function getFileId(e,t,s,r){let o=r.replace(/[^a-zA-Z0-9]/g,"_");return o=(o=(o=(o=o.replace("_cenc_","_ctrcenc_")).replace("_ctr_","_ctrcenc_")).replace("_lds","_mpd")).replace("_cbcs_","_ctrcenc_"),"".concat(e,"_").concat(t,"_").concat(s,"_").concat(o)}function getVirtualCourseId(e,t){let s=r.Vj.PAID_OFFSET+e;return t&&(s=r.Vj.TRIAL_OFFSET+e),s}function getCourseidFromVirtualId(e){return e>r.Vj.TRIAL_OFFSET?e-r.Vj.TRIAL_OFFSET:e>r.Vj.PAID_OFFSET?e-r.Vj.PAID_OFFSET:e}},46988:function(e,t,s){"use strict";s.d(t,{$Q:function(){return getDiscountPercentage},Sh:function(){return isCourseExpired},vy:function(){return calculateCourseCompletion},yN:function(){return totalCompletedLessonExcludedHidden}}),s(49497);let calculateCourseCompletion=(e,t,s,r)=>{let o=0;if(e&&e[t]){let s=e[t];o=r&&(null==r?void 0:r.length)?Object.keys(s).filter(e=>!(null==r?void 0:r.includes(s[e]))).length:Object.keys(s).length}if(0===s)return 0;let n=s-((null==r?void 0:r.length)||0),i=Math.round(o/n*100);return i>100?100:i},totalCompletedLessonExcludedHidden=(e,t,s,r)=>{let o=0;if(e&&e[t]){let s=e[t];o=r&&(null==r?void 0:r.length)?Object.keys(s).filter(e=>!(null==r?void 0:r.includes(s[e]))).length:Object.keys(s).length}if(0===s)return 0;let n=o,i=s-((null==r?void 0:r.length)||0);return{totalCompletedLessonExcludesHiddenLesson:n,totalLessonExludesHiddenLesson:i}},isCourseExpired=e=>{if(!e)return!1;let t=new Date,s=new Date(e);return s.setHours(23,59,59,999),s.getTime()<t.getTime()},getDiscountPercentage=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e||0===t?0:Math.round((e-t)/e*100)}},83830:function(e,t,s){"use strict";s.d(t,{Tp:function(){return mapPricingDetailsToCourse},Up:function(){return getLocalizedPrice},bf:function(){return updatePricingModel},qR:function(){return setSelectedVariablePricing},qW:function(){return setPricingModel}});var r=s(78445),o=s(53794),n=s(46988),i=s(99955),a=s(81851),l=s(37648);let c=Number(a.customerConfig.PAYMENT_TYPE)===l.O5.IN_APP_PAYMENT,getLocalizedPrice=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n={localizedDiscountPrice:c?0:"".concat((0,o.ir)()).concat(r),localizedActualPrice:"".concat((0,o.ir)()).concat(s)};if(!e||!t[e])return n;let{localizedPrice:i}=t[e];return n.localizedDiscountPrice="0",n.localizedActualPrice=i,n},mapPricingDetailsToCourse=e=>{var t;return{is_free:(null==e?void 0:null===(t=e.pricing_type)||void 0===t?void 0:t.toLowerCase())===r.DD.FREE?r.H3.FREE:r.H3.PAID,price:null==e?void 0:e.price,discount_price:null==e?void 0:e.discount_price,validity:null==e?void 0:e.validity,end_date:null==e?void 0:e.end_date,offer_start_date:null==e?void 0:e.offer_start_date,offer_end_date:null==e?void 0:e.offer_end_date,pricing_plan_short_description:null==e?void 0:e.short_description}},setPricingModel=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e.courses,n=(null==r?void 0:r.default_product_pricings)||{},i=e.in_app_purchases?e.in_app_purchases:[],a=e.enrolled_courses,l={};return l.coursePricing={},a.forEach(e=>{let r={...e.course};(null==n?void 0:n[null==r?void 0:r.id])&&(r={...r,...mapPricingDetailsToCourse(null==n?void 0:n[null==r?void 0:r.id])});let o=setPricingData(r,i,t,s);l.coursePricing={...l.coursePricing,...o}}),o.forEach(e=>{let r={...e};(null==n?void 0:n[null==r?void 0:r.id])&&(r={...r,...mapPricingDetailsToCourse(null==n?void 0:n[null==r?void 0:r.id])});let o=setPricingData(r,i,t,s);l.coursePricing={...l.coursePricing,...o}}),l.coursePricing},setSelectedVariablePricing=(e,t,s)=>{let r={...s.coursePricing},o={...r[t]};return o.selctedVariablePrice={...e},r[t]={...o},{...r}},setPricingData=(e,t,s,a)=>{if(s.coursePricing&&s.coursePricing[e.id])return{...s.coursePricing};let l={},[u]=t.filter(t=>e.id===t.course_id),d=!!u,S=0;S=(0,o.mG)()?Number(null==u?void 0:u.price)||0:d&&!(0,o.mG)()?Number(null==u?void 0:u.price)||0:(null==e?void 0:e.price)||0;let _=u?u.product_id:0,E=(d||c?0:e.discount_price)||0,{localizedDiscountPrice:D,localizedActualPrice:p}=getLocalizedPrice(_,a,S,E),T={courseEndDate:e.end_date||null,courseValidityDays:e.validity||0,pricingType:u?r.Vb.INAPP:r.Vb.EXTERNAL,productId:_,discountPrice:E,actualPrice:S,localizedDiscountPrice:(D||"").replace(/\s/g,""),localizedActualPrice:(p||"").replace(/\s/g,""),selctedVariablePrice:setVariablePriceData(e,e.validity,!1,_,a),discountPercentage:(0,n.$Q)(e.price,e.discount_price),variablePrices:[],offerStartDate:e.offer_start_date,offerEndDate:e.offer_end_date,pricingPlanShortDescription:e.pricing_plan_short_description};return l[e.id]=new i.Nj(T),l},updatePricingModel=function(e,t){var s,a;let l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},S={...t},_={...t.coursePricing[e.id]},E=[],D=e.in_app_purchases;!D&&d&&d[e.id]&&(D=d[e.id]);let p=!!D,T=0;T=(0,o.mG)()?Number(null==D?void 0:D.price)||0:p&&!(0,o.mG)()?Number(null==D?void 0:D.price)||0:(null==e?void 0:e.price)||0;let C=D?D.product_id:0,h=(p||c?0:e.discount_price)||0,{localizedDiscountPrice:I,localizedActualPrice:m}=getLocalizedPrice(C,u,T,h);_={..._,discountPrice:h,actualPrice:T,localizedDiscountPrice:I,localizedActualPrice:m,courseEndDate:e.end_date,courseValidityDays:e.validity,pricingType:r.Vb.EXTERNAL,discountPercentage:(0,n.$Q)(e.price,e.discount_price)};let f=(null==e?void 0:e.renew_pricing_plan)||{},g=(null==e?void 0:null===(s=e.renew_pricing_plan)||void 0===s?void 0:s.id)||0,y=(null==e?void 0:e.default_pricing_id)||0,A={},N=[...e.variable_prices],R=N.some(e=>e.id===g);g&&!R&&(N=[...N,f]),N.length&&!p&&N.forEach(t=>{let s=setVariablePriceData(t,t.validity,!0,C,u),r=new i.MI(s,e.validity);E.push(r),A[r.priceId]=r}),y&&(l=A[y]),g&&(l=A[g]);let P={};if(null===(a=e.renew_pricing_plan)||void 0===a?void 0:a.id){let t=setVariablePriceData(e.renew_pricing_plan,e.renew_pricing_plan.validity,!0,C,u);P=new i.MI(t),e.allow_renew_plan&&(l=P)}p&&(_={..._,productId:D.product_id,pricingType:r.Vb.INAPP},l={...l,...setVariablePriceData(D,e.validity,!1,C,u)});let L=new i.MI(l||{}),v=new i.Nj({..._,variablePrices:E,selctedVariablePrice:L,renewPricingPlan:P});return{...S.coursePricing,[e.id]:v}},setVariablePriceData=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=Number(e.price)||0,l=c?0:Number(e.discount_price)||0,u=null==e?void 0:e.end_date,{localizedDiscountPrice:d,localizedActualPrice:S}=getLocalizedPrice(r,i,a,l),_=(0,o.u6)(e),E=l?a-l:null,D="".concat((0,o.ir)()," ").concat(E),p=l||a,T="".concat((0,o.ir)()," ").concat(null==e?void 0:e.instalment_price),C="".concat((0,o.ir)()," ").concat(p.toLocaleString("en-us"));return{priceId:s?e.id:0,discountPrice:l,actualPrice:a,validity:t||0,localizedDiscountPrice:d,localizedActualPrice:S,discountPercentage:(0,n.$Q)(a,l),courseEndDate:u,InstallmentCount:null==e?void 0:e.instalment_count,localizedInstalmentPrice:T,title:null==e?void 0:e.title,instalmentPrice:null==e?void 0:e.instalment_price,validityType:null==e?void 0:e.validity_type,shortDescription:null==e?void 0:e.short_description,recurringDuration:null==e?void 0:e.recurring_duration,endDate:null==e?void 0:e.end_date,discountDuration:null==e?void 0:e.discount_duration,pricingType:null==e?void 0:e.pricing_type,formattedValidity:_,isTriallEnable:(null==e?void 0:e.is_triall)||!1,discountedPrice:E,localizedDiscountedPrice:D,payableAmount:p,localizedPayableAmount:C,isDefaultPlan:null==e?void 0:e.is_default_plan,longDescription:null==e?void 0:e.long_description,offerStartDate:null==e?void 0:e.offer_start_date,offerEndDate:null==e?void 0:e.offer_end_date,pricingPlanShortDescription:null==e?void 0:e.pricing_plan_short_description,allowReEnroll:(null==e?void 0:e.allow_re_enroll)||!1}}},41559:function(e,t,s){"use strict";s.d(t,{Bv:function(){return isProductEnrolledOrPurchased},C_:function(){return validityCheck},Jf:function(){return isEnrollmentStateFreeOrPurchased},R:function(){return findTestStatus},mX:function(){return getOverallValidity}});var r=s(61320),o=s.n(r),n=s(81851),i=s(78445),a=s(37648),l=s(91563);function checkIsExpired(e){let t=new Date,s=o()(t),r=o()(e),n=s.diff(r)>=0;return n}function validityCheck(e,t){if(t){let t=checkIsExpired(e),s=o()(e).format("MMM Do YYYY");return t?"".concat(n.oc.getValue("expiredOn")," ").concat(s):"".concat(n.oc.getValue("expiresOn")," ").concat(s)}let s=Math.round(e/365),r=Math.round(10*e/365)/10;return 365===e||1===r?"".concat(n.oc.getValue("validFor")," ").concat(s," ").concat(n.oc.t("Year")):e>365?"".concat(n.oc.getValue("validForObj.yearPlural",{count:r})):e>1?"".concat(n.oc.getValue("validForObj.dayPlural",{count:e})):"".concat(n.oc.getValue("validForObj.day",{count:e}))}function getOverallValidity(e,t,s){let r="";return s===i.courseType.TEST||i.courseType.TEST_SERIES?r=e?validityCheck(e,!0):validityCheck(t):(e&&(r=validityCheck(e,!0)),r=validityCheck(t)),r}function findTestStatus(e,t,s,r){let l,c,u;let d={status:"",validity:"",color:""},S=new Date,_=o()(S),E=_.isAfter(e),D=_.isBefore(t);if(3===s)return c=n.oc.t("product:comingSoon"),l=i.mockTestStatus.COMINGSOON,d.status=c,d.color=a.Ur.COMING_SOON,d;if(null===e&&null===t?(c=n.oc.t("Live"),l=i.mockTestStatus.PUBLISHED,d.color=a.Ur.LIVE):E&&D?(c=n.oc.t("Live"),l=i.mockTestStatus.PUBLISHED,d.color=a.Ur.LIVE):E&&!D?(c=n.oc.t("Expired"),l=i.mockTestStatus.EXPIRED,d.color=a.Ur.EXPIRED):r?(c=n.oc.t("Live"),l=i.mockTestStatus.PUBLISHED,d.color=a.Ur.LIVE):(c=n.oc.t("Scheduled"),l=i.mockTestStatus.SCHEDULED,d.color=a.Ur.SCHEDULED),d.status=c,d.testStatus=l,d.testStatus===i.mockTestStatus.EXPIRED)u=n.oc.t("This_course_has_been_expired"),d.color=a.Ur.EXPIRED;else if(null===t)u=null;else{let e=o()(t),s=e.diff(_,"Days");u=d.testStatus===i.mockTestStatus.SCHEDULED?"".concat(n.oc.t("starts_in")," ").concat(s," ").concat(n.oc.t("days")):"".concat(n.oc.t("ends_in")," ").concat(s," ").concat(n.oc.t("days"))}return d.validity=u,d}let isProductEnrolledOrPurchased=e=>e===l.T_M.PURCHASED||e===l.T_M.FREE_PURCHASE||e===l.T_M.ENROLLED,isEnrollmentStateFreeOrPurchased=e=>e===l.T_M.PURCHASED||e===l.T_M.FREE_PURCHASE},54568:function(e,t,s){"use strict";s.d(t,{Am:function(){return setSegmentOrder},Ir:function(){return getSlugSegmentId},Vx:function(){return setSegmentsList},h6:function(){return parseLearnerSegmentConfig}});var r=s(3002);let setSegmentsList=e=>{let{all_segments:t}=e,s={};return t&&t.length&&t.forEach(e=>{let t=[],o=null;if(e.subsegment_order)try{o=JSON.parse(e.subsegment_order)}catch(e){}"string"==typeof e.product_order&&(t=JSON.parse(e.product_order));let n=new r.X({id:e.id,name:e.name,description:e.description,status:e.status,subSegmentOrder:o,ancestry:e.ancestry,productOrder:t,segmentType:e.segment_type,productType:e.product_type,shortDescription:e.short_desc,segmentSlug:e.slug,coverImage:e.cover_image,segmentImage:e.segment_image,segmentPath:e.ancestry?"".concat(e.ancestry,"/").concat(e.id):e.id});s[e.id]=n}),s},setSegmentOrder=e=>{let{segment_order:t=[]}=e;return t},parseLearnerSegmentConfig=e=>{let t={};try{t=JSON.parse(e.learner_segment)}catch(e){console.log("learner_segment parse fail")}return t},getSlugSegmentId=(e,t)=>{let s=Object.keys(t).find(s=>t[s].segmentSlug===e);return s?parseInt(s):s}},12672:function(e,t,s){"use strict";s.d(t,{eR:function(){return getBandwidthHistory},PD:function(){return r.PD}});var r=s(65268);let o=[];function getBandwidthHistory(){return JSON.stringify([...o.slice(0),...o.slice(0,0)])}r.OC.NETWORK_ONLINE,s(97455)},97455:function(e,t,s){"use strict";s.d(t,{FW:function(){return isMediaAudioVideo},Sl:function(){return isMediaImage},Yh:function(){return isMediaLive},in:function(){return isThirdPartyVideo},io:function(){return isMediaRequireLocalProxy},me:function(){return isMediaLstDrm},q5:function(){return isMediaSth},s1:function(){return isMediaPdf}}),s(14206),s(81354);var r=s(73704),o=s(65268);function isMediaSth(e){return e===o._Q.UNENCRYPTED_HTML||e===o._Q.DCF_HTML||e===o._Q.UNENCRYPTED_SCORM||e===o._Q.DCF_SCORM||e===o._Q.UNENCRYPTED_TINCAN||e===o._Q.DCF_TINCAN}function isMediaLive(e){return e===o._Q.LIVE_LESSON}function isMediaPdf(e){return e===o._Q.UNENCRYPTED_PDF||e===o._Q.DCF_PDF}function isMediaImage(e){return e===o._Q.UNENCRYPTED_IMAGE||e===o._Q.DCF_IMAGE}function isMediaAudio(e){return e===o._Q.UNENCRYPTED_ADASH||e===o._Q.CENC_ADASH||e===o._Q.AUDIO_ONLY_HLS||e===o._Q.AUDIO_CENC_M4F}function isThirdPartyVideo(e){return e===o._Q.YOUTUBE_VIDEO||e===o._Q.VIMEO_VIDEO}function isMediaVideo(e){return e===o._Q.YOUTUBE_VIDEO||e===o._Q.VIMEO_VIDEO||e===o._Q.UNENCRYPTED_DASH||e===o._Q.CENC_DASH||e===o._Q.HLS||e===o._Q.CENC_M4F}function isMediaAudioVideo(e){return!!(isMediaAudio(e)||isMediaVideo(e))}function isMediaRequireLocalProxy(e){return!!(r.OS===r.vO.DEVICE_MAC&&(e.trim().toLowerCase().includes("/cbcs/")||e.trim().toLowerCase().includes("_cbcs.m3u8"))||e.trim().toLowerCase().includes("_cenc.m3u8")||e.trim().toLowerCase().includes("_cbcs.m3u8"))}function isMediaLstDrm(e){if(e.trim().startsWith("http")){if(e.trim().toLowerCase().includes("/ldrm/")||e.includes("/v5/")&&e.includes("/paid/")&&e.includes("_ctr/")||e.includes("/v6/")&&e.includes("/ctr/"))return!0}else if(e.includes("_lenc")||e.includes("_lctr"))return!0;return!1}s(81851),s(53794)},65268:function(e,t,s){"use strict";s.d(t,{OC:function(){return n},PD:function(){return o},_Q:function(){return r},yi:function(){return i}});let r={UNENCRYPTED_IMAGE:1,DCF_IMAGE:2,UNENCRYPTED_PDF:3,DCF_PDF:4,YOUTUBE_VIDEO:5,VIMEO_VIDEO:6,UNENCRYPTED_DASH:7,CENC_DASH:8,UNENCRYPTED_ADASH:9,CENC_ADASH:10,HLS:11,CENC_M4F:12,SECTION_QUIZ:13,UNENCRYPTED_HTML:14,DCF_HTML:15,UNENCRYPTED_SCORM:16,DCF_SCORM:17,UNENCRYPTED_TINCAN:18,DCF_TINCAN:19,AUDIO_ONLY_HLS:20,AUDIO_CENC_M4F:21,LIVE_LESSON:22,UNENCRYPTED_LYST_LIVE:23,INVALID:1e3},o={FIRST_LESSON:1,LAST_LESSON:2,INTERMEDIATE_LESSON:3,SINGLE_LESSON:4},n={NETWORK_OFFLINE:0,NETWORK_ONLINE:1},i={IDLE:"Idle",NOT_STARTED:"NotStarted",STARTED:"Started",COMPLETED:"Completed",INTERRUPTED:"Interrupted",STREAMING:"Streaming",TERMINATED:"Terminated"}},14918:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(97405),o=s(73704),n=s(99319);function Invoice(e,t){this.courseTitle=e,this.invoiceLink=t}function SettingsData(){this.settingsState=n.Ko.IDLE,this.apiStatus=n.mP.IDLE,this.currentErrorString=null,this.invoices=[]}function handleInvoicesSuccessResponse(e,t){let s=t.user_courses,{invoices:r}=t;if(!r||!s||r.length<=0||s.length<=0){e.invoices=[];return}e.invoices=[];for(let t=0;t<r.length;t++){let o=r[t].invoice_file_name,n="";for(let e=0;e<s.length;e++)if(s[e].course_id===r[t].course_id){n=s[e].title;break}n&&o&&n.trim().length>0&&o.trim().length>0&&e.invoices.push(new Invoice(n,o))}}s(81851);var i={name:"settingsData",getReducer:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SettingsData,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ff.SETTINGS_MODIFY_PASSWORD:return e.settingsState=n.Ko.MODIFYING_PASSWORD,e.apiStatus=n.mP.INPROGRESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_MODIFY_PASSWORD_SUCCESS:return e.apiStatus=n.mP.SUCCESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_MODIFY_PASSWORD_FAILED:return e.apiStatus=n.mP.FAILED,e.currentErrorString=t.error.errorMessage,{...e};case n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS:return e.settingsState=n.Ko.MODIFYING_MARKET_EMAIL_STATUS,e.apiStatus=n.mP.INPROGRESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS_SUCCESS:return e.apiStatus=n.mP.SUCCESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS_FAILED:return e.apiStatus=n.mP.FAILED,e.currentErrorString=t.error.errorMessage,{...e};case n.ff.SETTINGS_FETCH_INVOICES:return e.settingsState=n.Ko.VIEWING_INVOICES,e.apiStatus=n.mP.INPROGRESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_FETCH_INVOICES_SUCCESS:return e.apiStatus=n.mP.SUCCESS,e.currentErrorString=null,handleInvoicesSuccessResponse(e,t.data),{...e};case n.ff.SETTINGS_FETCH_INVOICES_FAILED:return e.apiStatus=n.mP.FAILED,e.currentErrorString=t.error.errorMessage,{...e};case o.notifications.NAVIGATION_CHANGED:return e.settingsState=n.Ko.IDLE,e.apiStatus=n.mP.IDLE,e.currentErrorString=null,{...e};case n.ff.SETTINGS_EDIT_PROFILE:return e.settingsState=n.Ko.EDITING_PROFILE,e.apiStatus=n.mP.INPROGRESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_EDIT_PROFILE_SUCCESS:return e.apiStatus=n.mP.SUCCESS,e.currentErrorString=null,{...e};case n.ff.SETTINGS_EDIT_PROFILE_FAILED:case n.ff.SETTINGS_FETCH_INVOICES_FAILED:return e.apiStatus=n.mP.FAILED,e.currentErrorString=t.error.errorMessage,{...e};case n.ff.SETTINGS_EDIT_PROFILE_INIT:return e.settingsState=n.Ko.EDITING_PROFILE,e.apiStatus=n.mP.IDLE,e.currentErrorString=null,{...e};default:return e}},selectSettingsState:e=>e.settingsData.settingsState,selectSettingsApiStatus:e=>e.settingsData.apiStatus,selectSettingsErrorMessage:e=>e.settingsData.currentErrorString,selectInvoices:e=>e.settingsData.invoices,doEditProfile:(e,t,r,i,a,l,c,u)=>d=>{let{dispatch:S,httpApi:_}=d;S({type:n.ff.SETTINGS_EDIT_PROFILE});let E="".concat(n.Y9.MODIFY_USER_DATA_URL,"/").concat(a),D={name:e,mobile:t,profile_photo:r,is_newsletter_subscribed:i};l&&(D.email=l),c&&(D.pan=c),u&&(D.dob=u),_.patch(E,D).then(e=>{let{response:t}=e;try{S({type:n.ff.SETTINGS_EDIT_PROFILE_SUCCESS}),S({type:o.notifications.PROFILE_UPDATED,response:{...t,profile_photo:null==D?void 0:D.profile_photo}})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;S({type:n.ff.SETTINGS_EDIT_PROFILE_FAILED,error:t})})},doEditProfileInit:()=>e=>{let{dispatch:t,httpApi:s}=e;t({type:n.ff.SETTINGS_EDIT_PROFILE_INIT})},doModifyPassword:(e,t,r,o)=>i=>{let{dispatch:a,httpApi:l}=i;a({type:n.ff.SETTINGS_MODIFY_PASSWORD});let c="".concat(n.Y9.MODIFY_USER_DATA_URL,"/").concat(o);l.patch(c,{current_password:e,password:t,password_confirmation:r}).then(e=>{let{response:t}=e;try{a({type:n.ff.SETTINGS_MODIFY_PASSWORD_SUCCESS})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;a({type:n.ff.SETTINGS_MODIFY_PASSWORD_FAILED,error:t})})},doUpdateMarketingEmailSubscription:(e,t)=>r=>{let{dispatch:i,httpApi:a}=r;i({type:n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS});let l="".concat(n.Y9.MODIFY_USER_DATA_URL,"/").concat(t);a.patch(l,{is_newsletter_subscribed:e}).then(t=>{let{response:r}=t;try{i({type:n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS_SUCCESS}),i({type:o.notifications.MARKETING_EMAIL_SUBSCRIPTION_CHANGED,params:{isSubscribed:e}})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:t}=e;i({type:n.ff.SETTINGS_MODIFY_MARKET_EMAIL_STATUS_FAILED,error:t})})},doUpdateDownloadLocation:e=>t=>{let{dispatch:s,httpApi:r}=t;s({type:o.notifications.STORAGE_DIR_CHANGED,params:{path:e}})},doUpdateDownloadQuality:e=>t=>{let{dispatch:s,httpApi:r}=t;s({type:o.notifications.DOWNLOAD_QUALITY_CHANGED,params:{downloadQuality:e}})},doUpdateForceLegacyDrm:e=>t=>{let{dispatch:s,httpApi:r}=t;s({type:o.notifications.FORCE_LEGACY_DRM_CHANGED,params:{isEnabled:e}})},doHandleStoragePermissionGrant:()=>e=>{let{dispatch:t,httpApi:s}=e;t({type:o.notifications.STORAGE_PERMISSION_GRANTED})},doFetchInvoices:()=>e=>{let{dispatch:t,httpApi:r}=e;t({type:n.ff.SETTINGS_FETCH_INVOICES});let o="".concat(n.Y9.USER_INVOICES_URL);r.get(o,null).then(e=>{let{response:r}=e;try{t({type:n.ff.SETTINGS_FETCH_INVOICES_SUCCESS,data:r})}catch(e){s.g.bugsnag.notify(e)}}).catch(e=>{let{error:s}=e;t({type:n.ff.SETTINGS_FETCH_INVOICES_FAILED,error:s})})},reactShouldFetchInvoices:(0,r.P1)("selectSettingsState","selectSettingsApiStatus","selectAppTime","selectNavigationCurrentScreen","selectNavigationCurrentSubScreen",(e,t,s,r,i)=>(r===o.i_.INVOICES||i===o.i_.INVOICES)&&t===n.mP.IDLE?{actionCreator:"doFetchInvoices"}:null)}},99319:function(e,t,s){"use strict";s.d(t,{Ko:function(){return a},V5:function(){return u},Y9:function(){return n},ff:function(){return l},mP:function(){return i},qe:function(){return c}});var r=s(73704);let{API_BASE_URL:o}=r.urls,n={AUTH_SIGNOUT_URL:"".concat(o,"/learner/v4/signout"),MODIFY_USER_DATA_URL:"".concat(o,"/learner/v4/users"),USER_INVOICES_URL:"".concat(o,"/learner/v9/learner_invoices")},i={IDLE:0,INPROGRESS:1,SUCCESS:2,FAILED:3},a={IDLE:0,MODIFYING_PASSWORD:1,EDITING_PROFILE:2,MODIFYING_MARKET_EMAIL_STATUS:3,VIEWING_INVOICES:4},l={SETTINGS_MODIFY_PASSWORD:"@settings/modifyPassword",SETTINGS_MODIFY_PASSWORD_SUCCESS:"@settings/modifyPasswordSuccess",SETTINGS_MODIFY_PASSWORD_FAILED:"@settings/modifyPasswordFailed",SETTINGS_EDIT_PROFILE:"@settings/editProfile",SETTINGS_EDIT_PROFILE_SUCCESS:"@settings/editProfileSuccess",SETTINGS_EDIT_PROFILE_FAILED:"@settings/editProfileFailed",SETTINGS_MODIFY_MARKET_EMAIL_STATUS:"@settings/modifyMarketEmailStatus",SETTINGS_MODIFY_MARKET_EMAIL_STATUS_SUCCESS:"@settings/modifyMarketEmailStatusSuccess",SETTINGS_MODIFY_MARKET_EMAIL_STATUS_FAILED:"@settings/modifyMarketEmailStatusFailed",SETTINGS_FETCH_INVOICES:"@settings/fetchInvoices",SETTINGS_FETCH_INVOICES_SUCCESS:"@settings/fetchInvoicesSuccess",SETTINGS_FETCH_INVOICES_FAILED:"@settings/fetchInvoicesFailed",SETTINGS_EDIT_PROFILE_INIT:"@settings/editProfile"},c={MAX_NAME_LENGTH:25},u={AVERAGE:"averageQuality",GOOD:"goodQuality",BETTER:"betterQuality",BEST:"bestQuality"}},29505:function(e,t,s){"use strict";s.d(t,{V:function(){return r.V5}}),s(14918);var r=s(99319)},42040:function(e,t,s){"use strict";s.d(t,{API_URLS:function(){return i},DF:function(){return c},Hz:function(){return a},userLikeActions:function(){return o},userLikeBundleStates:function(){return l}});var r=s(37648);let o={ADD_LIKE_REQUEST:"@userLikes/addLikeRequest",ADD_LIKE_FAILURE:"@userLikes/addLikeFailure",REMOVE_LIKE_REQUEST:"@userLikes/removeLikeRequest",REMOVE_LIKE_FAILURE:"@userLikes/removeLikeFailure",FETCH_LIKES_REQUEST:"@userLikes/fetchLikesRequest",FETCH_LIKES_SUCCESS:"@userLikes/fetchLikesSuccess",FETCH_LIKES_FAILURE:"@userLikes/fetchLikesFailure",FETCH_LIKED_CONTENTS_REQUEST:"@userLikes/fetchLikedContentsRequest",FETCH_LIKED_CONTENTS_SUCCESS:"@userLikes/fetchLikedContentsSuccess",FETCH_LIKED_CONTENTS_FAILURE:"@userLikes/fetchLikedContentsFailure"},{API_BASE_URL:n}=r.urls,i={USER_LIKES:"".concat(n,"/learner/v9/user_likes"),LIKED_CONTENTS:"".concat(n,"/learner/v9/user_likes/liked_contents")},a={PRODUCT:0,NEWSFEED:1,COMMUNITY:2,LESSON:3,DISCUSSION_BOARD:4,COMMENT:5},l={IDLE:0,ADD_LIKE:1,REMOVE_LIKE:2,FETCH_LIKES:3,FETCH_LIKED_CONTENTS_MAP:4},c={reload:0,infinite:1}},42480:function(){}}]);