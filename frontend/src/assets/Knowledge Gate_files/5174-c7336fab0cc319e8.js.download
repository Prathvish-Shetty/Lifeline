"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5174],{85174:function(e,s,i){i.d(s,{Z:function(){return DiscussionsListWeb}});var t=i(24246),l=i(27378),o=i(9078),n=i(95563),r=i(33790),u=i(81660),a=i(72022),d=i(16995),c=i(15819),p=l.memo(e=>{var s;let{submitButtonText:i,inputFor:n="discussion",inputType:u="create",postQuestion:p,postReply:x,postTitle:v,courseTitle:h,lessonTitle:m,editQuestion:S,editReply:I,isPostDiscussion:C,postId:g,courseId:D,lessonId:T,isLessonLevel:y,discussionId:f,lastRequestId:j,placeholderText:b,uploadFile:k,uploadToken:P,sharedAuthToken:L,initialValue:E,attachmentUrl:_,getFileNameFromUrl:U,commentId:R,setPlayerFocusState:A,bundleTitle:w,courseSectionId:N,getCurrentPosition:F,inputLabel:O,bundleId:B,isDiscussionCircle:G=!1,onPostDiscussion:q=null}=e,{t:H}=(0,o.$)(["discussion","common"]),M=(0,l.useRef)(null),z=(0,l.useRef)(null),[$,Y]=(0,l.useState)(void 0),[V,W]=(0,l.useState)(c._$G.NOT_UPLOADED),[Z,Q]=(0,l.useState)(0),[K,J]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(""),[es,ei]=(0,l.useState)(!1);(0,l.useEffect)(()=>{_&&(Y(_),W(c._$G.UPLOADED),ee(U(_)))},[_]),(0,l.useEffect)(()=>{z.current&&E&&(z.current.value=E,ei(!0))},[E]);let et=(0,l.useCallback)(e=>{W(c._$G.UPLOADED),Y(e),Q(0)},[]),el=(0,l.useCallback)(e=>{e===c.H1c.FILE_SIZE_TOO_HIGH&&J(!0),W(c._$G.FAILED),Q(0)},[]),eo=(0,l.useCallback)(()=>{W(c._$G.IN_QUEUE)},[]),en=(0,l.useCallback)(e=>{W(c._$G.IN_PROGRESS),Q(e)},[]),getUploadkey=()=>C?"post_id":"course_id",getUploadValue=()=>C?g:G?B:D,er=V===c._$G.IN_PROGRESS||V===c._$G.IN_QUEUE;return(0,t.jsxs)(a.kC,{sx:{flexDirection:"column"},pb:3,children:[(0,t.jsx)(r.xv,{category:"s1",textTransform:"capitalize",children:O}),(0,t.jsx)(a.xu,{py:1}),(0,t.jsx)(r.nv,{type:"textArea",numberOfLines:3,iconPosition:"leading",setInputRef:e=>{z.current=e.current},placeholderText:b,captionText:V===c._$G.NOT_UPLOADED?void 0:(()=>{switch(V){case c._$G.IN_PROGRESS:return H("common:uploadProgress",{percentile:Z});case c._$G.IN_QUEUE:return H("common:uploadQueue");case c._$G.FAILED:if(K)return H("common:fileSizeExcceeded",{size:c.ZH2.MAX_ATTACHMENT_FILE_SIZE_IN_MB});return H("common:uploadFailed");case c._$G.UPLOADED:return X;default:if(X)return X;return H("attachFile")}})(),captionIcon:V===c._$G.NOT_UPLOADED?void 0:d.q.attachment,captionNoOfLines:1,iconAlignment:"flex-start",onChange:e=>{var s,i;let t=null!==(i=null==e?void 0:null===(s=e.replaceAll)||void 0===s?void 0:s.call(e," ",""))&&void 0!==i?i:e;t&&!es?ei(!0):!t&&es&&ei(!1)}}),(0,t.jsxs)(a.kC,{sx:{alignItems:"center"},pt:2,children:[(0,t.jsx)(r.zx,{onClick:()=>{var e,s,i,t,l,o,r,a;let d={};if("discussion"===n){if("create"===u){if(d={attachment_url:$||null,...d,...C?{post_id:g}:{course_id:G?null:D,bundle_id:B||null},message:null!==(s=null===(e=z.current)||void 0===e?void 0:e.value)&&void 0!==s?s:"",tag:C?v:h,title:C?v:h},y&&!C){let e=null==F?void 0:F();if(d={...d,lesson_id:T,tag:m},e){let{currentSlide:s,currentVideoTime:i,key:t}=e,l=t||"";d.discussion_link="/learn/".concat(w,"/").concat(h,"/").concat(N,"/").concat(T,"?link:").concat(s,":").concat(i,":").concat(l)}}null==p||p({requestPayLoadData:d},j)}else"edit"===u&&(d={attachment_url:$||null,...C?{post_id:g}:{course_id:G?null:D,bundle_id:B||null},discussion_board_id:f,message:null!==(t=null===(i=z.current)||void 0===i?void 0:i.value)&&void 0!==t?t:""},null==S||S({data:d,discussionId:f},j))}else"reply"===n&&("create"===u?(d={attachment_url:$||null,...C?{post_id:g}:{course_id:G?null:D,bundle_id:B||null},discussion_board_id:f,reply_text:null!==(o=null===(l=z.current)||void 0===l?void 0:l.value)&&void 0!==o?o:""},null==x||x({requestPayLoadData:d},j)):"edit"===u&&(d={...d,attachment_url:$||null,...C?{post_id:g}:{course_id:D},commentId:R,reply_text:null!==(a=null===(r=z.current)||void 0===r?void 0:r.value)&&void 0!==a?a:""},null==I||I({data:d,commentId:R},j)));z.current&&(z.current.value="",ei(!1)),M.current&&(M.current.value="",W(c._$G.NOT_UPLOADED),Y(void 0),Q(0),J(!1),ee("")),q&&q()},size:"small",disabled:!es||er,children:null!==(s=null==i?void 0:i.toLocaleUpperCase())&&void 0!==s?s:H("postDiscussion").toLocaleUpperCase()}),(0,t.jsx)(a.xu,{px:1}),(0,t.jsx)(r.zx,{onClick:e=>{var s;if(e.stopPropagation(),X&&V!==c._$G.FAILED){M.current&&(M.current.value=""),W(c._$G.NOT_UPLOADED),Y(""),Q(0),J(!1),ee("");return}null===(s=M.current)||void 0===s||s.click()},type:"ghost",size:"small",variant:"basic",leadingIcon:V!==c._$G.UPLOADED?d.q.attachment2:d.q.trash,leadingIconProps:{icon:V!==c._$G.UPLOADED?d.q.attachment2:d.q.trash,size:null,fontSize:"p1"},disabled:er,children:H(V===c._$G.UPLOADED?"deleteAttachment":"attachFile").toLocaleUpperCase()})]}),(0,t.jsx)(a.xu,{sx:{display:"none"},children:(0,t.jsx)(a.II,{ref:M,onChange:e=>{var s,i;let t=null===(i=null==e?void 0:e.target)||void 0===i?void 0:null===(s=i.files)||void 0===s?void 0:s[0];t&&(ee(t.name),null==k||k(t,P,getUploadkey(),getUploadValue(),L,C?c.UPL.POST_DISCUSSION_ATTACHMENTS_UPLOAD:c.UPL.DISCUSSION_ATTACHMENTS_UPLOAD,eo,et,el,en))},type:"file"})})]})}),x=i(37694),v=i(61320),h=i.n(v),m=i(73408),S=i(97593),I=i(3768),C=i(6935),g=i(75721),atoms_ReplyCard=e=>{var s,i,n,c,p,v,D,T,y,f;let{comment:j,stripAndDecode:b,isByCurrentUser:k,getFileNameFromUrl:P,onClickEdit:L,onClickDelete:E,isByFaculty:_,allowEditing:U,toggleLikeComment:R,isLikeEnabled:A,doingLikeAllowed:w,raiseTicketData:N,raiseTicketCallbacks:F}=e,[O,B]=(0,l.useState)(!1),[G,q]=(0,l.useState)(j.isLiked),[H,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{q(j.isLiked)},[j.isLiked]);let{t:z}=(0,o.$)("discussion"),{theme:$}=(0,u.B7)(),Y=(0,g.V)(["100%","fit-content","fit-content"]),V=null===(s=P(null!==(D=null==j?void 0:j.attachmentUrl)&&void 0!==D?D:""))||void 0===s?void 0:s.toLocaleUpperCase(),W=(0,l.useCallback)(()=>{M(!1)},[]);return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(x.cS,{variant:"titleCardWithoutBorder",showHeader:!0,headerThumbnailLabel:null==j?void 0:null===(i=j.userInfo)||void 0===i?void 0:i.userName,headerThumbnalSize:4,headerImage:null==j?void 0:null===(n=j.userInfo)||void 0===n?void 0:n.profilePhotoUrl,headerThumbnailProps:{status:_?"faculty":void 0},disableHover:!0,headerTitle:(0,t.jsxs)(a.kC,{sx:{justifyContent:"space-between",width:"100%"},children:[(0,t.jsxs)(a.kC,{sx:{flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsxs)(r.xv,{style:{display:"inline"},children:[null==j?void 0:null===(c=j.userInfo)||void 0===c?void 0:c.userName,"\xa0"]}),(0,t.jsx)(r.xv,{category:"c2",style:{display:"inline"},children:"• ".concat(h()(j.createdAt).fromNow())}),(0,t.jsx)("a",{download:V,href:"https://"+encodeURIComponent(decodeURIComponent(null!==(T=j.attachmentUrl)&&void 0!==T?T:"").replace("https://","")).replace("%2F","/")})]}),(0,t.jsxs)(a.kC,{children:[j.attachmentUrl&&(0,t.jsx)("a",{download:V,href:"https://"+encodeURIComponent(decodeURIComponent(null!==(y=j.attachmentUrl)&&void 0!==y?y:"").replace("https://","")).replace("%2F","/"),children:(0,t.jsx)(a.xu,{children:(0,t.jsx)(r.tv,{icon:d.q.attachment})})}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(x.qy,{menuTitle:(0,t.jsx)(a.xu,{pl:2,children:(0,t.jsx)(r.tv,{icon:d.q.ellipsis,size:18})}),children:[U&&k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.sN,{leadingIcon:d.q.edit,text:z("edit"),onClick:L}),(0,t.jsx)(r.sN,{leadingIcon:d.q.trash,text:z("delete"),onClick:()=>B(!0)})]}),(0,t.jsx)(r.sN,{leadingIcon:d.q.flag,text:z("report"),onClick:()=>M(!0)})]})})]})]}),showBody:!0,hideBoxShadow:!0,hideBorder:!0,bodyDescription:(0,t.jsx)(r.xv,{children:(0,t.jsx)(m.NI,{style:{whiteSpace:"pre-wrap"},math:null!==(f=j.replyText)&&void 0!==f?f:"",sanitize:!_})}),showActionbar:!0,showAction1:A,action1:(()=>{var e,s;if(A)return{text:"".concat((null!==(e=j.likeCount)&&void 0!==e?e:0).toString()," ").concat(z("community:like",{count:null!==(s=j.likeCount)&&void 0!==s?s:0})),icon:G?d.q.heartFill:d.q.heart,textCategory:"s2",iconStatus:G?"primary":void 0,onHandleIcon:()=>w?R(j.commentId,j.discussionId):null}})()}),O&&(0,t.jsx)(x.iu,{isOpen:O,title:z("deleteReply"),secondaryAction:{title:z("noContinue"),onClick:()=>B(!1)},primaryAction:{onClick:E,title:z("yesDelete"),variant:"error"},children:z("deleteReplyMessage")}),H&&(0,t.jsx)(S.u_,{isOpen:H,contentStyle:{width:Y,borderWidth:1,borderColor:null==$?void 0:null===(p=$.rawColors)||void 0===p?void 0:p["border-basic-color-4"],borderStyle:"solid",backgroundColor:null==$?void 0:null===(v=$.rawColors)||void 0===v?void 0:v["background-basic-color-2"]},onRequestClose:W,children:(0,t.jsx)(I.Z6,{data:N,callbacks:F,onModalCloseRequest:W,srcDetails:{supportType:C.kxL.SUPPORT_TYPE_REPORT,discussionId:j.discussionId},showRaiseTicket:H})})]})},D=i(64860),Replies=e=>{let{comments:s,stripAndDecode:i,postReply:r,editReply:u,deleteReply:d,discussionId:c,courseTitle:x,lessonTitle:v,postTitle:h,uploadFile:m,uploadToken:S,sharedAuthToken:I,isPostDiscussion:C,courseId:g,postId:T,lessonId:y,sharedUserId:f,getFileNameFromUrl:j,getCurrentPosition:b,courseSectionId:k,userEnrollmentState:P,isAnsweredByFaculty:L,isLearnerAllowedToDiscuss:E,toggleLikeComment:_,isLikeEnabled:U,doingLikeAllowed:R,raiseTicketData:A,raiseTicketCallbacks:w,isDiscussionCircle:N,bundleId:F}=e,{t:O}=(0,o.$)("discussion"),[B,G]=(0,l.useState)(null);return(0,t.jsxs)(a.xu,{pl:4,children:[(0,t.jsx)(a.xu,{sx:{borderLeft:"2px solid",borderLeftColor:B?"transparent":"border-basic-color-4"},children:(0,t.jsx)(n.FE,{itemData:[...s.commentIds].reverse(),variant:"list",removeGutter:!0,renderItem:(e,l)=>{let o=s.commentDetails[e];return(0,t.jsx)(a.xu,{pl:3,children:(0,t.jsx)(a.xu,{children:e===B?(0,t.jsx)(a.xu,{pl:0,children:(0,t.jsx)(p,{getCurrentPosition:b,postReply:r,editReply:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];G(null),(s[0].data.reply_text!==o.replyText||s[0].data.attachment_url!==o.attachmentUrl)&&u(...s)},submitButtonText:O("edit"),discussionId:c,courseTitle:x,postTitle:h,lessonTitle:v,inputType:"edit",inputFor:"reply",uploadFile:m,uploadToken:S,sharedAuthToken:I,isPostDiscussion:C,courseId:g,postId:T,lessonId:y,getFileNameFromUrl:j,commentId:e,initialValue:o.replyText,attachmentUrl:o.attachmentUrl,courseSectionId:k,inputLabel:O("editReply"),isDiscussionCircle:N,bundleId:F})}):(0,t.jsx)(atoms_ReplyCard,{getFileNameFromUrl:j,isByCurrentUser:o.userInfo.userId===f,stripAndDecode:i,comment:o,onClickEdit:()=>G(e),onClickDelete:()=>d(e),isByFaculty:L(s.commentDetails,[e]),allowEditing:(!C||E)&&null===B,toggleLikeComment:_,isLikeEnabled:U,doingLikeAllowed:R,raiseTicketData:A,raiseTicketCallbacks:w})})},e)}})}),!B&&!!f&&(P===D.T_M.PURCHASED||P===D.T_M.FREE_PURCHASE||C&&E)&&(0,t.jsx)(a.xu,{pl:[0,0,0],py:0,children:(0,t.jsx)(p,{postReply:r,editReply:u,submitButtonText:O("reply"),discussionId:c,courseTitle:x,postTitle:h,lessonTitle:v,inputType:"create",inputFor:"reply",uploadFile:m,uploadToken:S,sharedAuthToken:I,isPostDiscussion:C,courseId:g,postId:T,lessonId:y,getFileNameFromUrl:j,courseSectionId:k,placeholderText:O("addYourReplyHere"),isDiscussionCircle:N,bundleId:F})})]})},T=i(30844),DisussionCard=e=>{var s,i,n,c,p,v,C,y,f,j,b,k,P,L,E,_;let{t:U}=(0,o.$)("discussion"),[R,A]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),{discussionDetail:F,stripAndDecode:O,getFileNameFromUrl:B,onToggleDiscussion:G,decodeHtmlEntities:q,isByCurrentUser:H,onClickEdit:M,convertSecToTime:z,AppendSuffixZero:$,onClickDelete:Y,courseData:V,setCurrentAccessingLesson:W,getSlideNumber:Z,navigateBack:Q,isAllDiscussionScreen:K,isAnsweredByFaculty:J,allowEditing:X,navigateToLesson:ee,toggleLikeDiscussion:es,isLikeEnabled:ei,doingLikeAllowed:et,raiseTicketData:el,raiseTicketCallbacks:eo,isDiscussionCircle:en=!1}=e,{theme:er}=(0,u.B7)(),eu=(0,g.V)(["100%","fit-content","fit-content"]),ea=null===(s=B(null!==(f=null==F?void 0:F.attachmentUrl)&&void 0!==f?f:""))||void 0===s?void 0:s.toLocaleUpperCase(),ed=(0,l.useMemo)(()=>J(F.comments.commentDetails,F.comments.commentIds),[{discussionDetail:F,isAnsweredByFaculty:J}]),ec=(0,l.useMemo)(()=>F.userInfo.userRole!==D.xZ9.STUDENT,[F.userInfo.userRole]),getPinPosition=()=>{let{lessonLink:e}=F;if(e&&e.includes("?")){let s=!1,i=e.split("?")[1].split(":"),t={initialSlideIdx:Number(i[1]),initialSlideSeekPos:parseInt(i[2],0)};if(t.initialSlideIdx>0){let e=U("discussionTag.slide",{slideNo:t.initialSlideIdx+1});return e}(e.includes("pdf")||e.includes("epdf"))&&(s=!0);let{hours:l,minutes:o,seconds:n}=z(t.initialSlideSeekPos);if(0===l&&0===o&&0===n&&!s)return null;if(s){let e=0===t.initialSlideSeekPos?t.initialSlideSeekPos+1:t.initialSlideSeekPos,s=U("discussionTag.pdf",{pageNo:e});return s}let r=U("discussionTag.video",{hours:$(l),minutes:$(o),seconds:$(n)});return r}return null},ep=(0,l.useCallback)(e=>{let s=null,i=0;return e&&V.currentCourseLessons&&V.currentCourseLessons.lessonDetails&&V.currentCourseLessons.lessonDetails[e]?{lessonSlides:s=V.currentCourseLessons.lessonDetails[e].slides,sectionId:i=V.currentCourseLessons.lessonDetails[e].sectionId}:{lessonSlides:s,sectionId:i}},[V]),goToPlayer=()=>{var e;null===(e=document.getElementById("player-header"))||void 0===e||e.scrollIntoView();let{lessonId:s,courseId:i,lessonLink:t}=F,l=t||"",{currentCourseSections:o}=V,n=-1,{lessonSlides:r,sectionId:u}=ep(s),a=0,d="";if(null==l?void 0:l.includes("?")){let e=l.split("?")[1].split(":");a=Number(e[2]);let[,,,s]=e;d=s}if(d&&r&&(n=Z(d,r.slideDetails)),i&&u&&o&&o.sectionDetails&&o.sectionDetails[u]){let e={courseId:i,lessonSlides:r,sectionId:u,lessonId:s||o.sectionDetails[u].lessonIds[0],autoScrollLessonTs:new Date().getTime()};if(n>-1&&(e.initialSlideIdx=n),a&&(e.initialSlideSeekPos=a),W(e,e.lessonId),K&&V){let t={courseId:i,bundleId:0,productSeo:V.currentBundleSeoTitle?V.currentBundleSeoTitle:V.currentCourseSeoTitle,subProductSeo:V.currentBundleSeoTitle?V.currentCourseSeoTitle:null,courseType:D.lW9.COURSE,sectionId:u,lessonId:s,initialSlideIdx:e?e.initialSlideIdx:0,initialSlideSeekPos:e?e.initialSlideSeekPos:0,autoScrollLessonTs:new Date().getTime()},l={productSeo:V.currentBundleSeoTitle?V.currentBundleSeoTitle:V.currentCourseSeoTitle,subProductSeo:V.currentBundleSeoTitle?V.currentCourseSeoTitle:null,sectionId:u||0,lessonId:s};ee(t,l)}}return null},[ex,ev]=(0,l.useState)(F.isLiked);(0,l.useEffect)(()=>{ev(F.isLiked)},[F.isLiked]);let eh=(0,l.useCallback)(()=>{N(!1)},[]);return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(x.cS,{showHeader:!0,hideHeaderThumbnail:!0,headerTitle:(0,t.jsxs)(a.kC,{sx:{justifyContent:"space-between",width:"100%"},children:[(0,t.jsxs)(a.kC,{sx:{flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsx)(r.qE,{size:"large",defaultNoImageText:"letter",imageSource:null==F?void 0:null===(i=F.userInfo)||void 0===i?void 0:i.profilePhotoUrl,accessibilityLabel:null!==(j=null==F?void 0:null===(n=F.userInfo)||void 0===n?void 0:n.userName)&&void 0!==j?j:" ",status:ec?"faculty":void 0}),(0,t.jsx)(a.kC,{sx:{flexDirection:"column",pl:2},children:(0,t.jsxs)(a.kC,{sx:{flexDirection:["column"],alignItems:["flex-start"]},children:[(0,t.jsx)(r.xv,{style:{display:"inline"},children:null==F?void 0:null===(c=F.userInfo)||void 0===c?void 0:c.userName}),(0,t.jsxs)(a.xu,{sx:{display:"flex",alignItems:"center","& a":{display:"flex",alignItems:"flex-start"}},children:[getPinPosition()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.rU,{type:"internal",textProps:{category:"p2"},onClick:()=>goToPlayer(),children:getPinPosition()}),(0,t.jsx)(a.xu,{sx:{display:["none","inline"]},children:(0,t.jsx)(r.xv,{children:"\xa0•\xa0"})})]}),en?(0,t.jsx)(r.xv,{category:"c1",sx:{fontWeight:"bold"},children:null!==(b=F.discussionTag)&&void 0!==b?b:F.productTitle}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.rU,{type:"internal",onClick:()=>goToPlayer(),textProps:{noOfLines:1,lineLength:30,category:"p2",sx:{display:["none !important","inline-block !important","inline-block !important"]},style:{flex:"0 0"}},children:null!==(k=F.discussionTag)&&void 0!==k?k:F.productTitle}),(0,t.jsx)(r.rU,{type:"internal",onClick:()=>goToPlayer(),textProps:{noOfLines:1,lineLength:10,category:"p2",sx:{display:["inline-block !important","none !important","none !important"]},style:{flex:"0 0"}},children:null!==(P=F.discussionTag)&&void 0!==P?P:F.productTitle})]}),(0,t.jsxs)(r.xv,{category:"c2",style:{display:"inline"},children:["\xa0•\xa0","".concat(h()(F.createdAt).fromNow())]}),ed&&(0,t.jsx)(a.xu,{pl:2,sx:{display:["none","block","block"]},children:(0,t.jsx)(T.Z,{text:U("answered"),badgeShape:"square",badgeColor:"success",variant:"outline",badgeSize:"tiny"})})]}),ed&&(0,t.jsx)(a.xu,{pl:0,sx:{display:["block","none","none"]},children:(0,t.jsx)(T.Z,{text:U("answered"),badgeShape:"square",badgeColor:"success",variant:"outline",badgeSize:"tiny"})})]})})]}),(0,t.jsx)(a.kC,{children:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(x.qy,{menuTitle:(0,t.jsx)(a.xu,{pl:2,children:(0,t.jsx)(r.tv,{icon:d.q.ellipsis,size:18})}),children:[X&&H&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.sN,{leadingIcon:d.q.edit,text:U("edit"),onClick:M}),(0,t.jsx)(r.sN,{leadingIcon:d.q.trash,text:U("delete"),onClick:()=>A(!0)})]}),(0,t.jsx)(r.sN,{leadingIcon:d.q.flag,text:U("report"),onClick:()=>N(!0)})]})})})]}),showBody:!0,hideBoxShadow:!0,hideBorder:!0,bodyDescriptionNoOfLines:30,bodyDescription:(0,t.jsxs)(a.xu,{children:[(0,t.jsx)(r.xv,{category:"p1",children:(0,t.jsx)(m.NI,{style:{whiteSpace:"pre-wrap"},sanitize:!0,math:(null==F?void 0:F.discussionText)?O(null!==(L=null==F?void 0:F.discussionText)&&void 0!==L?L:""):null==F?void 0:F.discussionTitle})}),(0,t.jsx)("a",{download:ea,href:"https://"+encodeURIComponent(decodeURIComponent(null!==(E=F.attachmentUrl)&&void 0!==E?E:"").replace("https://","")).replace("%2F","/"),id:"attachment".concat(F.discussionId),rel:"noopener noreferrer",target:"_blank"})]}),showActionbar:!0,showAction1:ei,action1:(()=>{if(ei){var e,s;return{icon:ex?d.q.heartFill:d.q.heart,text:"".concat((null!==(e=F.likeCount)&&void 0!==e?e:0).toString()," ").concat(U("community:like",{count:null!==(s=F.likeCount)&&void 0!==s?s:0})),textCategory:"s2",onHandleIcon:()=>et?es(F.discussionId):null,iconStatus:ex?"primary":void 0}}})(),showAction2:!0,action2:{text:U("replies",{count:null!==(_=null==F?void 0:null===(v=F.comments)||void 0===v?void 0:null===(p=v.commentIds)||void 0===p?void 0:p.length)&&void 0!==_?_:0}),icon:d.q.message,iconSize:19,textCategory:"s1",onHandleIcon:()=>G(F.discussionId)},showAction3:!!(null==F?void 0:F.attachmentUrl),action3:{icon:d.q.download,textCategory:"s1",iconSize:19,text:U("common:attachment"),onHandleIcon:()=>{var e;return null===(e=document.getElementById("attachment".concat(F.discussionId)))||void 0===e?void 0:e.click()}},variant:"titleCardWithoutBorder",disableHover:!0}),R&&(0,t.jsx)(x.iu,{isOpen:R,title:U("deleteQuestion"),primaryAction:{title:U("yesDelete"),onClick:Y,variant:"error"},secondaryAction:{title:U("noContinue"),onClick:()=>A(!1)},children:U("deleteQuestionMessage")}),w&&(0,t.jsx)(S.u_,{isOpen:w,contentStyle:{width:eu,borderWidth:1,borderColor:null==er?void 0:null===(C=er.rawColors)||void 0===C?void 0:C["border-basic-color-4"],borderStyle:"solid",backgroundColor:null==er?void 0:null===(y=er.rawColors)||void 0===y?void 0:y["background-basic-color-2"]},onRequestClose:eh,children:(0,t.jsx)(I.Z6,{data:el,callbacks:eo,onModalCloseRequest:eh,srcDetails:{supportType:D.kxL.SUPPORT_TYPE_REPORT,discussionId:F.discussionId},showRaiseTicket:w})})]})},y=i(55920),f=l.memo(e=>{var s,i,c,v,h,m,S,I,C,g,T,f,j,b,k;let{theme:P}=(0,u.B7)(),{t:L}=(0,o.$)("discussion"),[E,_]=(0,l.useState)(null),[U,R]=(0,l.useState)([{label:L("allDiscussion"),options:[]}]),[A,w]=(0,l.useState)([{label:"",options:[]}]),[N,F]=(0,l.useState)(0),[O,B]=(0,l.useState)(!1),[G,q]=(0,l.useState)(null),{data:H,getFileNameFromUrl:M,stripAndDecode:z,postQuestion:$,postReply:Y,editQuestion:V,editReply:W,deleteQuestion:Z,deleteReply:Q,fetchCourseLevelDiscussion:K,fetchLessonLevelDiscussion:J,fetchLessonListForCourse:X,uploadFile:ee,decodeHtmlEntities:es,convertSecToTime:ei,AppendSuffixZero:et,setPlayerFocusState:el,getCurrentPosition:eo,discussionFetchStatus:en,getSlideNumber:er,navigateBack:eu,setCurrentAccessingLesson:ea,isAnsweredByFaculty:ed,navigateToLesson:ec,toggleLikeComment:ep,toggleLikeDiscussion:ex,raiseTicketData:ev,raiseTicketCallbacks:eh}=e,{discussion:{postDiscussionUrlToken:em,discussionData:eS,isAllDiscussionScreen:eI,isNewsfeedDiscussionEnabled:eC,isLikeEnabled:eg,discussionFetchError:eD,isCommunityPostDetailsScreen:eT,discussionCourseLesson:ey},courseData:{courseUploadToken:ef,userEnrollmentState:ej,isDiscussionCircle:eb,bundleUploadToken:ek,currentBundleDetails:eP},sharedInfo:{sharedAuthToken:eL,sharedUserId:eE},communityData:{currentCommunityDetails:e_}}=H,eU=null==eS?void 0:eS.enrollmentType,eR=H.discussion.discussionType===D.sV5.POST_DISCUSSION,eA=!eR||eC&&(!eT||!(null==e_?void 0:e_.isBanned)&&(null==e_?void 0:e_.isMember)),ew=eR?em:eb?ek:ef,[eN,eF]=(0,l.useState)(),[eO,eB]=(0,l.useState)(null),[eG,eq]=(0,l.useState)(!1),[eH,eM]=(0,l.useState)(!0),ez=(0,y.D9)(eG);(0,l.useEffect)(()=>{void 0!==ez&&ez!==eG&&null===E&&(eI||eR?K(H.courseData.currentCourseId,H.courseData.currentBundleId,D.awN.FIRST_LOAD,1,H.discussion.discussionType,H.discussion.discussionPostId,H.discussion.discussionPostTitle,eG,!!eb):J(H.courseData.currentLessonId,D.awN.FIRST_LOAD,1,eG),eM(!1),setTimeout(()=>{eM(!0)}))},[eG]),(0,l.useEffect)(()=>{if(eP){var e,s,i,t,l,o,n,r,u;let a=[],d=[],c=[],{bundleCourses:p}=eP||{},x={...null==p?void 0:null===(e=p.courses)||void 0===e?void 0:e.coursesDetails,...null==p?void 0:null===(s=p.test)||void 0===s?void 0:s.testsDetails,...null==p?void 0:null===(i=p.testSeries)||void 0===i?void 0:i.testSeriesDetails,...null==p?void 0:null===(t=p.ebooks)||void 0===t?void 0:t.ebooksDetails,...null==p?void 0:null===(l=p.podcasts)||void 0===l?void 0:l.podcastsDetails,...null==p?void 0:null===(o=p.webinars)||void 0===o?void 0:o.webinarsDetails,...null==p?void 0:null===(n=p.digitalProducts)||void 0===n?void 0:n.digitalProductsDetails,...null==p?void 0:null===(r=p.telegrams)||void 0===r?void 0:r.telegramsDetails,...null==p?void 0:null===(u=p.tracks)||void 0===u?void 0:u.tracksDetails},v=(()=>{let e=Object.values(x).map(e=>({label:e.courseTitle,value:e.courseId,type:D.s3B.COURSE_DISCUSSION}));return e.push({label:L("allDiscussions"),value:eP.courseId,type:D.s3B.ALL_DISCUSSION},{label:L("myDiscussions"),value:eE,type:D.s3B.MY_DISCUSSION}),e})();v.forEach(e=>{let{label:s,value:i,type:t}=e,l={label:s,value:i,type:t};e.type===D.s3B.ALL_DISCUSSION?a.push(l):e.type===D.s3B.COURSE_DISCUSSION?d.push(l):e.type===D.s3B.MY_DISCUSSION&&c.push(l)});let h=[{options:a},{options:c},{label:L("courseDiscussion"),options:d}];R(h)}},[eP]),(0,l.useEffect)(()=>{if(ey.length){let e=[];ey.forEach(s=>{let{title:i,id:t}=s;e.push({label:i,value:t})}),w([{label:"Lessons",options:e}])}},[ey]),(0,l.useEffect)(()=>{(null==eD?void 0:eD.errorMessage)&&(0,r.FN)({message:null==eD?void 0:eD.errorMessage})},[null==eD?void 0:eD.errorMessage]),(0,l.useEffect)(()=>{let e=null!=eO?eO:eN;e&&setTimeout(()=>{var s;null===(s=document.getElementById(e.toString()))||void 0===s||s.scrollIntoView({behavior:"smooth",block:"start"})})},[eN,eO]);let fetchFilterDiscussionData=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(eI&&(null==E?void 0:E.type)!==D.s3B.LESSON_DISCUSSION&&!s){let s=(null==E?void 0:E.type)===D.s3B.ALL_DISCUSSION&&eb,i=(null==E?void 0:E.type)===D.s3B.MY_DISCUSSION?null==E?void 0:E.type:null;K(null==E?void 0:E.value,H.courseData.currentBundleId,D.awN.LOAD_MORE,e,H.discussion.discussionType,H.discussion.discussionPostId,H.discussion.discussionPostTitle,eG,s,i)}else J(null==G?void 0:G.value,D.awN.LOAD_MORE,e,eG,H.courseData.currentBundleId)};(0,l.useEffect)(()=>{E&&!G?(fetchFilterDiscussionData(1),(null==E?void 0:E.type)===D.s3B.COURSE_DISCUSSION&&X(E.value)):G&&fetchFilterDiscussionData(1,!0),F(0)},[E,eG,G]);let e$=(0,l.useCallback)(()=>{if(E){fetchFilterDiscussionData(D.awN.FIRST_LOAD+N+1),F(e=>e+1);return}eI?K(H.courseData.currentCourseId,H.courseData.currentBundleId,D.awN.LOAD_MORE,H.discussion.discussionData.currentPage+1,H.discussion.discussionType,H.discussion.discussionPostId,H.discussion.discussionPostTitle,eG,eb):J(H.courseData.currentLessonId,D.awN.LOAD_MORE,H.discussion.discussionData.currentPage+1,eG)},[K,H,eI,eG]),eY=(0,l.useCallback)(e=>{eF(eN===e?null:e),eB(null)},[eN]);(0,l.useEffect)(()=>{var e,s;let i=null==H?void 0:null===(e=H.discussion)||void 0===e?void 0:e.discussionData,t=(null==i?void 0:i.currentPage)<(null==i?void 0:i.totalPages);t||eZ||!((null==i?void 0:null===(s=i.discussionIds)||void 0===s?void 0:s.length)>5)?B(!1):B(!0)},[null==H?void 0:null===(i=H.discussion)||void 0===i?void 0:null===(s=i.discussionData)||void 0===s?void 0:s.currentPage,en,eS]);let onPostDiscussion=()=>{var e;_(null===(e=U[0])||void 0===e?void 0:e.options[0]),w([{label:"",options:[]}])};(null==H?void 0:null===(v=H.discussion)||void 0===v?void 0:null===(c=v.discussionData)||void 0===c?void 0:c.discussionIds)&&(H.discussion.discussionData.currentPage,H.discussion.discussionData.totalPages);let eV=null!==(k=null==H?void 0:null===(m=H.discussion)||void 0===m?void 0:null===(h=m.discussionData)||void 0===h?void 0:h.discussionIds)&&void 0!==k?k:[],eW=(eU||ej)===D.T_M.PURCHASED||eR&&!!eE&&eA,eZ=!(null==eS?void 0:null===(S=eS.discussionIds)||void 0===S?void 0:S.length)&&(en===D.iFP.SUCCESS||en===D.iFP.FAILED),eQ=(null==H?void 0:null===(C=H.discussion)||void 0===C?void 0:null===(I=C.discussionData)||void 0===I?void 0:I.currentPage)<(null==H?void 0:null===(T=H.discussion)||void 0===T?void 0:null===(g=T.discussionData)||void 0===g?void 0:g.totalPages),isItemLoading=e=>{let s=e===eV.length-1&&en===D.iFP.IN_PROGRESS&&eQ;return s};return(0,t.jsxs)(a.xu,{sx:{pb:["50vh","50vh",0]},children:[(eU===D.T_M.PURCHASED||eU===D.T_M.FREE_PURCHASE||ej===D.T_M.PURCHASED||eR&&!!eE&&eA)&&(0,t.jsx)(a.xu,{pt:0,pb:2,children:(0,t.jsx)(p,{getFileNameFromUrl:M,postQuestion:$,editQuestion:V,submitButtonText:L("postDiscussion").toLocaleUpperCase(),courseId:H.courseData.currentCourseId||H.discussion.discussionCourseId,bundleId:H.courseData.currentBundleId,courseTitle:H.courseData.currentCourseSeoTitle,lessonId:H.courseData.currentLessonId,lessonTitle:H.courseData.currentLessonTitle,postId:H.discussion.discussionPostId,postTitle:H.discussion.discussionPostTitle,uploadFile:ee,isPostDiscussion:eR,uploadToken:ew,sharedAuthToken:eL,setPlayerFocusState:el,getCurrentPosition:eo,courseSectionId:H.courseData.currentCourseSectionId,isLessonLevel:!!eo,placeholderText:L("startDiscussion"),isDiscussionCircle:eb,onPostDiscussion:eb?()=>onPostDiscussion():null})}),(0,t.jsxs)(a.kC,{sx:{alignItems:"center",justifyContent:"flex-end",gap:3},children:[eb&&(0,t.jsxs)(a.kC,{sx:{width:["auto","30%","30%"],gap:4},children:[(0,t.jsx)(a.xu,{sx:{width:"100%"},children:(0,t.jsx)(r.Ph,{options:U,defaultValue:null===(f=U[0])||void 0===f?void 0:f.options,onChange:e=>{F(0),w([{label:"",options:[]}]),q(null),_(e)},inputValue:E||U[0].options,isSearchable:!0,placeholder:L("filterByDiscussion")})}),(0,t.jsx)(a.xu,{sx:{width:"100%"},children:(0,t.jsx)(r.Ph,{options:A,isClearable:!0,onChange:e=>{F(0),q(e)},inputValue:G,isSearchable:!0,placeholder:L("filterByLessons")})})]}),(0,t.jsx)(r.zx,{size:"small",type:"outline",variant:"basic",onClick:()=>eq(e=>!e),followIcon:eG?d.q.arrowUp:d.q.arrowDown,followIconProps:{icon:eG?d.q.arrowUp:d.q.arrowDown,size:18},disabled:!eH||eZ,children:L("sort").toLocaleUpperCase()})]}),eZ?(0,t.jsx)(x.T9,{title:L("noDiscussionAvailable")}):(0,t.jsx)(n.FE,{removeGutter:!0,renderItem:(e,s)=>{var i,l,o;let n=isItemLoading(s);if(n)return(0,t.jsxs)(a.xu,{children:[" ",(0,t.jsx)(r.aN,{})]});let u=null==H?void 0:null===(o=H.discussion)||void 0===o?void 0:null===(l=o.discussionData)||void 0===l?void 0:null===(i=l.discussionDetails)||void 0===i?void 0:i[e];return(0,t.jsxs)(a.xu,{id:e,children:[eO===e?(0,t.jsx)(a.xu,{px:0,pt:3,children:(0,t.jsx)(p,{inputFor:"discussion",inputType:"edit",discussionId:e,postQuestion:$,editQuestion:function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];eB(null),(s[0].data.message!==u.discussionText||s[0].data.attachment_url!==u.attachmentUrl)&&V(...s)},submitButtonText:L("save").toLocaleUpperCase(),courseId:H.courseData.currentCourseId,courseTitle:H.courseData.currentCourseSeoTitle,lessonId:H.courseData.currentLessonId,lessonTitle:H.courseData.currentLessonTitle,postId:H.discussion.discussionPostId,postTitle:H.discussion.discussionPostTitle,uploadFile:ee,isPostDiscussion:eR,uploadToken:ew,sharedAuthToken:eL,initialValue:u.discussionText,attachmentUrl:u.attachmentUrl,getFileNameFromUrl:M,setPlayerFocusState:el,getCurrentPosition:eo,courseSectionId:H.courseData.currentCourseSectionId,isLessonLevel:!!eo,inputLabel:L("editDiscussion"),bundleTitle:H.courseData.currentBundleSeoTitle,isDiscussionCircle:eb})}):(0,t.jsx)(DisussionCard,{isLikeEnabled:eg,doingLikeAllowed:eW,toggleLikeDiscussion:ex,onClickEdit:()=>{eB(e),eF(null)},decodeHtmlEntities:es,onToggleDiscussion:eY,stripAndDecode:z,getFileNameFromUrl:M,discussionDetail:u,isByCurrentUser:u.userInfo.userId===eE,convertSecToTime:ei,AppendSuffixZero:et,onClickDelete:()=>Z(e),isAllDiscussionScreen:H.discussion.isAllDiscussionScreen,courseData:H.courseData,getSlideNumber:er,navigateBack:eu,setCurrentAccessingLesson:ea,isAnsweredByFaculty:ed,allowEditing:(!eR||eA)&&!eO,navigateToLesson:ec,raiseTicketData:ev,raiseTicketCallbacks:eh,isDiscussionCircle:eb}),eN===e&&!eO&&(0,t.jsx)(a.xu,{children:(0,t.jsx)(Replies,{userEnrollmentState:eU||ej,doingLikeAllowed:eW,courseSectionId:H.courseData.currentCourseSectionId,isPostDiscussion:eR,comments:u.comments,getFileNameFromUrl:M,postReply:Y,editReply:W,deleteReply:Q,stripAndDecode:z,discussionId:e,uploadFile:ee,uploadToken:ew,sharedAuthToken:eL,courseId:H.courseData.currentCourseId||H.discussion.discussionCourseId,bundleId:H.courseData.currentBundleId,courseTitle:H.courseData.currentCourseSeoTitle,lessonId:H.courseData.currentLessonId,lessonTitle:H.courseData.currentLessonTitle,postId:H.discussion.discussionPostId,postTitle:H.discussion.discussionPostTitle,sharedUserId:eE,getCurrentPosition:eo,isAnsweredByFaculty:ed,isLearnerAllowedToDiscuss:eA,toggleLikeComment:ep,isLikeEnabled:eg,raiseTicketData:ev,raiseTicketCallbacks:eh,isDiscussionCircle:eb})}),s!==H.discussion.discussionData.discussionIds.length-1&&(0,t.jsx)(a.xu,{pt:0,children:(0,t.jsx)(r.iz,{})})]},e)},infiniteLoaderProps:{loadMoreItems:()=>{H.discussion.discussionData.currentPage<H.discussion.discussionData.totalPages&&e$()},itemCount:(null==H?void 0:null===(b=H.discussion)||void 0===b?void 0:null===(j=b.discussionData)||void 0===j?void 0:j.totalPages)||0,hasNextPage:eQ,isInfiniteLoaderLoading:en===D.iFP.IN_PROGRESS},itemData:eV,variant:"list"}),O&&(0,t.jsx)(a.kC,{sx:{justifyContent:"center"},children:(0,t.jsx)(r.xv,{category:"p2",status:"basic",children:L("discussionEnd")})})]})}),DiscussionsListWeb=e=>{var s,i,n,u,d,c,p,v,h;let{t:m}=(0,o.$)("discussion"),{allDiscussionsData:S,raiseTicketCallbacks:I,raiseTicketData:C,currentProductDetails:g}=e,{callbacks:D,data:y}=S,{isSequentialPathEnabled:j=!1}=g||{},{getFileNameFromUrl:b,StripHTML:k,decodeServerData:P,postReply:L,postQuestion:E,editQuestion:_,editReply:U,deleteQuestion:R,deleteComment:A,fetchLessonLevelDiscussion:w,fetchCourseLevelDiscussion:N,fetchLessonListForCourse:F,uploadFile:O,decodeHtmlEntities:B,convertSecToTime:G,AppendSuffixZero:q,navigateToDiscussion:H,getSlideNumber:M,setCurrentAccessingLesson:z,navigateBack:$,setPlayerFocusState:Y,getCurrentPosition:V,isAnsweredByFaculty:W,navigateToLesson:Z,toggleLikeComment:Q,toggleLikeDiscussion:K}=D,{courseData:J}=y,{currentCourseLessons:X,currentLessonId:ee}=J,{lessonDetails:es}=X||{},ei=(0,l.useCallback)(e=>P(k(e)),[k,P]),et=es&&es[ee],el=j&&(null==et?void 0:et.isLessonLocked);return el?(0,t.jsx)(x.T9,{title:m("lockedDiscussionInfo")}):(0,t.jsxs)(a.kC,{sx:{flexDirection:"column",px:3},children:[(0,t.jsxs)(a.kC,{sx:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsxs)(a.kC,{sx:{alignItems:"center"},children:[(0,t.jsx)(r.xv,{category:["p1","h5","h4"],sx:{pb:[0,0,0]},textTransform:"capitalize",children:m(V?"lessonDiscussion":"discussions")}),(0,t.jsx)(a.xu,{px:1}),!!(null===(u=S.data)||void 0===u?void 0:null===(n=u.discussion)||void 0===n?void 0:null===(i=n.discussionData)||void 0===i?void 0:null===(s=i.discussionIds)||void 0===s?void 0:s.length)&&(0,t.jsx)(T.Z,{text:null!==(h=null===(v=S.data)||void 0===v?void 0:null===(p=v.discussion)||void 0===p?void 0:null===(c=p.discussionData)||void 0===c?void 0:null===(d=c.discussionIds)||void 0===d?void 0:d.length)&&void 0!==h?h:0,variant:"subtle",badgeColor:"basic",badgeShape:"roundedEdges"})]}),!!V&&(0,t.jsx)(a.xu,{children:(0,t.jsx)(r.zx,{type:"ghost",size:["tiny","small","medium"],onClick:()=>null==H?void 0:H({courseId:y.courseData.currentCourseId,courseSeo:y.courseData.currentCourseSeoTitle,bundleId:y.courseData.currentBundleId,bundleSeo:y.courseData.currentBundleSeoTitle}),style:{margin:"auto 0"},children:(0,t.jsx)(r.xv,{buttonFont:["tiny","small","medium"],children:m("product:viewAll")})})})]}),(0,t.jsx)(a.xu,{pt:[0,2,2],children:(0,t.jsx)(f,{toggleLikeComment:Q,toggleLikeDiscussion:K,convertSecToTime:G,AppendSuffixZero:q,stripAndDecode:ei,getFileNameFromUrl:b,data:y,postQuestion:E,editQuestion:_,deleteQuestion:R,postReply:L,editReply:U,deleteReply:A,fetchCourseLevelDiscussion:N,fetchLessonLevelDiscussion:w,uploadFile:O,decodeHtmlEntities:B,setPlayerFocusState:Y,getCurrentPosition:V,discussionFetchStatus:y.discussion.discussionFetchStatus,getSlideNumber:M,setCurrentAccessingLesson:z,navigateBack:$,isAnsweredByFaculty:W,navigateToLesson:Z,raiseTicketData:C,raiseTicketCallbacks:I,fetchLessonListForCourse:F})})]})}},1194:function(e,s,i){i.d(s,{v:function(){return supportListHeader_SupportListHeader},P:function(){return supportTag}});var t=i(24246),l=i(27378),o=i(33790),n=i(9078),r=i(72022),supportListHeader_SupportListHeader=function(e){let{raiseTicketCallbacks:s}=e||{},{t:i}=(0,n.$)(["support","common"]),{goToStore:l,goToAccount:u,getIsDesktopApp:a,navigateToContentLibrary:d}=s,c=a(),p=[{title:i(c?"product:contentLibrary":"home"),onClick:()=>{c?d():l()}},{title:i("account"),onClick:()=>{u()}},{title:i("helpDesk")}];return(0,t.jsxs)(r.xu,{children:[(0,t.jsx)(r.xu,{pb:8,children:(0,t.jsx)(o.Oo,{data:p})}),(0,t.jsx)(r.kC,{sx:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",rowGap:1},children:(0,t.jsx)(r.kC,{sx:{alignItems:"center",columnGap:2},children:(0,t.jsx)(o.xv,{category:["h5","h3","h3"],children:i("common:helpDesk")})})})]})},supportTag=function(e){let{ticketStatus:s}=e,{t:i}=(0,n.$)("support"),u=(0,l.useMemo)(()=>{var e;return null===(e=i("ticketStatus.".concat(s)))||void 0===e?void 0:e.toLocaleUpperCase()},[s]),a=(0,l.useMemo)(()=>{switch(s){case 1:case 3:return"accent";case 2:case 4:return"success";case 5:default:return"basic";case 13:return"secondary"}},[s]);return(0,t.jsx)(r.xu,{children:(0,t.jsx)(o.Vp,{onSelect:()=>{},tagStatus:a,disableHover:!0,title:u})})}},68766:function(e,s,i){var t=i(24246),l=i(27378),o=i(96664),n=i(72022),r=i(33790),u=i(9078),a=i(15819),d=i(75721);function RaiseTicket(e){var s,i,c,p,x,v,h;let{data:m,callbacks:S,onModalCloseRequest:I,showRaiseTicket:C,srcDetails:g}=e,{onRaiseTicket:D,onSelectSupportType:T,onSelectSupportSubType:y,onSubmitTicket:f,cleanUpAdapterState:j,goBack:b,goToSupport:k,onSubmitDemand:P,doPersitTimerForTroubleShoot:L}=S,{supportTypes:E,subSupportTypes:_,supportErrorMessage:U,submitTicketStatus:R,isTicketFormFailed:A,isTicketFormLoading:w,isPostPayment:N}=m,[F,O]=(0,l.useState)(!1),[B,G]=(0,l.useState)(""),[q,H]=(0,l.useState)(!1),[M,z]=(0,l.useState)([]),[$,Y]=(0,l.useState)(!0),{t:V}=(0,u.$)("support"),W=(0,o.UK)(f),Z=(0,o.UK)(P),Q=(0,d.V)([2,3,3]),K=(0,l.useRef)(null),J=!!(null==m?void 0:m.showLegacySupport),X=J?[]:Object.values(a.HsR),ee=J?[]:Object.values(a.B5S);(0,l.useEffect)(function(){let e=I?C&&(null==E?void 0:E.length)===0:(null==E?void 0:E.length)===0;e&&D&&D()},[C]),(0,l.useEffect)(function(){E&&(null==E?void 0:E.length)>0&&z([...E])},[E]),(0,l.useEffect)(function(){if((null==m?void 0:m.selectedSubSupportIdx)===-1){var e;null===(e=K.current)||void 0===e||e.clearValue()}},[m.selectedSubSupportIdx]);let quitRaiseTicket=()=>{I?I():k()};(0,l.useEffect)(()=>{"success"===W.status&&((0,r.FN)({message:V("submitTicketSuccess")}),L(null),quitRaiseTicket())},[W.status]),(0,l.useEffect)(()=>{"success"===Z.status&&((0,r.FN)({message:V("submitReportSuccess")}),quitRaiseTicket())},[Z.status]);let es=(0,l.useMemo)(()=>null==M?void 0:M.map((e,s)=>X.includes(e.supportType)?null:{label:e.supportName,value:s}),[M]),ei=null==_?void 0:_.map((e,s)=>ee.includes(e.id)?null:{label:null==e?void 0:e.subTypeName,value:s}),et=(null===(s=W.error)||void 0===s?void 0:s.message)||(null===(i=Z.error)||void 0===i?void 0:i.message)||U;return null===(c=W.error)||void 0===c||c.validationType,a.BfE.SUPPORT,a.BfE.SUB_SUPPORT,a.BfE.DESCRIPTION,a.BfE.AGREEMENT_CHECK,(0,l.useEffect)(()=>{(null==g?void 0:g.supportType)&&(Y(!1),M.filter((e,s)=>{if((null==g?void 0:g.supportType)===e.supportType){T(s);return}}))},[M]),(0,t.jsxs)(n.kC,{my:2,sx:{flexDirection:"column",maxWidth:20,rowGap:[2,4],flex:1,width:"100%"},children:[(0,t.jsx)(n.xu,{mb:[1,2,2],children:(null==g?void 0:g.supportType)===a.kxL.SUPPORT_TYPE_REPORT?(0,t.jsx)(r.xv,{category:["h5","h3","h3"],children:V("reportContent")}):(0,t.jsx)(r.xv,{category:["h5","h3","h3"],children:V("raiseATicket")})}),!e.data.srcDetails&&$&&(0,t.jsx)(r.Ph,{onChange:e=>{T(null==e?void 0:e.value)},label:V("subject"),placeholder:V("selectSubject"),options:null==es?void 0:es.filter(e=>null!==e),required:!0}),(0,t.jsx)(r.Ph,{onChange:e=>{y(null==e?void 0:e.value)},label:V("category"),placeholder:V("selectCategoryHere"),setInputRef:e=>K=e,inputValue:(null==m?void 0:m.selectedSubSupportIdx)>=0?null==ei?void 0:ei[null==m?void 0:m.selectedSubSupportIdx]:null,options:null==ei?void 0:ei.filter(e=>null!==e),required:!0}),(0,t.jsx)(r.nv,{type:"textArea",onChange:e=>{G(e)},label:V("description"),name:"description",placeholderText:V("description"),numberOfLines:Q,required:!0}),(null==g?void 0:g.supportType)===a.kxL.SUPPORT_TYPE_REPORT?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.kC,{sx:{flexDirection:"column",rowGap:4},children:[(0,t.jsx)(r.xv,{category:"s1",children:V("explainReportIssue")}),!!et&&q&&(0,t.jsx)(r.xv,{status:"error",children:et})]}),(0,t.jsxs)(n.kC,{mt:6,sx:{columnGap:2,alignItems:"center"},children:[(0,t.jsx)(r.zx,{onClick:()=>{Z.execute(!0,B,V,"",g),H(!0)},disabled:W.loading,children:null===(p=V("report"))||void 0===p?void 0:p.toLocaleUpperCase()}),(0,t.jsx)(r.zx,{type:"ghost",variant:"basic",onClick:()=>quitRaiseTicket(),children:null===(x=V("cancel"))||void 0===x?void 0:x.toLocaleUpperCase()})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.kC,{sx:{flexDirection:"column",rowGap:4},children:[(0,t.jsx)(r.xv,{category:"s2",children:V("explainIssue")}),!!et&&q&&(0,t.jsx)(r.xv,{status:"error",children:et})]}),(0,t.jsxs)(n.kC,{mt:6,sx:{columnGap:2,alignItems:"center"},children:[(0,t.jsx)(r.zx,{onClick:()=>{W.execute(!0,B,()=>{},V,"",g&&Object.values(g).length?g:{supportType:100,title:""}),H(!0)},disabled:W.loading,children:null===(v=V("raiseATicket"))||void 0===v?void 0:v.toLocaleUpperCase()}),(0,t.jsx)(r.zx,{type:"ghost",variant:"basic",onClick:()=>quitRaiseTicket(),children:null===(h=V("cancel"))||void 0===h?void 0:h.toLocaleUpperCase()})]})]})]})}s.Z=RaiseTicket},3768:function(e,s,i){i.d(s,{Z6:function(){return t.Z},JT:function(){return supportLists},rz:function(){return ticketDetails},ti:function(){return ticketReplies}});var t=i(68766),l=i(24246),o=i(27378),n=i(72022),r=i(37694),u=i(95563),a=i(15819),d=i(27693),c=i.n(d),p=i(33790),x=i(1194),v=i(9078),h=i(16995),supportLists=function(e){let{data:s,callbacks:i}=e,{isUserLoggedIn:t,raiseTicketData:o,supportApiStatus:d,supportErrorMessage:m,supportState:S,tickets:I}=s,{goToSupportTicket:C,fetchTickets:g}=i,{t:D}=(0,v.$)(["support","common"]);return 0===I.length&&S===a.yjd.VIEWING_TICKETS&&(d===a.iFP.IN_PROGRESS||d===a.iFP.IDLE)?(0,l.jsx)(n.xu,{sx:{height:18},children:(0,l.jsx)(p.aN,{})}):0===I.length&&S===a.yjd.VIEWING_TICKETS&&d===a.iFP.FAILED?(0,l.jsx)(r.qz,{title:D("common:crashError"),onRetry:()=>{g&&g()}}):0===I.length?(0,l.jsx)(r.T9,{title:D("emptySupport"),illustrationSource:h.K.enthusiastic}):(0,l.jsx)(n.xu,{pt:4,children:(0,l.jsx)(u.FE,{itemData:I,variant:"scannableList",renderItem:e=>{let s=[];if((null==e?void 0:e.ticketId)&&s.push(null==e?void 0:e.ticketId),null==e?void 0:e.updatedAt){let i=c()(null==e?void 0:e.updatedAt).format("MMM DD, YYYY"),t=c()(null==e?void 0:e.updatedAt).format("h:mm A"),l="".concat(i," (").concat(t,")");s.push(l)}return s=s.join(" • "),(0,l.jsx)(n.xu,{children:(0,l.jsx)(r.cS,{showBody:!0,bodyDescription:e.ticketDiscription,onHandleCard:()=>{e.id&&C(e.id||0)},variant:"titleCard",headerTitle:s||"",showHeader:!0,hideHeaderThumbnail:!0,bodyDescriptionNoOfLines:3,headerTitleTextProps:{textCustomColor:"text-basic-color-2"},bodyDescriptionTextProps:{textCustomColor:"text-basic-color-2"},showActionbar:!0,showAction1:!0,allocateSpaceForEmptyLines:!0,HeaderMetaComponent:()=>(0,l.jsx)(x.P,{ticketStatus:e.ticketStatus}),action1:{text:"".concat(e.replyCount," ").concat(1===e.replyCount?D("reply"):D("replies")),textProps:{textCustomColor:"text-basic-color-2"}},bodyTitle:e.title})})}})})},ticketDetails=e=>{let{callbacks:s,data:i}=e,{t}=(0,v.$)(["support","common"]),{goToStore:o,goToSupport:u}=s,a=[{title:t("common:home").toLocaleUpperCase(),onClick:()=>{o()}},{title:t("support"),onClick:()=>{u()}},{title:t("raiseATicket")}],{currentTicketDetails:d,supportErrorMessage:h,supportState:m,supportApiStatus:S}=i,{fetchCurrentTicketDetils:I,goBack:C,replyToTicket:g}=s,D=null==d?void 0:d.ticketDetails,T=[];if((null==D?void 0:D.id)&&T.push(null==D?void 0:D.id),null==D?void 0:D.updatedAt){let e=c()(null==D?void 0:D.updatedAt).format("MMM DD, YYYY"),s=c()(null==D?void 0:D.updatedAt).format("h:mm A"),i="".concat(e," (").concat(s,")");T.push(i)}return T=T.join(" • "),(0,l.jsxs)(n.xu,{sx:{width:"100%"},children:[(0,l.jsx)(p.Oo,{data:a}),(0,l.jsxs)(n.kC,{sx:{columnGap:4,alignItems:"center"},my:8,children:[(0,l.jsx)(p.xv,{category:["h5","h3","h3"],children:(null==D?void 0:D.title)||""}),(0,l.jsx)(x.P,{ticketStatus:(null==D?void 0:D.status)||1})]}),(0,l.jsx)(r.cS,{variant:"titleCard",showBody:!0,showHeader:!0,bodyDescription:(null==D?void 0:D.description)||"",hideHeaderThumbnail:!0,headerTitle:T})]})},m=i(87815),S=i.n(m);c().extend(S());var ticketReplies=e=>{var s;let{callbacks:i,data:t}=e,{currentTicketDetails:d,supportErrorMessage:x,supportState:h,supportApiStatus:m}=t,{fetchCurrentTicketDetils:S,goBack:I,replyToTicket:C}=i,{t:g}=(0,v.$)(["support","common"]),D=(0,o.useRef)(null),[T,y]=(0,o.useState)(""),f=h===a.yjd.REPLYING_TICKET&&m===a.iFP.IN_PROGRESS,j=h===a.yjd.REPLYING_TICKET&&m===a.iFP.SUCCESS,b=h===a.yjd.REPLYING_TICKET&&m===a.iFP.FAILED,k=null==d?void 0:d.ticketReplies;return(0,o.useEffect)(()=>{b&&(0,p.FN)({message:x})},[b]),(0,o.useEffect)(function(){j&&(null==D?void 0:D.current)&&(y(""),D.current.value="")},[j]),(0,l.jsxs)(n.xu,{sx:{width:"100%"},children:[(0,l.jsxs)(n.kC,{sx:{rowGap:2,flexDirection:"column"},children:[(0,l.jsx)(p.nv,{label:g("reply"),setInputRef:e=>{D=e},onChange:e=>{y(e)},name:"reply",type:"textArea",placeholderText:g("postAReply"),numberOfLines:4}),(0,l.jsx)(p.zx,{onClick:()=>{T&&C(T)},sx:{width:"fit-content"},disabled:!T||f,children:null===(s=g("reply"))||void 0===s?void 0:s.toLocaleUpperCase()})]}),(0,l.jsx)(n.xu,{mt:8,children:(0,l.jsx)(u.FE,{variant:"list",itemData:k,removeGutter:!0,ListHeaderComponent:()=>(null==k?void 0:k.length)?(0,l.jsx)(n.xu,{mb:2,children:(0,l.jsx)(p.xv,{category:"h6",children:g("replyCount",{replyCount:null==k?void 0:k.length})})}):null,renderItem:(e,s)=>{var i;let t=e.roleId&&e.roleId!==a.xZ9.STUDENT,o=s+1===(null==k?void 0:k.length);return(0,l.jsx)(n.xu,{sx:{borderBottomWidth:o?0:1,borderBottomStyle:"solid",borderBottomColor:"border-basic-color-4"},children:(0,l.jsx)(r.cS,{variant:"titleCardWithoutBorder",showBody:!0,showHeader:!0,headerTitle:(0,l.jsxs)(p.xv,{children:[(0,l.jsx)(p.xv,{category:"p1",sx:{display:"inline"},children:e.replierName}),(0,l.jsxs)(p.xv,{category:"c2",textCustomColor:"text-hint-color",sx:{display:"inline"},children:["\xa0•\xa0",null===(i=c()(null==e?void 0:e.updatedAt))||void 0===i?void 0:i.fromNow()]})]}),headerThumbnailLabel:e.replierName,headerImage:null==e?void 0:e.replierPhoto,headerThumbnailProps:{status:t?"faculty":"none"},bodyDescription:null==e?void 0:e.replyMessage})})}})})]})}}}]);